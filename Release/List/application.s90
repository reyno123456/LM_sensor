///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V5.30.0.50166/W32 for Atmel AVR   11/Dec/2009  23:21:42 /
// Copyright 1996-2009 IAR Systems AB.                                        /
//                                                                            /
//    Source file  =  D:\avr\LM_Finial_Test\application.c                     /
//    Command line =  D:\avr\LM_Finial_Test\application.c --cpu=m644p -ms -o  /
//                    D:\avr\LM_Finial_Test\Release\Obj\ -D NDEBUG -D LM018   /
//                    -D FINAL_VERSION2 -lCN D:\avr\LM_Finial_Test\Release\Li /
//                    st\ -lA D:\avr\LM_Finial_Test\Release\List\             /
//                    --diag_suppress Pa082,Pe167,Pe186                       /
//                    --initializers_in_flash -z6 --no_inline                 /
//                    --no_cross_call --no_tbaa -DENABLE_BIT_DEFINITIONS -e   /
//                    -I "C:\Program Files\IAR Systems\Embedded Workbench     /
//                    5.3\avr\INC\" -I "C:\Program Files\IAR                  /
//                    Systems\Embedded Workbench 5.3\avr\INC\CLIB\"           /
//                    --eeprom_size 2048                                      /
//    List file    =  D:\avr\LM_Finial_Test\Release\List\application.s90      /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME application

        RTMODEL "__64bit_doubles", "disabled"
        RTMODEL "__cpu", "3"
        RTMODEL "__cpu_name", "ATmega644P"
        RTMODEL "__enhanced_core", "enabled"
        RTMODEL "__has_elpm", "false"
        RTMODEL "__memory_model", "2"
        RTMODEL "__rt_version", "3"

        RSEG CSTACK:DATA:NOROOT(0)
        RSEG RSTACK:DATA:NOROOT(0)

        EXTERN ?CV_SWITCH_L06
        EXTERN ?EPILOGUE_B3_L09
        EXTERN ?EPILOGUE_B4_L09
        EXTERN ?EPILOGUE_B6_L09
        EXTERN ?EPILOGUE_B7_L09
        EXTERN ?EPILOGUE_B8_L09
        EXTERN ?F2SL_L04
        EXTERN ?F_DIV_L04
        EXTERN ?F_MUL_L04
        EXTERN ?L_EC_MUL_L03
        EXTERN ?ML_EEPROM_SRAM_16_16_L07
        EXTERN ?ML_FLASH_SRAM_16EC_16_L07
        EXTERN ?ML_SRAM_EEPROM_16_16_L07
        EXTERN ?ML_SRAM_SRAM_16_L07
        EXTERN ?PROLOGUE3_L09
        EXTERN ?PROLOGUE4_L09
        EXTERN ?PROLOGUE6_L09
        EXTERN ?PROLOGUE7_L09
        EXTERN ?PROLOGUE8_L09
        EXTERN ?Register_R4_is_cg_reg
        EXTERN ?Register_R5_is_cg_reg
        EXTERN ?Register_R6_is_cg_reg
        EXTERN ?Register_R7_is_cg_reg
        EXTERN ?SS_DIVMOD_L02
        EXTERN ?SV_SWITCH_L06
        EXTERN ?S_EC_MUL_L02
        EXTERN ?S_SHL_L02
        EXTERN ?UL2F_L04
        EXTERN ?UL_DIVMOD_L03
        EXTERN ?US_DIVMOD_L02
        EXTERN ?US_SHR_L02
        EXTERN ?need_segment_init
        EXTERN __eeget16_16
        EXTERN __eeget8_16
        EXTERN __eeput16_16
        EXTERN __eeput32_16
        EXTERN __eeput8_16

        PUBWEAK `?<Segment init: NEAR_I>`
        PUBWEAK `?<Segment init: NEAR_Z>`
        PUBLIC Actuator_regulation
        FUNCTION Actuator_regulation,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC DLL_setpoint
        FUNCTION DLL_setpoint,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC Dimmer_dec
        FUNCTION Dimmer_dec,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC Dimmer_regulation
        FUNCTION Dimmer_regulation,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC Dled_light_on_ms
        FUNCTION Dled_light_on_ms,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC Light_regulation
        FUNCTION Light_regulation,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC Mode_frame_GR
        FUNCTION Mode_frame_GR,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 11, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC Mode_frame_P2P
        FUNCTION Mode_frame_P2P,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 25, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC PnL_NONE_end
        FUNCTION PnL_NONE_end,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC PnL_ad_end
        FUNCTION PnL_ad_end,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC PofL_calc
        FUNCTION PofL_calc,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBWEAK _A_ASSR
        PUBWEAK _A_OCR0A
        PUBWEAK _A_OCR0B
        PUBWEAK _A_OCR2A
        PUBWEAK _A_PORTC
        PUBWEAK _A_PORTD
        PUBWEAK _A_TCCR0A
        PUBWEAK _A_TCCR0B
        PUBWEAK _A_TCCR2A
        PUBWEAK _A_TCCR2B
        PUBWEAK _A_TCNT0
        PUBWEAK _A_TIMSK0
        PUBWEAK __?EEARH
        PUBWEAK __?EEARL
        PUBWEAK __?EECR
        PUBWEAK __?EEDR
        PUBLIC all_reception_buffer_clear
        FUNCTION all_reception_buffer_clear,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC button_press_detect
        FUNCTION button_press_detect,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC button_release_detect
        FUNCTION button_release_detect,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC configurator_to_KO
        FUNCTION configurator_to_KO,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC daylight_service
        FUNCTION daylight_service,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC daylight_set_init
        FUNCTION daylight_set_init,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC dimmer_command
        FUNCTION dimmer_command,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC factor_divcalc
        FUNCTION factor_divcalc,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC factor_mulcalc
        FUNCTION factor_mulcalc,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC factory_calibration
        FUNCTION factory_calibration,021201H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC factory_default
        FUNCTION factory_default,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 53, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC frame_M2_answer
        FUNCTION frame_M2_answer,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 24, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC frame_send_disable_automatic_control
        FUNCTION frame_send_disable_automatic_control,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC frame_send_enable_automatic_control
        FUNCTION frame_send_enable_automatic_control,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC frame_send_end_pnl
        FUNCTION frame_send_end_pnl,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC frame_send_group_request
        FUNCTION frame_send_group_request,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC frame_send_start_pnl_group_confed
        FUNCTION frame_send_start_pnl_group_confed,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC frame_send_start_pnl_none_group_confed
        FUNCTION frame_send_start_pnl_none_group_confed,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC get_dl_level
        FUNCTION get_dl_level,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC get_us
        FUNCTION get_us,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC key_time_clear
        FUNCTION key_time_clear,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC led_blinking
        FUNCTION led_blinking,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC led_blinking_disable
        FUNCTION led_blinking_disable,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC led_blinking_double_disable
        FUNCTION led_blinking_double_disable,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC led_blinking_ms
        FUNCTION led_blinking_ms,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC led_blinking_normal
        FUNCTION led_blinking_normal,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC led_blinking_stage2_initial
        FUNCTION led_blinking_stage2_initial,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC led_status_recover
        FUNCTION led_status_recover,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC load_default_advance_parameter
        FUNCTION load_default_advance_parameter,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC load_update
        FUNCTION load_update,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC manual_reception_buffer_clear
        FUNCTION manual_reception_buffer_clear,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC motion_detect
        FUNCTION motion_detect,0a1203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC real_daylight_calc
        FUNCTION real_daylight_calc,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC regulation_timer_initial
        FUNCTION regulation_timer_initial,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC relay_timer_initial
        FUNCTION relay_timer_initial,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC scs_advance_from_none_confed
        FUNCTION scs_advance_from_none_confed,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC scs_pnl_advance_master
        FUNCTION scs_pnl_advance_master,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC scs_pnl_advance_slave
        FUNCTION scs_pnl_advance_slave,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC scs_pnl_group_sensor_detector
        FUNCTION scs_pnl_group_sensor_detector,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC scs_pnl_none_confed_master
        FUNCTION scs_pnl_none_confed_master,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC scs_pnl_none_confed_slave
        FUNCTION scs_pnl_none_confed_slave,021203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC service_main
        FUNCTION service_main,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC start_conf
        FUNCTION start_conf,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC test_ID_assigned
        FUNCTION test_ID_assigned,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC timer0_enable
        FUNCTION timer0_enable,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC timer2_enable
        FUNCTION timer2_enable,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 4, STACK
        PUBLIC timer_dimmer_initial
        FUNCTION timer_dimmer_initial,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC timer_flex2_initial
        FUNCTION timer_flex2_initial,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        PUBLIC timer_flex_initial
        FUNCTION timer_flex_initial,0203H
        ARGFRAME RSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        
        CFI Names cfiNames0
        CFI StackFrame CFA_Y Y DATA
        CFI StackFrame CFA_SP SP DATA
        CFI VirtualResource ?RetPad:1, ?RetHigh:8, ?RetLow:8, ?Ret:17
        CFI Resource R0:8, R1:8, R2:8, R3:8, R4:8, R5:8, R6:8, R7:8, R8:8, R9:8
        CFI Resource R10:8, R11:8, R12:8, R13:8, R14:8, R15:8, R16:8, R17:8
        CFI Resource R18:8, R19:8, R20:8, R21:8, R22:8, R23:8, R24:8, R25:8
        CFI Resource R26:8, R27:8, R28:8, R29:8, R30:8, R31:8
        CFI Resource ?RetHighByteMask:8, SP:16, SPH:8, SPL:8, Y:16
        CFI ResourceParts ?Ret ?RetHigh, ?RetLow, ?RetPad
        CFI ResourceParts SP SPH, SPL
        CFI ResourceParts Y R29, R28
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign 1
        CFI ReturnAddress ?Ret CODE
        CFI CFA_Y Y+0
        CFI CFA_SP SP+2
        CFI ?RetPad 0
        CFI ?RetHigh and(load(1, DATA, sub(CFA_SP, 1)), ?RetHighByteMask)
        CFI ?RetLow Frame(CFA_SP, 0)
        CFI ?Ret Concat
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 SameValue
        CFI R5 SameValue
        CFI R6 SameValue
        CFI R7 SameValue
        CFI R8 SameValue
        CFI R9 SameValue
        CFI R10 SameValue
        CFI R11 SameValue
        CFI R12 SameValue
        CFI R13 SameValue
        CFI R14 SameValue
        CFI R15 SameValue
        CFI R16 Undefined
        CFI R17 Undefined
        CFI R18 Undefined
        CFI R19 Undefined
        CFI R20 Undefined
        CFI R21 Undefined
        CFI R22 Undefined
        CFI R23 Undefined
        CFI R24 SameValue
        CFI R25 SameValue
        CFI R26 SameValue
        CFI R27 SameValue
        CFI R28 Undefined
        CFI R29 Undefined
        CFI R30 Undefined
        CFI R31 Undefined
        CFI ?RetHighByteMask SameValue
        CFI SPH Undefined
        CFI SPL Undefined
        CFI EndCommon cfiCommon0
        
        
        CFI Common cfiCommon1 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign 1
        CFI ReturnAddress ?Ret CODE
        CFI CFA_Y Y+4
        CFI CFA_SP SP+2
        CFI ?RetPad 0
        CFI ?RetHigh and(load(1, DATA, sub(CFA_SP, 1)), ?RetHighByteMask)
        CFI ?RetLow Frame(CFA_SP, 0)
        CFI ?Ret Concat
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 SameValue
        CFI R5 SameValue
        CFI R6 SameValue
        CFI R7 SameValue
        CFI R8 SameValue
        CFI R9 SameValue
        CFI R10 SameValue
        CFI R11 SameValue
        CFI R12 SameValue
        CFI R13 SameValue
        CFI R14 SameValue
        CFI R15 SameValue
        CFI R16 Undefined
        CFI R17 Undefined
        CFI R18 Undefined
        CFI R19 Undefined
        CFI R20 Undefined
        CFI R21 Undefined
        CFI R22 Undefined
        CFI R23 Undefined
        CFI R24 SameValue
        CFI R25 SameValue
        CFI R26 SameValue
        CFI R27 SameValue
        CFI R28 Undefined
        CFI R29 Undefined
        CFI R30 Undefined
        CFI R31 Undefined
        CFI ?RetHighByteMask SameValue
        CFI SPH Undefined
        CFI SPL Undefined
        CFI EndCommon cfiCommon1
        
        EXTERN buzzer_ms
        FUNCTION buzzer_ms,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN CharToStr
        FUNCTION CharToStr,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN send_frame_pp_broad
        FUNCTION send_frame_pp_broad,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN strncpy
        FUNCTION strncpy,010202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN org_ext_broad
        FUNCTION org_ext_broad,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN send_frame_pp_ext_broad
        FUNCTION send_frame_pp_ext_broad,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN delay_ms
        FUNCTION delay_ms,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN read_adc10bit
        FUNCTION read_adc10bit,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN PIR_detect
        FUNCTION PIR_detect,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN us_detection
        FUNCTION us_detection,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN delay_us
        FUNCTION delay_us,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN send_frame_pp_ext
        FUNCTION send_frame_pp_ext,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN get_key
        FUNCTION get_key,0200H
        ARGFRAME RSTACK, 0, STACK
        EXTERN send_group_pnl_frame
        FUNCTION send_group_pnl_frame,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN system_reset
        FUNCTION system_reset,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN StrToChar
        FUNCTION StrToChar,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN reception_buffer_clear
        FUNCTION reception_buffer_clear,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN put_s
        FUNCTION put_s,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN is_gateway_busy
        FUNCTION is_gateway_busy,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN KO_parameter_initial_temp
        FUNCTION KO_parameter_initial_temp,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN diagnostic_frame
        FUNCTION diagnostic_frame,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN function_service
        FUNCTION function_service,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN ir_pnl
        FUNCTION ir_pnl,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN KO_parameter_initial
        FUNCTION KO_parameter_initial,0202H
        ARGFRAME RSTACK, 0, STACK
        EXTERN Configurators
        EXTERN DLL
        EXTERN KO
        EXTERN KO_conf
        EXTERN M2_type
        EXTERN SCS_received
        EXTERN Sensor_mode
        EXTERN Time_delay
        EXTERN US_detection_en
        EXTERN ee_KO
        EXTERN ee_KO_conf
        EXTERN ee_KO_last
        EXTERN ee_back_light_duty
        EXTERN ee_configurators
        EXTERN ee_factory_variable
        EXTERN ee_flags
        EXTERN ee_main_state
        EXTERN ee_product_information
        EXTERN ee_scenario
        EXTERN ee_scenario_index
        EXTERN ee_slope
        EXTERN ee_variable
        EXTERN eep_M2_hour
        EXTERN eep_M2_min
        EXTERN eep_M2_sec
        EXTERN eep_M2_sens
        EXTERN eep_setpoint
        EXTERN flags
        EXTERN flash_KO
        EXTERN g_asc_reception_buffer
        EXTERN g_asc_short_buffer
        EXTERN g_ns_index
        EXTERN g_short_buffer
        EXTERN g_slope
        EXTERN key_result
        EXTERN product_information
        EXTERN scs_frame
        EXTERN set_point
        EXTERN state
        EXTERN temp_variable

// D:\avr\LM_Finial_Test\application.c
//    1 #include "global_variable.h"
//    2 #include "application.h"
//    3 #include "moudle_SCS.h"
//    4 #include <ioavr.h>

        ASEGN ABSOLUTE:DATA:NOROOT,0b6H
// <__C49> volatile __io _A_ASSR
_A_ASSR:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,0b3H
// <__C53> volatile __io _A_OCR2A
_A_OCR2A:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,0b1H
// <__C58> volatile __io _A_TCCR2B
_A_TCCR2B:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,0b0H
// <__C61> volatile __io _A_TCCR2A
_A_TCCR2A:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,06eH
// <__C117> volatile __io _A_TIMSK0
_A_TIMSK0:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,048H
// <__C183> volatile __io _A_OCR0B
_A_OCR0B:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,047H
// <__C185> volatile __io _A_OCR0A
_A_OCR0A:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,046H
// <__C187> volatile __io _A_TCNT0
_A_TCNT0:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,045H
// <__C190> volatile __io _A_TCCR0B
_A_TCCR0B:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,044H
// <__C193> volatile __io _A_TCCR0A
_A_TCCR0A:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,02bH
// <__C228> volatile __io _A_PORTD
_A_PORTD:
        DS8 1

        ASEGN ABSOLUTE:DATA:NOROOT,028H
// <__C237> volatile __io _A_PORTC
_A_PORTC:
        DS8 1
//    5 #include "board.h"
//    6 #include "PIR.h"
//    7 #include <string.h>
//    8 #include "decode_scs.h"
//    9 #include "IR.h"
//   10 #include "decode_scs_next.h"
//   11 #include "configuration.h"
//   12 #include "usart.h"
//   13 #include "function_service.h"
//   14 #include "iccext.h"
//   15 #include <math.h>
//   16 #include "DRI_LCD.h"
//   17 

        RSEG CODE:CODE:NOROOT(1)
//   18 void factory_calibration()
factory_calibration:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function factory_calibration
//   19 {
        FUNCALL factory_calibration, get_dl_level
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL factory_calibration, buzzer_ms
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL factory_calibration, get_dl_level
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL factory_calibration, buzzer_ms
        LOCFRAME CSTACK, 6, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE6_L09
        CFI R5 Frame(CFA_Y, -1)
        CFI R4 Frame(CFA_Y, -2)
        CFI R27 Frame(CFA_Y, -3)
        CFI R26 Frame(CFA_Y, -4)
        CFI R25 Frame(CFA_Y, -5)
        CFI R24 Frame(CFA_Y, -6)
        CFI CFA_Y Y+6
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
//   20 	unsigned int temp1;
//   21 	unsigned int temp2;
//   22 
//   23 	if(state.main_state == FACTORY_CALIBRATION)
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 68
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??factory_calibration_0
//   24 	{
//   25 		get_dl_level();
        RCALL   get_dl_level
//   26 		if(g_asc_reception_buffer[3] == 0x42 && g_asc_reception_buffer[4] == 0x10)
        LDI     R30, LOW(g_asc_reception_buffer)
        LDI     R31, (g_asc_reception_buffer) >> 8
        LDD     R16, Z+3
        CPI     R16, 66
        BREQ    $+2+2
        RJMP    ??factory_calibration_1
        LDD     R16, Z+4
        CPI     R16, 16
        BREQ    $+2+2
        RJMP    ??factory_calibration_1
//   27 		{
//   28 			ee_factory_variable.adc_1 = DLL.day_level;
        LDI     R16, LOW(ee_factory_variable)
        MOV     R2, R16
        LDI     R16, (ee_factory_variable) >> 8
        MOV     R3, R16
        LDS     R16, (DLL + 6)
        LDS     R17, (DLL + 7)
        MOVW    R21:R20, R3:R2
        CALL    __eeput16_16
//   29 			ee_factory_variable.lux_1 = g_asc_reception_buffer[6];
        LDD     R16, Z+6
        LDI     R17, 0
        LDI     R20, ((ee_factory_variable + 4) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 4) >> 8) & 0xff) & 0xFF
        CALL    __eeput16_16
//   30 			ee_factory_variable.lux_1 = ee_factory_variable.lux_1 << 8;
        MOV     R17, R16
        LDI     R16, 0
        LDI     R20, ((ee_factory_variable + 4) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 4) >> 8) & 0xff) & 0xFF
        CALL    __eeput16_16
//   31 			ee_factory_variable.lux_1 += g_asc_reception_buffer[7];
        LDD     R18, Z+7
        ADD     R16, R18
        LDI     R18, 4
        ADD     R2, R18
        LDI     R18, 0
        ADC     R3, R18
        MOVW    R21:R20, R3:R2
        CALL    __eeput16_16
//   32 			state.main_state = FACTORY_CALIBRATION_STEP1;
        LDI     R16, 69
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
//   33 			ee_main_state = FACTORY_CALIBRATION_STEP1;
        LDI     R20, LOW(ee_main_state)
        LDI     R21, (ee_main_state) >> 8
        RJMP    ??factory_calibration_2
//   34 			buzzer_ms(500);
//   35 		}
//   36 	}
//   37 	else if(state.main_state == FACTORY_CALIBRATION_STEP1)
??factory_calibration_0:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 69
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??factory_calibration_1
//   38 	{
//   39 		get_dl_level();
        RCALL   get_dl_level
//   40 		if(g_asc_reception_buffer[3] == 0x42 && g_asc_reception_buffer[4] == 0x10)
        LDI     R30, LOW(g_asc_reception_buffer)
        LDI     R31, (g_asc_reception_buffer) >> 8
        LDD     R16, Z+3
        CPI     R16, 66
        BREQ    $+2+2
        RJMP    ??factory_calibration_1
        LDD     R16, Z+4
        CPI     R16, 16
        BREQ    $+2+2
        RJMP    ??factory_calibration_1
//   41 		{
//   42 			ee_factory_variable.adc_2 = DLL.day_level;
        LDS     R4, (DLL + 6)
        LDS     R5, (DLL + 7)
        LDI     R20, ((ee_factory_variable + 2) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 2) >> 8) & 0xff) & 0xFF
        MOVW    R17:R16, R5:R4
        CALL    __eeput16_16
//   43 			ee_factory_variable.lux_2 = g_asc_reception_buffer[6];
        LDD     R22, Z+6
        LDI     R23, 0
        LDI     R20, ((ee_factory_variable + 6) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 6) >> 8) & 0xff) & 0xFF
        MOVW    R17:R16, R23:R22
        CALL    __eeput16_16
//   44 			ee_factory_variable.lux_2 = ee_factory_variable.lux_2 << 8;
        MOV     R23, R22
        LDI     R22, 0
        LDI     R20, ((ee_factory_variable + 6) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 6) >> 8) & 0xff) & 0xFF
        MOVW    R17:R16, R23:R22
        CALL    __eeput16_16
//   45 			ee_factory_variable.lux_2 += g_asc_reception_buffer[7];
        LDD     R16, Z+7
        ADD     R22, R16
        LDI     R20, ((ee_factory_variable + 6) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 6) >> 8) & 0xff) & 0xFF
        CALL    __eeput16_16
//   46 			temp2 =  ee_factory_variable.lux_2 - ee_factory_variable.lux_1;
//   47 			temp1 =  ee_factory_variable.adc_2 - ee_factory_variable.adc_1;
//   48 			g_slope = (double)temp2 / (double)temp1 ;
        LDI     R20, ((ee_factory_variable + 4) & 0xff) & 0xFF
        LDI     R21, (((ee_factory_variable + 4) >> 8) & 0xff) & 0xFF
        CALL    __eeget16_16
        SUB     R22, R16
        SBC     R23, R17
        MOVW    R17:R16, R23:R22
        LDI     R18, 0
        LDI     R19, 0
        CALL    ?UL2F_L04
        MOVW    R25:R24, R17:R16
        MOVW    R27:R26, R19:R18
        LDI     R20, LOW(ee_factory_variable)
        LDI     R21, (ee_factory_variable) >> 8
        CALL    __eeget16_16
        SUB     R4, R16
        SBC     R5, R17
        MOVW    R17:R16, R5:R4
        LDI     R18, 0
        LDI     R19, 0
        CALL    ?UL2F_L04
        MOVW    R21:R20, R17:R16
        MOVW    R23:R22, R19:R18
        MOVW    R17:R16, R25:R24
        MOVW    R19:R18, R27:R26
        CALL    ?F_DIV_L04
        LDI     R30, LOW(g_slope)
        LDI     R31, (g_slope) >> 8
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
//   49 			//g_slope = (short)((ee_factory_variable.lux_2 - ee_factory_variable.lux_1)/(ee_factory_variable.adc_2 - ee_factory_variable.adc_1));
//   50 			ee_slope = g_slope;
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        LDI     R20, LOW(ee_slope)
        LDI     R21, (ee_slope) >> 8
        CALL    __eeput32_16
//   51 			ee_product_information.factory_calibrated = 1;
        LDI     R20, LOW((ee_product_information + 5))
        LDI     R21, HIGH((ee_product_information + 5))
        CALL    __eeget16_16
        ORI     R16, 0x02
        LDI     R20, LOW((ee_product_information + 5))
        LDI     R21, HIGH((ee_product_information + 5))
??factory_calibration_2:
        CALL    __eeput16_16
//   52 			buzzer_ms(500);
        LDI     R16, 244
        LDI     R17, 1
        CALL    buzzer_ms
//   53 		}
//   54 	}
//   55 }
??factory_calibration_1:
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09
        CFI EndBlock cfiBlock0
//   56 
//   57 //used in the light calibration(now have been discard)
//   58 // D5 00 EE x3 10 0x 22 22		low
//   59 // D5 00 EE x3 10 0x 33 33 		medium
//   60 // D5 00 EE x3 10 0x 44 44		high
//   61 
//   62 // Enter calibration waiting mode	D1 01 01 42 14 00 00 00
//   63 // Exit calibration waiting mode	D1 01 01 42 14 00 00 FF
//   64 // Sent calibration lux						D1 01 01 42 10 0X XX XX
//   65 
//   66 //******************************************************************************
//   67 // send the frame ON, OFF, Pre, and NO_PRE
//   68 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//   69 void Mode_frame_GR(char GG, char type)
Mode_frame_GR:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function Mode_frame_GR
//   70 {
        FUNCALL Mode_frame_GR, CharToStr
        LOCFRAME CSTACK, 11, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Mode_frame_GR, CharToStr
        LOCFRAME CSTACK, 11, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Mode_frame_GR, send_frame_pp_broad
        LOCFRAME CSTACK, 11, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R24
        CFI R24 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        SBIW    R29:R28, 10
        CFI CFA_Y Y+11
        MOV     R24, R17
        LDS     R17, (KO_conf + 1)
        CPI     R17, 2
        BRNE    ??Mode_frame_GR_0
//   71 	// B5 GG  12 00 "ON"							// Mode_frame_GR(KO_conf.GR,ON);
//   72 	// B5 GG  12 01 "OFF"							// Mode_frame_GR(KO_conf.GR,OFF);
//   73 	// B5 GG  1D 00 "presence"				// Mode_frame_GR(KO_conf.GR,pre);
//   74 	// B5 GG  1D 01 "no presence"			// Mode_frame_GR(KO_conf.GR,nopre);
//   75   // B8 APL 1D 00 "presence for modality"
//   76 	
//   77 	unsigned char TX_buffer[8];
//   78 	unsigned char buffer[2];
//   79 	
//   80 	if(KO_conf.AddressType == GROUP)		// GR
//   81 	{
//   82     CharToStr(GG ,buffer);
        MOVW    R19:R18, R29:R28
        CALL    CharToStr
//   83 		TX_buffer[2] = buffer[0];
        LD      R16, Y
        STD     Y+4, R16
//   84 		TX_buffer[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+5, R16
//   85 
//   86 		switch(type)
        MOV     R16, R24
        SUBI    R16, 1
        BREQ    ??Mode_frame_GR_1
        DEC     R16
        BREQ    ??Mode_frame_GR_2
        DEC     R16
        BREQ    ??Mode_frame_GR_3
        DEC     R16
        BREQ    ??Mode_frame_GR_4
        DEC     R16
        BREQ    ??Mode_frame_GR_3
        DEC     R16
        BRNE    ??Mode_frame_GR_5
//   87 		{
//   88 			case pre:
//   89 			case Gs1:
//   90 			case Gs2:
//   91 					TX_buffer[5] = 'D';
??Mode_frame_GR_3:
        LDI     R16, 68
        STD     Y+7, R16
//   92 					TX_buffer[7] = '0';
        LDI     R16, 48
        RJMP    ??Mode_frame_GR_6
//   93 			break;
//   94 			case ON:
//   95 					TX_buffer[5] = '2';
??Mode_frame_GR_1:
        LDI     R16, 50
        STD     Y+7, R16
//   96 					TX_buffer[7] = '0';
        LDI     R16, 48
        STD     Y+9, R16
//   97 					Sensor_mode.power_on_flag = 1;		// ON FRAME
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        ORI     R16, 0x20
        STD     Z+7, R16
        RJMP    ??Mode_frame_GR_5
//   98 					//KO_conf.status[1] = Status_ON;		//reyno 0616
//   99 					//DLL.lightness_load = T_5min5s;		// start timer 5min5s, start to calibrate the load provision
//  100 					//DLL.calc_OK_flag = 0; //reyno 0616
//  101 			 break;
//  102 			case OFF:
//  103 					TX_buffer[5] = '2';
??Mode_frame_GR_2:
        LDI     R16, 50
        STD     Y+7, R16
//  104 					TX_buffer[7] = '1';
        LDI     R16, 49
        STD     Y+9, R16
//  105 					Sensor_mode.power_on_flag = 0;		// OFF FRAME
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        ANDI    R16, 0xDF
        STD     Z+7, R16
//  106 					KO_conf.status[1] = Status_OFF;		//reyno 0616
        LDI     R16, 0
        STS     (KO_conf + 46), R16
        RJMP    ??Mode_frame_GR_5
//  107 			break;
//  108 			case nopre:
//  109 					TX_buffer[5] = 'D';
??Mode_frame_GR_4:
        LDI     R16, 68
        STD     Y+7, R16
//  110 					TX_buffer[7] = '1';
        LDI     R16, 49
??Mode_frame_GR_6:
        STD     Y+9, R16
//  111 				break;
//  112 			default: break;
//  113 		}
//  114 	
//  115 		TX_buffer[0] = 'B';
??Mode_frame_GR_5:
        LDI     R16, 66
        STD     Y+2, R16
//  116 		TX_buffer[1] = '5';
        LDI     R16, 53
        STD     Y+3, R16
//  117 		TX_buffer[4] = '1';
        LDI     R16, 49
        STD     Y+6, R16
//  118 		TX_buffer[6] = '0';
        LDI     R16, 48
        STD     Y+8, R16
        RJMP    ??Mode_frame_GR_7
//  119 	}
//  120 	else if(KO_conf.AddressType == PP && type==pre)	//P2P
??Mode_frame_GR_0:
        LDS     R16, (KO_conf + 1)
        TST     R16
        BRNE    ??Mode_frame_GR_7
        CPI     R24, 3
        BRNE    ??Mode_frame_GR_7
//  121 	{
//  122 			// B8 APL 1D 00
//  123 		TX_buffer[0] = 'B';
        LDI     R16, 66
        STD     Y+2, R16
//  124 		TX_buffer[1] = '8';
        LDI     R16, 56
        STD     Y+3, R16
//  125     //TX_buffer[2] = Configurators.A;
//  126     //TX_buffer[3] = Configurators.PL;
//  127 		CharToStr(KO_conf.DesAdd,buffer);  //reyno 0619
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 2)
        CALL    CharToStr
//  128 		TX_buffer[2] = buffer[0];
        LD      R16, Y
        STD     Y+4, R16
//  129 		TX_buffer[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+5, R16
//  130 		TX_buffer[4] = '1';
        LDI     R16, 49
        STD     Y+6, R16
//  131 		TX_buffer[5] = 'D';
        LDI     R16, 68
        STD     Y+7, R16
//  132 		TX_buffer[6] = '0';
        LDI     R16, 48
        STD     Y+8, R16
//  133 		TX_buffer[7] = '0';
        STD     Y+9, R16
//  134 	}
//  135 	
//  136 	send_frame_pp_broad(TX_buffer, TRANS_DELAY);
??Mode_frame_GR_7:
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 254
        SBCI    R17, 255
        CALL    send_frame_pp_broad
//  137 	
//  138 	if(type == OFF)		// frame "OFF"
        CPI     R24, 2
        BRNE    ??Mode_frame_GR_8
//  139 	{
//  140 			Time_delay.detect_waitting = OFF_delay_2s;
        LDI     R16, 208
        LDI     R17, 7
        STS     (Time_delay + 11), R16
        STS     (Time_delay + 12), R17
//  141 	}
//  142 	if(type == pre)
??Mode_frame_GR_8:
        CPI     R24, 3
        BRNE    ??Mode_frame_GR_9
//  143 	{
//  144 		Sensor_mode.presence_send =1;
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+5
        ORI     R16, 0x04
        STD     Z+5, R16
//  145 	}
//  146 	
//  147 }
??Mode_frame_GR_9:
        ADIW    R29:R28, 10
        CFI CFA_Y Y+1
        LD      R24, Y+
        CFI R24 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock1
//  148 
//  149 
//  150 //******************************************************************************
//  151 // 			send the frame P2P
//  152 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  153 void dimmer_command(unsigned char arg,unsigned char level_value)
dimmer_command:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function dimmer_command
//  154 {
        FUNCALL dimmer_command, strncpy
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, CharToStr
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, CharToStr
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, org_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, org_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, org_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, org_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, CharToStr
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL dimmer_command, org_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R25
        CFI R25 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        ST      -Y, R24
        CFI R24 Frame(CFA_Y, -2)
        CFI CFA_Y Y+2
        SBIW    R29:R28, 20
        CFI CFA_Y Y+22
        MOV     R25, R16
        MOV     R24, R17
//  155 	// D1 A|Pl 0|1 4|2 0|D 0|0 0|0 0|0 	"ON"					// Mode_frame_P2P('1','2','0','0','0','0','0');
//  156 	// D1 A|Pl 0|1 4|2 0|D 0|1 0|0 0|0 	"OFF"					// Mode_frame_P2P('1','2','1','0','0','0','0');
//  157 	// D1 A|Pl 0|1 4|2 0|D 0|3 0|2 F|F 	"DIM +"				// Mode_frame_P2P('1','2','3','0','2','F','F');		step == 2	speed==default
//  158 	// D1 A|Pl 0|1 4|2 0|D 0|4 0|1 F|F	"DIM -"				// Mode_frame_P2P('1','2','4','0','1','F','F');		step == 1	speed==default
//  159   // D1 A|Pl 0|1 4|2 0|D 0|D X|X F|F	"LEVEL"				// Mode_frame_P2P('1','2','D','X','X','F','F');
//  160 	unsigned char buffer_tx[17];
//  161 	unsigned char buffer[3];
//  162 	strncpy(buffer_tx,"D10001420D000000",17);
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW(`?<Constant "D10001420D000000">`)
        LDI     R19, (`?<Constant "D10001420D000000">`) >> 8
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
        LDS     R16, (KO_conf + 1)
        CPI     R16, 2
        MOVW    R19:R18, R29:R28
        BRNE    ??dimmer_command_0
//  163 	
//  164 	if(KO_conf.AddressType == GROUP)
//  165 	{	
//  166 		CharToStr(KO_conf.Reference,buffer);
        LDS     R16, (KO_conf + 5)
        RJMP    ??dimmer_command_1
//  167 		buffer_tx[2] = buffer[0];
//  168 		buffer_tx[3] = buffer[1];
//  169 	}
//  170 	else
//  171 	{
//  172 		CharToStr(KO_conf.DesAdd,buffer);
??dimmer_command_0:
        LDS     R16, (KO_conf + 2)
??dimmer_command_1:
        CALL    CharToStr
//  173 		buffer_tx[2] = buffer[0];
        LD      R16, Y
        STD     Y+5, R16
//  174 		buffer_tx[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+6, R16
//  175 	}
//  176 	
//  177 	switch(arg)
        SUBI    R25, 1
        BREQ    ??dimmer_command_2
        DEC     R25
        BREQ    ??dimmer_command_3
        SUBI    R25, 8
        BREQ    ??dimmer_command_4
        DEC     R25
        BREQ    ??dimmer_command_5
        DEC     R25
        BREQ    ??dimmer_command_6
        RJMP    ??dimmer_command_7
//  178 	{
//  179 		case ON:
//  180 			Sensor_mode.power_on_flag = 1;		    // ON FRAME
??dimmer_command_2:
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        ORI     R16, 0x20
        STD     Z+7, R16
//  181 			SCS_received.update_on_wait++;
        LDS     R16, (SCS_received + 1)
        MOV     R17, R16
        ANDI    R17, 0xF3
        SUBI    R16, 252
        ANDI    R16, 0x0C
??dimmer_command_8:
        OR      R17, R16
        STS     (SCS_received + 1), R17
//  182 			org_ext_broad(buffer_tx,TRANS_DELAY);
        RJMP    ??dimmer_command_9
//  183 		break;
//  184 		
//  185 		case OFF:
//  186 			buffer_tx[11] = '1';
??dimmer_command_3:
        LDI     R16, 49
        STD     Y+14, R16
//  187 			Sensor_mode.power_on_flag = 0;						// OFF FRAME
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        ANDI    R16, 0xDF
        STD     Z+7, R16
//  188 			KO_conf.status[1] = Status_OFF;
        LDI     R16, 0
        STS     (KO_conf + 46), R16
//  189 			SCS_received.update_off_wait++;
        LDS     R16, (SCS_received + 1)
        MOV     R17, R16
        ANDI    R17, 0xCF
        SUBI    R16, 240
        ANDI    R16, 0x30
        RJMP    ??dimmer_command_8
//  190 			org_ext_broad(buffer_tx,TRANS_DELAY);
//  191 		break;
//  192 		
//  193 		case DIM_UP:
//  194 			buffer_tx[11] = '3';
??dimmer_command_4:
        LDI     R16, 51
        STD     Y+14, R16
//  195 			buffer_tx[13] = '2';
        LDI     R16, 50
        RJMP    ??dimmer_command_10
//  196 			buffer_tx[14] = 'F';
//  197 			buffer_tx[15] = 'F';
//  198 			org_ext_broad(buffer_tx,TRANS_DELAY);
//  199 		break;
//  200 		
//  201 		case DIM_DOWN:
//  202 			buffer_tx[11] = '4';
??dimmer_command_5:
        LDI     R16, 52
        STD     Y+14, R16
//  203 			buffer_tx[13] = '1';
        LDI     R16, 49
        RJMP    ??dimmer_command_10
//  204 			buffer_tx[14] = 'F';
//  205 			buffer_tx[15] = 'F';
//  206 			org_ext_broad(buffer_tx,TRANS_DELAY);
//  207 		break;
//  208 		
//  209 		case LEVEL:
//  210 			buffer_tx[11] = 'D';
??dimmer_command_6:
        LDI     R16, 68
        STD     Y+14, R16
//  211 			CharToStr(level_value,buffer);
        MOVW    R19:R18, R29:R28
        MOV     R16, R24
        CALL    CharToStr
//  212 			buffer_tx[12] = buffer[0];
        LD      R16, Y
        STD     Y+15, R16
//  213 			buffer_tx[13] = buffer[1];
        LDD     R16, Y+1
??dimmer_command_10:
        STD     Y+16, R16
//  214 			buffer_tx[14] = 'F';
        LDI     R16, 70
        STD     Y+17, R16
//  215 			buffer_tx[15] = 'F';
        STD     Y+18, R16
//  216 			org_ext_broad(buffer_tx,TRANS_DELAY);
??dimmer_command_9:
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    org_ext_broad
//  217 		break;
//  218 		
//  219 		default:break;
//  220 	}
//  221 }
??dimmer_command_7:
        ADIW    R29:R28, 20
        CFI CFA_Y Y+2
        LD      R24, Y+
        CFI R24 SameValue
        CFI CFA_Y Y+1
        LD      R25, Y+
        CFI R25 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock2
//  222 

        RSEG CODE:CODE:NOROOT(1)
//  223 void Mode_frame_P2P(char type,char cmd,char func0, char func1,char func2 ,char func3,char func4)	//Frame for referent:
Mode_frame_P2P:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function Mode_frame_P2P
//  224 {
        FUNCALL Mode_frame_P2P, CharToStr
        LOCFRAME CSTACK, 25, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Mode_frame_P2P, CharToStr
        LOCFRAME CSTACK, 25, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Mode_frame_P2P, CharToStr
        LOCFRAME CSTACK, 25, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Mode_frame_P2P, org_ext_broad
        LOCFRAME CSTACK, 25, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE7_L09
        CFI R6 Frame(CFA_Y, -1)
        CFI R5 Frame(CFA_Y, -2)
        CFI R4 Frame(CFA_Y, -3)
        CFI R27 Frame(CFA_Y, -4)
        CFI R26 Frame(CFA_Y, -5)
        CFI R25 Frame(CFA_Y, -6)
        CFI R24 Frame(CFA_Y, -7)
        CFI CFA_Y Y+7
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        SBIW    R29:R28, 18
        CFI CFA_Y Y+25
        MOV     R24, R16
        MOV     R25, R17
        MOV     R26, R18
        MOV     R27, R19
        MOV     R4, R20
        MOV     R5, R21
        MOV     R6, R22
//  225 	// D1 A|Pl 0|1 4|2 0|D 0|0 0|0 0|0 	"ON"					// Mode_frame_P2P('1','2','0','0','0','0','0');
//  226 	// D1 A|Pl 0|1 4|2 0|D 0|1 0|0 0|0 	"OFF"					// Mode_frame_P2P('1','2','1','0','0','0','0');
//  227 	// D1 A|Pl 0|1 4|2 0|D 0|3 0|2 F|F 	"DIM +"				// Mode_frame_P2P('1','2','3','0','2','F','F');		step == 2	speed==default
//  228 	// D1 A|Pl 0|1 4|2 0|D 0|4 0|1 F|F	"DIM -"				// Mode_frame_P2P('1','2','4','0','1','F','F');		step == 1	speed==default
//  229   // D1 A|Pl 0|1 4|2 0|D 0|D X|X F|F	"LEVEL"				// Mode_frame_P2P('1','2','D','X','X','F','F');
//  230 
//  231 	unsigned char TX_buffer[16];
//  232 	unsigned char buffer[2];
//  233 
//  234 	if(func0 == '0') 	
        CPI     R26, 48
        BRNE    ??Mode_frame_P2P_0
//  235 	{
//  236 			Sensor_mode.power_on_flag = 1;		    // ON FRAME
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        ORI     R16, 0x20
        STD     Z+7, R16
//  237 			//KO_conf.status[1] = Status_ON;		//reyno 0616
//  238 			SCS_received.update_on_wait++;
        LDS     R16, (SCS_received + 1)
        MOV     R17, R16
        ANDI    R17, 0xF3
        SUBI    R16, 252
        ANDI    R16, 0x0C
        RJMP    ??Mode_frame_P2P_1
//  239 			//DLL.lightness_load = T_5min5s;				// start timer 5min5s, start to calibrate the load provision
//  240 			//DLL.calc_OK_flag = 0; //reyno 0616
//  241 	}
//  242 	else if(func0 == '1')
??Mode_frame_P2P_0:
        CPI     R26, 49
        BRNE    ??Mode_frame_P2P_2
//  243 	{
//  244 		Sensor_mode.power_on_flag = 0;						// OFF FRAME
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        ANDI    R16, 0xDF
        STD     Z+7, R16
//  245 		KO_conf.status[1] = Status_OFF;		//reyno 0616
        LDI     R16, 0
        STS     (KO_conf + 46), R16
//  246 		SCS_received.update_off_wait++;
        LDS     R16, (SCS_received + 1)
        MOV     R17, R16
        ANDI    R17, 0xCF
        SUBI    R16, 240
        ANDI    R16, 0x30
??Mode_frame_P2P_1:
        OR      R17, R16
        STS     (SCS_received + 1), R17
//  247 	}
//  248 
//  249 	if((product_information.conf_type == 1)||(product_information.conf_type == 2))     						// configurate in advanced or Basic virtual
??Mode_frame_P2P_2:
        LDS     R16, product_information
        CPI     R16, 1
        BREQ    ??Mode_frame_P2P_3
        LDS     R16, product_information
        CPI     R16, 2
        BRNE    ??Mode_frame_P2P_4
??Mode_frame_P2P_3:
        LDS     R16, (KO_conf + 1)
        TST     R16
        BRNE    ??Mode_frame_P2P_5
        LDS     R16, (KO_conf + 2)
        TST     R16
        BREQ    ??Mode_frame_P2P_5
//  250 	{
//  251 		if((KO_conf.AddressType ==0)&&(KO_conf.DesAdd !=0 ))		CharToStr(KO_conf.DesAdd , buffer);		// P2P ON frame	
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 2)
        CALL    CharToStr
//  252 		if((KO_conf.AddressType ==2)&&(KO_conf.Reference !=0 ))	CharToStr(KO_conf.Reference, buffer);		// Parital ON frame		
??Mode_frame_P2P_5:
        LDS     R16, (KO_conf + 1)
        CPI     R16, 2
        BRNE    ??Mode_frame_P2P_6
        LDS     R16, (KO_conf + 5)
        TST     R16
        BREQ    ??Mode_frame_P2P_6
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 5)
        RJMP    ??Mode_frame_P2P_7
//  253 		TX_buffer[2] = buffer[0];
//  254 		TX_buffer[3] = buffer[1];
//  255 	}
//  256 	else if(product_information.conf_type == 0)     // configurate in Basic physical
??Mode_frame_P2P_4:
        LDS     R16, product_information
        TST     R16
        BRNE    ??Mode_frame_P2P_8
//  257 	{
//  258 		//TX_buffer[2] = Configurators.A;
//  259 		//TX_buffer[3] = Configurators.PL;
//  260 		CharToStr(KO_conf.DesAdd,buffer);  //reyno 0619
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 2)
??Mode_frame_P2P_7:
        CALL    CharToStr
//  261 		TX_buffer[2] = buffer[0];
??Mode_frame_P2P_6:
        LD      R16, Y
        STD     Y+4, R16
//  262 		TX_buffer[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+5, R16
//  263 	}
//  264 
//  265 	TX_buffer[0]  = 'D';
??Mode_frame_P2P_8:
        LDI     R16, 68
        STD     Y+2, R16
//  266 	TX_buffer[1]  = type;
        STD     Y+3, R24
//  267 	TX_buffer[4]  = '0';
        LDI     R16, 48
        STD     Y+6, R16
//  268 	TX_buffer[5]  = '1';
        LDI     R16, 49
        STD     Y+7, R16
//  269 	TX_buffer[6]  = '4';
        LDI     R16, 52
        STD     Y+8, R16
//  270 	TX_buffer[7]  = cmd;
        STD     Y+9, R25
//  271 	TX_buffer[8]  = '0';
        LDI     R16, 48
        STD     Y+10, R16
//  272 	TX_buffer[9]  = 'D';
        LDI     R16, 68
        STD     Y+11, R16
//  273 	TX_buffer[10] = '0';
        LDI     R16, 48
        STD     Y+12, R16
//  274 	TX_buffer[11] = func0;
        STD     Y+13, R26
//  275 	TX_buffer[12] = func1;
        STD     Y+14, R27
//  276 	TX_buffer[13] = func2;
        STD     Y+15, R4
//  277 	TX_buffer[14] = func3;
        STD     Y+16, R5
//  278 	TX_buffer[15] = func4;
        STD     Y+17, R6
//  279 	org_ext_broad(TX_buffer, TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 254
        SBCI    R17, 255
        CALL    org_ext_broad
//  280 }
        ADIW    R29:R28, 18
        CFI CFA_Y Y+7
        LDI     R30, 7
        JMP     ?EPILOGUE_B7_L09
        CFI EndBlock cfiBlock3
//  281 
//  282 //******************************************************************************
//  283 // 			used for the modality 2
//  284 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  285 void frame_M2_answer( unsigned char type)		// D5 GR 01 34 type xx xx xx
frame_M2_answer:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function frame_M2_answer
//  286 {
        FUNCALL frame_M2_answer, CharToStr
        LOCFRAME CSTACK, 24, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL frame_M2_answer, CharToStr
        LOCFRAME CSTACK, 24, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL frame_M2_answer, CharToStr
        LOCFRAME CSTACK, 24, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL frame_M2_answer, CharToStr
        LOCFRAME CSTACK, 24, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL frame_M2_answer, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 24, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE6_L09
        CFI R5 Frame(CFA_Y, -1)
        CFI R4 Frame(CFA_Y, -2)
        CFI R27 Frame(CFA_Y, -3)
        CFI R26 Frame(CFA_Y, -4)
        CFI R25 Frame(CFA_Y, -5)
        CFI R24 Frame(CFA_Y, -6)
        CFI CFA_Y Y+6
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        SBIW    R29:R28, 18
        CFI CFA_Y Y+24
        MOV     R24, R16
//  287     	
//  288   		unsigned char TX_buffer[16];
//  289 		unsigned char buffer[2];
//  290     	unsigned char value1;
//  291     	unsigned char value2;
//  292     	unsigned char value3;
//  293 
//  294 		TX_buffer[0]  = 'D';
        LDI     R16, 68
        STD     Y+2, R16
//  295 		TX_buffer[1]  = '5';
        LDI     R16, 53
        STD     Y+3, R16
//  296 		TX_buffer[4]  = '0';
        LDI     R16, 48
        STD     Y+6, R16
//  297 		TX_buffer[5]  = '1';
        LDI     R16, 49
        STD     Y+7, R16
//  298 		TX_buffer[6]  = '3';
        LDI     R16, 51
        STD     Y+8, R16
//  299 		TX_buffer[7]  = '4';
        LDI     R16, 52
        STD     Y+9, R16
//  300 		TX_buffer[8]  = '1';
        LDI     R16, 49
        STD     Y+10, R16
//  301 		TX_buffer[9]  = type;
        STD     Y+11, R24
//  302 		CharToStr(KO_conf.GR, buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
//  303 		TX_buffer[2] = buffer[0];
        LD      R16, Y
        STD     Y+4, R16
//  304 		TX_buffer[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+5, R16
//  305 
//  306         if(type == '0')     // M2_daylight level
        CPI     R24, 48
        BRNE    ??frame_M2_answer_0
//  307         {
//  308               value1 =  0;
        LDI     R25, 0
//  309               value2 =  (DLL.current_level&0xFF00)>>8;
        LDS     R26, (DLL + 16)
        LDS     R27, (DLL + 17)
        MOV     R26, R27
//  310               value3 =  DLL.current_level&0x00FF;
        LDS     R4, (DLL + 16)
        LDS     R5, (DLL + 17)
//  311 			  // the value should be == DLL.current_level*5
//  312         }
//  313         if(type == '5')     // Sensitivity
??frame_M2_answer_0:
        CPI     R24, 53
        BRNE    ??frame_M2_answer_1
//  314         {
//  315               value1 =  0;
        LDI     R25, 0
//  316               value2 =  0;
        LDI     R26, 0
//  317               value3 =  eep_M2_sens;
        LDI     R20, LOW(eep_M2_sens)
        LDI     R21, (eep_M2_sens) >> 8
        CALL    __eeget8_16
        MOV     R4, R16
//  318         }
//  319         if(type == '6')     // M2_timer
??frame_M2_answer_1:
        CPI     R24, 54
        BRNE    ??frame_M2_answer_2
//  320         {
//  321               value1 =  eep_M2_hour;
        LDI     R20, LOW(eep_M2_hour)
        LDI     R21, (eep_M2_hour) >> 8
        CALL    __eeget8_16
        MOV     R25, R16
//  322               value2 =  eep_M2_min;
        LDI     R20, LOW(eep_M2_min)
        LDI     R21, (eep_M2_min) >> 8
        CALL    __eeget8_16
        MOV     R26, R16
//  323               value3 =  eep_M2_sec;
        LDI     R20, LOW(eep_M2_sec)
        LDI     R21, (eep_M2_sec) >> 8
        CALL    __eeget8_16
        MOV     R4, R16
//  324         }
//  325 		
//  326 		/*
//  327         if((Configurators.A==0)&&(Configurators.PL==0))
//  328 	  	{
//  329     		CharToStr(KO_conf.DesAdd, buffer);
//  330 			TX_buffer[2] = buffer[0];
//  331 			TX_buffer[3] = buffer[1];
//  332 	  	}
//  333 	  	else
//  334 	  	{
//  335 	  		TX_buffer[2] = Configurators.A;		// sensor in modality 2, A and PL must be insert
//  336       		TX_buffer[3] = Configurators.PL;
//  337 	  	}  */
//  338 	
//  339       	CharToStr(value1, buffer);
??frame_M2_answer_2:
        MOVW    R19:R18, R29:R28
        MOV     R16, R25
        CALL    CharToStr
//  340 		TX_buffer[10] = buffer[0];
        LD      R16, Y
        STD     Y+12, R16
//  341 		TX_buffer[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+13, R16
//  342       	CharToStr(value2, buffer);
        MOVW    R19:R18, R29:R28
        MOV     R16, R26
        CALL    CharToStr
//  343 		TX_buffer[12] = buffer[0];
        LD      R16, Y
        STD     Y+14, R16
//  344 		TX_buffer[13] = buffer[1];
        LDD     R16, Y+1
        STD     Y+15, R16
//  345      		CharToStr(value3, buffer);
        MOVW    R19:R18, R29:R28
        MOV     R16, R4
        CALL    CharToStr
//  346 		TX_buffer[14] = buffer[0];
        LD      R16, Y
        STD     Y+16, R16
//  347 		TX_buffer[15] = buffer[1];
        LDD     R16, Y+1
        STD     Y+17, R16
//  348 
//  349 		send_frame_pp_ext_broad(TX_buffer, TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 254
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
//  350       	M2_type = 0;            			// modality
        LDI     R16, 0
        STS     M2_type, R16
//  351 
//  352 }
        ADIW    R29:R28, 18
        CFI CFA_Y Y+6
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09
        CFI EndBlock cfiBlock4
//  353 
//  354 //******************************************************************************
//  355 // 		read the daylight level in calibration waitting mode
//  356 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  357 void DLL_setpoint(unsigned char point)
DLL_setpoint:
        CFI Block cfiBlock5 Using cfiCommon0
        CFI Function DLL_setpoint
//  358 {
        FUNCALL DLL_setpoint, get_dl_level
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL DLL_setpoint, delay_ms
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL DLL_setpoint, daylight_set_init
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL DLL_setpoint, buzzer_ms
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE4_L09
        CFI R27 Frame(CFA_Y, -1)
        CFI R26 Frame(CFA_Y, -2)
        CFI R25 Frame(CFA_Y, -3)
        CFI R24 Frame(CFA_Y, -4)
        CFI CFA_Y Y+4
        MOV     R24, R16
//  359 
//  360   DLL.daylight_SampleCount = 0;		// the daylight level point should be gotten 10 points and averaged
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        LDI     R16, 0
        STS     (DLL + 1), R16
//  361 	
//  362   while(1)
//  363 	{
//  364 		get_dl_level();
??DLL_setpoint_0:
        RCALL   get_dl_level
//  365 		delay_ms(60);
        LDI     R16, 60
        LDI     R17, 0
        CALL    delay_ms
//  366 		if(DLL.getlevel_finish == 1)
        LDS     R16, DLL
        CPI     R16, 1
        BRNE    ??DLL_setpoint_0
//  367 		{	
//  368 					switch(point)
        MOV     R16, R24
        SUBI    R16, 1
        BREQ    ??DLL_setpoint_1
        DEC     R16
        BREQ    ??DLL_setpoint_2
        DEC     R16
        BREQ    ??DLL_setpoint_3
        RJMP    ??DLL_setpoint_4
//  369       		{
//  370          	 case  1://Low:
//  371                DLL.setpoint_L = DLL.day_level;
??DLL_setpoint_1:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+6
        LDD     R17, Z+7
        STD     Z+26, R16
        STD     Z+27, R17
        RJMP    ??DLL_setpoint_4
//  372                break;
//  373            case  2://Medium:
//  374                DLL.setpoint_M = DLL.day_level;
??DLL_setpoint_2:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+6
        LDD     R17, Z+7
        STD     Z+28, R16
        STD     Z+29, R17
        RJMP    ??DLL_setpoint_4
//  375                break;
//  376            case  3://High:
//  377                DLL.setpoint_H = DLL.day_level;
??DLL_setpoint_3:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+6
        LDD     R17, Z+7
        STD     Z+24, R16
        STD     Z+25, R17
//  378                break;
//  379            default : break;
//  380          	}
//  381          	eep_setpoint[point] = DLL.day_level;
??DLL_setpoint_4:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+6
        LDD     R17, Z+7
        LDI     R18, 2
        MUL     R24, R18
        LDI     R20, LOW(eep_setpoint)
        LDI     R21, (eep_setpoint) >> 8
        ADD     R20, R0
        ADC     R21, R1
        CALL    __eeput16_16
//  382          	daylight_set_init();        	
        RCALL   daylight_set_init
//  383 					break;
//  384 		}
//  385 	}
//  386         buzzer_ms(500);	
        LDI     R16, 244
        LDI     R17, 1
        CALL    buzzer_ms
//  387         //  DLL.minstep = factor_divcalc(2000,(DLL.setpoint_H - DLL.setpoint_L));	
//  388 }
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09
        CFI EndBlock cfiBlock5
//  389 
//  390 
//  391 //******************************************************************************
//  392 //		result = x/y		Value xx.xx (00.01 ~ FF.FF)
//  393 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  394 unsigned int factor_divcalc(unsigned int x,unsigned int y)		//result = x/y
factor_divcalc:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function factor_divcalc
//  395 {
        CALL    ?PROLOGUE8_L09
        CFI R7 Frame(CFA_Y, -1)
        CFI R6 Frame(CFA_Y, -2)
        CFI R5 Frame(CFA_Y, -3)
        CFI R4 Frame(CFA_Y, -4)
        CFI R27 Frame(CFA_Y, -5)
        CFI R26 Frame(CFA_Y, -6)
        CFI R25 Frame(CFA_Y, -7)
        CFI R24 Frame(CFA_Y, -8)
        CFI CFA_Y Y+8
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        MOVW    R25:R24, R17:R16
        MOVW    R7:R6, R19:R18
//  396 	volatile static unsigned int result;
//  397 	volatile static unsigned int remainder;
//  398 	volatile static unsigned int Dec,Hex;
//  399 	
//  400 	Dec = 0;
        LDI     R26, LOW(??result)
        LDI     R27, (??result) >> 8
        LDI     R17, 0
        MOVW    R31:R30, R27:R26
        STD     Z+4, R17
        STD     Z+5, R17
//  401 	Hex = 0;
        STD     Z+6, R17
        STD     Z+7, R17
//  402 	result = 0;
        ST      X+, R17
        ST      X, R17
        SBIW    R27:R26, 1
//  403 	remainder = 0;
        STD     Z+2, R17
        STD     Z+3, R17
//  404 	if(x > y)		
        CP      R6, R24
        CPC     R7, R25
        BRCS    $+2+2
        RJMP    ??factor_divcalc_0
//  405 	{
//  406     result = x/y;
        MOVW    R21:R20, R7:R6
        MOVW    R17:R16, R25:R24
        CALL    ?US_DIVMOD_L02
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 1
//  407 		result = result<<8;
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 1
        MOV     R17, R16
        LDI     R16, 0
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 1
//  408 		remainder = x%y;
        MOVW    R31:R30, R27:R26
        STD     Z+2, R0
        STD     Z+3, R1
//  409 		result += ((remainder*10)/y)<<4;
        LDD     R20, Z+2
        LDD     R21, Z+3
        LDI     R16, 10
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R7:R6
        CALL    ?US_DIVMOD_L02
        LDI     R20, 4
        CALL    ?S_SHL_L02
        LD      R18, X+
        LD      R19, X
        ADD     R18, R16
        ADC     R19, R17
        ST      X, R19
        ST      -X, R18
//  410 		remainder = (remainder*10)%y;
        MOVW    R31:R30, R27:R26
        LDD     R20, Z+2
        LDD     R21, Z+3
        LDI     R16, 10
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R7:R6
        CALL    ?US_DIVMOD_L02
        MOVW    R31:R30, R27:R26
        STD     Z+2, R0
        STD     Z+3, R1
//  411 		result += (remainder*10)/y;
        LDD     R20, Z+2
        LDD     R21, Z+3
        LDI     R16, 10
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R7:R6
        CALL    ?US_DIVMOD_L02
        LD      R18, X+
        LD      R19, X
        ADD     R18, R16
        ADC     R19, R17
        ST      X, R19
        ST      -X, R18
        RJMP    ??factor_divcalc_1
//  412 	}
//  413 	else			
//  414 	{
//  415 		if(x*10>y)
??factor_divcalc_0:
        LDI     R16, 10
        MOVW    R21:R20, R25:R24
        CALL    ?S_EC_MUL_L02
        CP      R6, R16
        CPC     R7, R17
        BRCS    $+2+2
        RJMP    ??factor_divcalc_2
//  416 		{
//  417 			result = (x*10)/y;
        MOVW    R21:R20, R7:R6
        CALL    ?US_DIVMOD_L02
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 1
//  418 			result = result<<4;
        LDI     R20, 4
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 1
        CALL    ?S_SHL_L02
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 1
//  419 			remainder = (x*10)%y;
        MOVW    R31:R30, R27:R26
        STD     Z+2, R0
        STD     Z+3, R1
//  420 			result += (remainder*10)/y;															// result Hex
        LDD     R20, Z+2
        LDD     R21, Z+3
        LDI     R16, 10
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R21:R20, R7:R6
        CALL    ?US_DIVMOD_L02
        LD      R18, X+
        LD      R19, X
        ADD     R18, R16
        ADC     R19, R17
        ST      X, R19
        ST      -X, R18
//  421 			
//  422 			Dec = ((result & 0x00F0)>>4)*10 + (result & 0x000F);		// translate 16 to 10
        LD      R20, X+
        LD      R21, X
        SBIW    R27:R26, 1
        SWAP    R20
        ANDI    R20, 0x0F
        LDI     R21, 0
        LDI     R16, 10
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        LD      R18, X+
        LD      R19, X
        SBIW    R27:R26, 1
        ANDI    R18, 0x0F
        ADD     R16, R18
        ADC     R17, R21
        MOVW    R31:R30, R27:R26
        STD     Z+4, R16
        STD     Z+5, R17
//  423 			Hex = Dec/16;
        LDD     R16, Z+4
        LDD     R17, Z+5
        LDI     R20, 4
        CALL    ?US_SHR_L02
        STD     Z+6, R16
        STD     Z+7, R17
//  424 			remainder = (Dec%16)*5/8;																//remainder =(Dec%16)*10/16;
        LDD     R16, Z+4
        LDD     R17, Z+5
        ANDI    R16, 0x0F
        LDI     R17, 0
        LDI     R20, 5
        CALL    ?S_EC_MUL_L02
        LDI     R20, 3
        CALL    ?US_SHR_L02
        STD     Z+2, R16
        STD     Z+3, R17
//  425 			result = ((Hex<<4) & 0x00FF) + remainder;
        LDD     R16, Z+6
        LDD     R17, Z+7
        LDI     R20, 4
        CALL    ?S_SHL_L02
        LDI     R17, 0
        LDD     R18, Z+2
        LDD     R19, Z+3
        ADD     R16, R18
        ADC     R17, R19
        RJMP    ??factor_divcalc_3
//  426 		}
//  427 		else if(x*100>y)
??factor_divcalc_2:
        LDI     R20, 100
        LDI     R21, 0
        MOVW    R17:R16, R25:R24
        CALL    ?S_EC_MUL_L02
        CP      R6, R16
        CPC     R7, R17
        BRCC    ??factor_divcalc_1
//  428 		{
//  429 			result = (x*100)/y;
        MOVW    R21:R20, R7:R6
        CALL    ?US_DIVMOD_L02
??factor_divcalc_3:
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 1
//  430 		}
//  431 	}
//  432 	return result;
??factor_divcalc_1:
        LD      R16, X+
        LD      R17, X
        LDI     R30, 8
        JMP     ?EPILOGUE_B8_L09
        CFI EndBlock cfiBlock6
//  433 }

        RSEG NEAR_Z:DATA:NOROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??result:
        DS8 2
        DS8 2
        DS8 2
        DS8 2
//  434 
//  435 //******************************************************************************
//  436 //				result = x*y
//  437 //				result = x*y	yfactor,xx.xx,
//  438 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  439 unsigned int factor_mulcalc(unsigned int x,unsigned int y)				
factor_mulcalc:
        CFI Block cfiBlock7 Using cfiCommon0
        CFI Function factor_mulcalc
//  440 {
        CALL    ?PROLOGUE6_L09
        CFI R5 Frame(CFA_Y, -1)
        CFI R4 Frame(CFA_Y, -2)
        CFI R27 Frame(CFA_Y, -3)
        CFI R26 Frame(CFA_Y, -4)
        CFI R25 Frame(CFA_Y, -5)
        CFI R24 Frame(CFA_Y, -6)
        CFI CFA_Y Y+6
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        MOVW    R27:R26, R17:R16
        MOVW    R25:R24, R19:R18
//  441 	unsigned int result=0;
//  442 
//  443 	result = x*(y>>8) + x*((y&0x00F0)>>4)/10 + x*(y&0x000F)/100;
//  444 
//  445 	return result;
        MOVW    R21:R20, R25:R24
        MOV     R20, R21
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R5:R4, R17:R16
        MOV     R20, R24
        SWAP    R20
        ANDI    R20, 0x0F
        MOVW    R17:R16, R27:R26
        CALL    ?S_EC_MUL_L02
        LDI     R20, 10
        CALL    ?US_DIVMOD_L02
        ADD     R4, R16
        ADC     R5, R17
        ANDI    R24, 0x0F
        LDI     R25, 0
        MOVW    R21:R20, R27:R26
        MOVW    R17:R16, R25:R24
        CALL    ?S_EC_MUL_L02
        LDI     R20, 100
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        ADD     R4, R16
        ADC     R5, R17
        MOVW    R17:R16, R5:R4
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09
        CFI EndBlock cfiBlock7
//  446 }
//  447 
//  448 //******************************************************************************
//  449 //					Regulation for actuator
//  450 //		after both load provision and setpoint had been calibrated
//  451 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  452 void Actuator_regulation(void)
Actuator_regulation:
        CFI Block cfiBlock8 Using cfiCommon0
        CFI Function Actuator_regulation
//  453 {
        FUNCALL Actuator_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Actuator_regulation, regulation_timer_initial
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Actuator_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE4_L09
        CFI R27 Frame(CFA_Y, -1)
        CFI R26 Frame(CFA_Y, -2)
        CFI R25 Frame(CFA_Y, -3)
        CFI R24 Frame(CFA_Y, -4)
        CFI CFA_Y Y+4
//  454 	//if( DLL.calc_OK_flag == 1 && Time_delay.timer_delay_set.enabled ==1 && DLL.start_regulation == 1 )			
//  455 	if( DLL.start_regulation == 1 )
        LDI     R30, LOW(DLL)
        LDI     R31, (DLL) >> 8
        LDD     R16, Z+54
        SBRS    R16, 0
        RJMP    ??Actuator_regulation_0
//  456 	{
//  457 		if((DLL.current_level < set_point)&&(Sensor_mode.power_on_flag ==0))
        LDD     R16, Z+16
        LDD     R17, Z+17
        LDS     R18, set_point
        LDS     R19, (set_point + 1)
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??Actuator_regulation_1
        LDI     R26, LOW((Sensor_mode + 7))
        LDI     R27, HIGH((Sensor_mode + 7))
        LD      R16, X
        SBRC    R16, 5
        RJMP    ??Actuator_regulation_1
//  458 		{
//  459 			Time_delay.DLL_low_20s_enable = 1;
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ORI     R16, 0x40
        STD     Z+6, R16
//  460 			Time_delay.DLL_high_10min_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0x7F
        STD     Z+6, R16
//  461 			if(Time_delay.DLL_low_20s_count > Regulation_20s)
        LDD     R24, Z+17
        LDD     R25, Z+18
        CPI     R24, 21
        SBCI    R25, 0
        BRCC    $+2+2
        RJMP    ??Actuator_regulation_0
//  462 			{
//  463 				Time_delay.DLL_low_20s_count = 0;
        LDI     R17, 0
        STD     Z+17, R17
        STD     Z+18, R17
//  464 				Time_delay.DLL_low_20s_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0xBF
        STD     Z+6, R16
//  465 				//if(Configurators.M == '1')	
//  466 				//if(KO_conf.LightReg == 1)
//  467 					//frame_pp_on_off('0');           				// send frame ON
//  468 				//else					
//  469 				//Mode_frame_P2P('1','2','0','0','0','0','0');			// send P2P ON frame light on the load
//  470 				dimmer_command(ON,0);
        LDI     R16, 1
        RCALL   dimmer_command
//  471 				regulation_timer_initial();
        CALL    regulation_timer_initial
        RJMP    ??Actuator_regulation_0
//  472 			}
//  473 		}
//  474 		else if((DLL.current_level > DLL.setpoint_OFF)&&(Sensor_mode.power_on_flag ==1)&&(DLL.calc_OK_flag == 1))
??Actuator_regulation_1:
        LDD     R16, Z+20
        LDD     R17, Z+21
        LDD     R18, Z+16
        LDD     R19, Z+17
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??Actuator_regulation_2
        LDI     R26, LOW((Sensor_mode + 7))
        LDI     R27, HIGH((Sensor_mode + 7))
        LD      R16, X
        SBRS    R16, 5
        RJMP    ??Actuator_regulation_2
        LDD     R16, Z+23
        CPI     R16, 1
        BRNE    ??Actuator_regulation_2
//  475 		{
//  476 			Time_delay.DLL_high_10min_enable = 1;
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ORI     R16, 0x80
        STD     Z+6, R16
//  477 			Time_delay.DLL_low_20s_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0xBF
        STD     Z+6, R16
//  478 			if(Time_delay.DLL_high_10min_count > Regulation_10min)						// 10min may be too long 	
        LDD     R16, Z+19
        LDD     R17, Z+20
        LDD     R18, Z+21
        LDD     R19, Z+22
        CPI     R16, 89
        LDI     R20, 2
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCS    ??Actuator_regulation_0
//  479 			{
//  480 				Time_delay.DLL_high_10min_count = 0;
        LDI     R17, 0
        STD     Z+19, R17
        STD     Z+20, R17
        STD     Z+21, R17
        STD     Z+22, R17
//  481 				Time_delay.DLL_high_10min_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0x7F
        STD     Z+6, R16
//  482 				//if(Configurators.M == '1')	
//  483 				//	frame_pp_on_off('1');           				// send frame Off
//  484 				//else					
//  485 				//Mode_frame_P2P('1','2','1','0','0','0','0');			// send P2P OFF frame light on the load
//  486 				dimmer_command(OFF,0);
        LDI     R16, 2
        RCALL   dimmer_command
        RJMP    ??Actuator_regulation_0
//  487 				//regulation_timer_initial();
//  488 			}
//  489 		}
//  490 		else
//  491 		{
//  492 			Time_delay.DLL_low_20s_enable = 0;
??Actuator_regulation_2:
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ANDI    R16, 0xBF
        STD     Z+6, R16
//  493 			Time_delay.DLL_low_20s_count = 0;
        LDI     R16, 0
        LDI     R17, 0
        STD     Z+17, R16
        STD     Z+18, R16
//  494 			Time_delay.DLL_high_10min_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0x7F
        STD     Z+6, R16
//  495 			Time_delay.DLL_high_10min_count = 0;	
        STD     Z+19, R17
        STD     Z+20, R17
        STD     Z+21, R17
        STD     Z+22, R17
//  496 		}
//  497 	}
//  498 }
??Actuator_regulation_0:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09
        CFI EndBlock cfiBlock8
//  499 
//  500 /******************************************************************************
//  501 **				Regulation for dimmer
//  502 ** 			 	after setpoint calibrate finish	
//  503 ** 			to maintain setpoint~(setpoint+20%)
//  504 **				DIM++ 	step==2
//  505 **				DIM-- 	step==1
//  506 ****** 			DLL.current_level< setpoint		dim++ every 200ms
//  507 ****** 			DLL.current_level> setpoint(1+20%)	dim-- every 20s
//  508 ****** 			DLL.current_level> setpoint(1+40%)	dim-- every 40s
//  509 ****** 			DLL.current_level> setpoint(1+40%)	and dim-- == 0, send "OFF"
//  510 ******************************************************************************/

        RSEG CODE:CODE:NOROOT(1)
//  511 void Dimmer_regulation(void)												
Dimmer_regulation:
        CFI Block cfiBlock9 Using cfiCommon0
        CFI Function Dimmer_regulation
//  512 {
        FUNCALL Dimmer_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, regulation_timer_initial
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, regulation_timer_initial
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, regulation_timer_initial
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, factor_divcalc
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Dimmer_regulation, dimmer_command
        LOCFRAME CSTACK, 4, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE4_L09
        CFI R27 Frame(CFA_Y, -1)
        CFI R26 Frame(CFA_Y, -2)
        CFI R25 Frame(CFA_Y, -3)
        CFI R24 Frame(CFA_Y, -4)
        CFI CFA_Y Y+4
//  513 	//unsigned char buffer[2];
//  514   if( DLL.start_regulation == 1 )
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+54
        SBRS    R16, 0
        RJMP    ??Dimmer_regulation_0
        LDS     R16, (KO_conf + 23)
        TST     R16
        BREQ    $+2+2
        RJMP    ??Dimmer_regulation_1
//  515 	{
//  516 			if(KO_conf.TypeLoop == 0)           								// in close loop
//  517 			{
//  518 				if(DLL.current_level < set_point)														// < setpoint		dim++ every 200ms
        LDD     R16, Z+16
        LDD     R17, Z+17
        LDS     R18, set_point
        LDS     R19, (set_point + 1)
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??Dimmer_regulation_2
//  519 				{
//  520 					Time_delay.Dim_inc_enable = 1;
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ORI     R16, 0x10
        STD     Z+6, R16
//  521 					if(Time_delay.Dim_inc_count > Regulation_200ms)
        LDD     R16, Z+13
        LDD     R17, Z+14
        CPI     R16, 145
        LDI     R18, 1
        CPC     R17, R18
        BRCC    $+2+2
        RJMP    ??Dimmer_regulation_0
//  522 					{
//  523 						Time_delay.Dim_inc_count = 0;
        LDI     R17, 0
        STD     Z+13, R17
        STD     Z+14, R17
//  524 						Time_delay.Dim_inc_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0xEF
        STD     Z+6, R16
//  525 						//if(SCS_received.P2P_dimmer_full != 1)
//  526 						if(KO_conf.status[1] != 0x64)
        LDS     R16, (KO_conf + 46)
        CPI     R16, 100
        BREQ    ??Dimmer_regulation_3
//  527 						{
//  528 							//Mode_frame_P2P('1','2','3','0','2','F','F');					// DIM++ 	step==2
//  529 							dimmer_command(DIM_UP,0);
        LDI     R16, 10
??Dimmer_regulation_4:
        RCALL   dimmer_command
//  530 							regulation_timer_initial();
        CALL    regulation_timer_initial
        RJMP    ??Dimmer_regulation_0
//  531 							//SCS_received.P2P_dimmer_zero = 0;											// if DIM++ frame is sent, the flag SCS_received.P2P_dimmer_zero should be cleared
//  532 						}
//  533 						else
//  534 						{
//  535 							if(flags.dimmer_ON_sended == 0)
??Dimmer_regulation_3:
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+12
        LDD     R17, Z+13
        SBRC    R16, 3
        RJMP    ??Dimmer_regulation_0
//  536 							{	
//  537 								dimmer_command(ON,0);
        LDI     R17, 0
        LDI     R16, 1
        RCALL   dimmer_command
//  538 								regulation_timer_initial();
        CALL    regulation_timer_initial
//  539 								flags.dimmer_ON_sended = 1;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+12
        LDD     R17, Z+13
        ORI     R16, 0x08
        STD     Z+13, R17
        STD     Z+12, R16
        RJMP    ??Dimmer_regulation_0
//  540 							}
//  541 						}
//  542 					}
//  543 				}
//  544 				else if (DLL.current_level > (set_point + set_point/2))			// > setpoint(1+40%)	dim-- every 40s
??Dimmer_regulation_2:
        LDS     R16, set_point
        LDS     R17, (set_point + 1)
        LDS     R18, set_point
        LDS     R19, (set_point + 1)
        LSR     R19
        ROR     R18
        ADD     R16, R18
        ADC     R17, R19
        LDD     R18, Z+16
        LDD     R19, Z+17
        CP      R16, R18
        CPC     R17, R19
        BRCC    ??Dimmer_regulation_5
//  545 				{
//  546 						flags.dimmer_ON_sended = 0;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+12
        LDD     R17, Z+13
        ANDI    R16, 0xF7
        STD     Z+13, R17
        STD     Z+12, R16
//  547 						Time_delay.Dim_dec_enable = 1;
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ORI     R16, 0x20
        STD     Z+6, R16
//  548 						//if(Time_delay.Dim_dec_count > Regulation_600ms)
//  549 						if(Time_delay.Dim_dec_count > Reg_dim_20s)
        LDD     R16, Z+15
        LDD     R17, Z+16
        CPI     R16, 209
        LDI     R18, 7
        CPC     R17, R18
        BRCC    $+2+2
        RJMP    ??Dimmer_regulation_0
//  550 						{
//  551 							Time_delay.Dim_dec_count = 0;
        LDI     R17, 0
        STD     Z+15, R17
        STD     Z+16, R17
//  552 							Time_delay.Dim_dec_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0xDF
        STD     Z+6, R16
//  553 							if (KO_conf.status[1] == 1)
        LDS     R16, (KO_conf + 46)
        CPI     R16, 1
        BRNE    ??Dimmer_regulation_6
//  554 							{
//  555 								//Mode_frame_P2P('1','2','1','0','0','0','0'); //  OFF
//  556 								dimmer_command(OFF,0);
??Dimmer_regulation_7:
        LDI     R17, 0
        LDI     R16, 2
        RJMP    ??Dimmer_regulation_8
//  557 								//regulation_timer_initial();
//  558 							}
//  559 							else
//  560 							{
//  561 								if( KO_conf.status[1] != Status_OFF ) //Reyno 0626
??Dimmer_regulation_6:
        LDS     R16, (KO_conf + 46)
        TST     R16
        BRNE    $+2+2
        RJMP    ??Dimmer_regulation_0
//  562 								{
//  563 									//Mode_frame_P2P('1','2','4','0','1','F','F'); // DIM-- step==1
//  564 									dimmer_command(DIM_DOWN,0);
??Dimmer_regulation_9:
        LDI     R16, 11
        RJMP    ??Dimmer_regulation_4
//  565 									regulation_timer_initial();
//  566 								}
//  567 							}
//  568 						}
//  569 				}
//  570 				else if(DLL.current_level > (set_point + set_point/5))			// > setpoint(1+20%)	dim-- every 20s
??Dimmer_regulation_5:
        LDS     R24, set_point
        LDS     R25, (set_point + 1)
        LDI     R20, 5
        LDI     R21, 0
        LDS     R16, set_point
        LDS     R17, (set_point + 1)
        CALL    ?US_DIVMOD_L02
        ADD     R24, R16
        ADC     R25, R17
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+16
        LDD     R17, Z+17
        CP      R24, R16
        CPC     R25, R17
        BRCS    $+2+2
        RJMP    ??Dimmer_regulation_0
//  571 				{
//  572 						Time_delay.Dim_dec_enable = 1;
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ORI     R16, 0x20
        STD     Z+6, R16
//  573 						//if(Time_delay.Dim_dec_count > Regulation_200ms)
//  574 						if(Time_delay.Dim_dec_count > Reg_dim_60s)
        LDD     R16, Z+15
        LDD     R17, Z+16
        CPI     R16, 17
        LDI     R18, 39
        CPC     R17, R18
        BRCC    $+2+2
        RJMP    ??Dimmer_regulation_0
//  575 						{
//  576 							Time_delay.Dim_dec_count = 0;
        LDI     R16, 0
        LDI     R17, 0
        STD     Z+15, R16
        STD     Z+16, R16
//  577 							Time_delay.Dim_dec_enable = 0;
        LDD     R16, Z+6
        ANDI    R16, 0xDF
        STD     Z+6, R16
//  578 							if (KO_conf.status[1] > 1)
        LDS     R16, (KO_conf + 46)
        CPI     R16, 2
        BRCC    $+2+2
        RJMP    ??Dimmer_regulation_0
        RJMP    ??Dimmer_regulation_9
//  579 							{
//  580 								//Mode_frame_P2P('1','2','4','0','1','F','F'); // DIM-- step==1
//  581 								dimmer_command(DIM_DOWN,0);
//  582 								regulation_timer_initial();
//  583 							}
//  584 						}
//  585 				}
//  586 			}
//  587 			else if((KO_conf.TypeLoop == 1)&&(SCS_received.Daylight_lux ==1))   // in open loop
??Dimmer_regulation_1:
        LDS     R16, (KO_conf + 23)
        CPI     R16, 1
        BREQ    $+2+2
        RJMP    ??Dimmer_regulation_0
        LDI     R30, LOW(SCS_received)
        LDI     R31, (SCS_received) >> 8
        LDD     R16, Z+3
        SBRS    R16, 7
        RJMP    ??Dimmer_regulation_0
//  588 			{
//  589 				// For a ballast 0-10V
//  590 					SCS_received.Daylight_lux = 0;
        LDD     R16, Z+3
        ANDI    R16, 0x7F
        STD     Z+3, R16
//  591 					DLL.open_lightlevel = (DLL.open_lightlux & 0x000FFFFF)/5;
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+32
        LDD     R17, Z+33
        LDD     R18, Z+34
        LDD     R19, Z+35
        ANDI    R18, 0x0F
        LDI     R19, 0
        LDI     R20, 5
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?UL_DIVMOD_L03
        MOVW    R31:R30, R27:R26
        STD     Z+36, R16
        STD     Z+37, R17
//  592 				// (lux sent by daylight sensor) / (daylight level set by user)
//  593 				if((KO_conf.DF ==0)&&(DLL.DF ==0))												//close loopopen loopDF
        LDS     R16, (KO_conf + 22)
        TST     R16
        BRNE    ??Dimmer_regulation_10
        LDD     R16, Z+30
        LDD     R17, Z+31
        OR      R16, R17
        BRNE    ??Dimmer_regulation_10
//  594 				{
//  595 					DLL.DF = DLL.open_lightlevel / KO_conf.DaylightLev;			// calculate the D.F in the openloop
        LDD     R16, Z+36
        LDD     R17, Z+37
        LDS     R20, (KO_conf + 27)
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        MOVW    R31:R30, R27:R26
        STD     Z+30, R16
        STD     Z+31, R17
//  596 					KO_conf.DF = DLL.DF;
        LDD     R16, Z+30
        LDD     R17, Z+31
        STS     (KO_conf + 22), R16
        RJMP    ??Dimmer_regulation_0
//  597 					// should load this parameter into eep
//  598 					//write_ee_KO(22,KO_conf.DF);														// write_ee_KO(unsigned char index,unsigned char data);
//  599 				}
//  600 				else
//  601 				{
//  602 					DLL.open_actualevel = DLL.open_lightlevel / DLL.DF;			// calculate the actuallevel in the motion sensor area
??Dimmer_regulation_10:
        LDD     R16, Z+36
        LDD     R17, Z+37
        LDD     R20, Z+30
        LDD     R21, Z+31
        CALL    ?US_DIVMOD_L02
        MOVW    R31:R30, R27:R26
        STD     Z+38, R16
        STD     Z+39, R17
//  603 					if(DLL.open_actualevel*5 > set_point)
        LDS     R18, set_point
        LDS     R19, (set_point + 1)
        LDD     R20, Z+38
        LDD     R21, Z+39
        LDI     R16, 5
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        CP      R18, R16
        CPC     R19, R17
        BRCC    $+2+2
        RJMP    ??Dimmer_regulation_7
//  604 					{
//  605 						//Mode_frame_P2P('1','2','1','0','0','0','0');					//  frame OFF
//  606 						dimmer_command(OFF,0);
//  607 					}
//  608 					else
//  609 					{
//  610 						DLL.open_offset = factor_divcalc((set_point - DLL.open_actualevel*5), DLL.load_provision*5);
        LDD     R20, Z+14
        LDD     R21, Z+15
        LDI     R16, 5
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        MOVW    R19:R18, R17:R16
        LDS     R22, set_point
        LDS     R23, (set_point + 1)
        LDD     R20, Z+38
        LDD     R21, Z+39
        LDI     R16, 5
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        SUB     R22, R16
        SBC     R23, R17
        MOVW    R17:R16, R23:R22
        RCALL   factor_divcalc
        STS     (DLL + 40), R16
//  611 						//CharToStr(DLL.open_offset ,buffer);
//  612 						//Mode_frame_P2P('1','2','D',buffer[0],buffer[1],'F','F');// Set level for dimmer
//  613 						dimmer_command(LEVEL,DLL.open_offset);
        LDS     R17, (DLL + 40)
        LDI     R16, 12
??Dimmer_regulation_8:
        RCALL   dimmer_command
//  614 					}
//  615 				}
//  616 			}
//  617 	}
//  618 }
??Dimmer_regulation_0:
        LDI     R30, 4
        JMP     ?EPILOGUE_B4_L09
        CFI EndBlock cfiBlock9
//  619 
//  620 //******************************************************************************
//  621 //				send the frame dimmer--	,	step==1
//  622 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  623 void Dimmer_dec(void)
Dimmer_dec:
        CFI Block cfiBlock10 Using cfiCommon0
        CFI Function Dimmer_dec
//  624 {
//  625 	if(SCS_received.P2P_dimmer_zero != 1)						
        FUNCALL Dimmer_dec, dimmer_command
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R30, LOW(SCS_received)
        LDI     R31, (SCS_received) >> 8
        LDD     R16, Z+2
        SBRC    R16, 3
        RJMP    ??Dimmer_dec_0
//  626 	{
//  627   	Time_delay.Dim_dec_count = 0;
        LDI     R17, 0
        STS     (Time_delay + 15), R17
        STS     (Time_delay + 16), R17
//  628 		Time_delay.Dim_dec_enable = 0;
        LDI     R30, LOW(Time_delay)
        LDI     R31, (Time_delay) >> 8
        LDD     R16, Z+6
        ANDI    R16, 0xDF
        STD     Z+6, R16
//  629 		//Mode_frame_P2P('1','2','4','0','1','F','F');				// DIM--	step==1
//  630 		dimmer_command(DIM_DOWN,0);
        LDI     R16, 11
        RCALL   dimmer_command
//  631 		SCS_received.P2P_dimmer_full = 0;							// if DIM-- frame is sent, the flag SCS_received.P2P_dimmer_full should be cleared
        LDI     R30, LOW(SCS_received)
        LDI     R31, (SCS_received) >> 8
        LDD     R16, Z+2
        ANDI    R16, 0xFB
        STD     Z+2, R16
//  632 	}
//  633 }
??Dimmer_dec_0:
        RET
        CFI EndBlock cfiBlock10
//  634 	
//  635 //******************************************************************************
//  636 //				regulation for actuator or dimmer
//  637 // 		after (Lightreg is enabled)&&(load is on)&&(calibrate finished)
//  638 //		first judge the dimmer or actuator, then stsrt regulation
//  639 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  640 void Light_regulation(void)
Light_regulation:
        CFI Block cfiBlock11 Using cfiCommon0
        CFI Function Light_regulation
//  641 {	
//  642 	if( KO_conf.LightReg == 1 )		// setpoint and provision had been calculated
        FUNCALL Light_regulation, Actuator_regulation
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL Light_regulation, Dimmer_regulation
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDS     R16, (KO_conf + 28)
        CPI     R16, 1
        BRNE    ??Light_regulation_0
//  643 	{
//  644 		if (SCS_received.P2P_actuator_flag  == 1)	
        LDI     R30, LOW(SCS_received)
        LDI     R31, (SCS_received) >> 8
        LDD     R16, Z+2
        SBRS    R16, 0
        RJMP    ??Light_regulation_1
//  645 				Actuator_regulation(); //reyno 0604	       						// sensor control a actuator
        RCALL   Actuator_regulation
        RET
//  646 		else if(SCS_received.P2P_dimmer_flag == 1)		
??Light_regulation_1:
        LDD     R16, Z+2
        SBRC    R16, 1
//  647 				Dimmer_regulation(); //reyno 0604	        						// sensor control a dimmer	
        RCALL   Dimmer_regulation
//  648 	}
//  649 }
??Light_regulation_0:
        RET
        CFI EndBlock cfiBlock11
//  650 
//  651 //******************************************************************************
//  652 //			update the dyalight level after calibration
//  653 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  654 void daylight_set_init(void)
daylight_set_init:
        CFI Block cfiBlock12 Using cfiCommon0
        CFI Function daylight_set_init
//  655 {
        FUNCALL daylight_set_init, factor_divcalc
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL daylight_set_init, factor_divcalc
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R27
        CFI R27 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        ST      -Y, R26
        CFI R26 Frame(CFA_Y, -2)
        CFI CFA_Y Y+2
//  656 	DLL.setpoint_H = eep_setpoint[3];
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        LDI     R20, ((eep_setpoint + 6) & 0xff) & 0xFF
        LDI     R21, (((eep_setpoint + 6) >> 8) & 0xff) & 0xFF
        CALL    __eeget16_16
        ADIW    R27:R26, 24
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 25
//  657 	//DLL.setpoint_M = eep_setpoint[2]; //reyno 0602
//  658 	DLL.setpoint_L = eep_setpoint[1];
        LDI     R20, ((eep_setpoint + 2) & 0xff) & 0xFF
        LDI     R21, (((eep_setpoint + 2) >> 8) & 0xff) & 0xFF
        CALL    __eeget16_16
        ADIW    R27:R26, 26
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 27
//  659 	
//  660 	if(DLL.setpoint_H > 0)    DLL.setpoint_H = factor_divcalc(2400, DLL.setpoint_H);     	// 600LUX
        ADIW    R27:R26, 24
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 25
        OR      R16, R17
        BREQ    ??daylight_set_init_0
        ADIW    R27:R26, 24
        LD      R18, X+
        LD      R19, X
        SBIW    R27:R26, 25
        LDI     R16, 96
        LDI     R17, 9
        RCALL   factor_divcalc
        ADIW    R27:R26, 24
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 25
//  661  // if(DLL.setpoint_M > 0)    DLL.setpoint_M = factor_divcalc(800, DLL.setpoint_M);     	// 200LUX
//  662 	if(DLL.setpoint_L > 0)    DLL.setpoint_L = factor_divcalc(1200,  DLL.setpoint_L);     	// 300LUX
??daylight_set_init_0:
        ADIW    R27:R26, 26
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 27
        OR      R16, R17
        BREQ    ??daylight_set_init_1
        ADIW    R27:R26, 26
        LD      R18, X+
        LD      R19, X
        SBIW    R27:R26, 27
        LDI     R16, 176
        LDI     R17, 4
        RCALL   factor_divcalc
        ADIW    R27:R26, 26
        ST      X+, R16
        ST      X, R17
//  663 
//  664        // if((DLL.setpoint_H>0)&&(DLL.setpoint_L>0))      DLL.setpoint_calibrate = 1;     		// calibrate finish
//  665 		//if(DLL.setpoint_M > 0)	 DLL.setpoint_calibrate = 1;     								// flag calibrate finish
//  666 }
??daylight_set_init_1:
        LD      R26, Y+
        CFI R26 SameValue
        CFI CFA_Y Y+1
        LD      R27, Y+
        CFI R27 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock12
//  667 
//  668 
//  669 //******************************************************************************
//  670 //				calibrate the real daylight level
//  671 // DLL.day_level is the daylight level detect by sensor in the housing
//  672 // DLL.current_level is the daylight level of the outside calculated by sensor
//  673 // DLL.calc_level used for D.F set via IR tools
//  674 // DLL.current_level
//  675 // DLL.day_levelsensor
//  676 //DLL.setpoint_MLUXADC10
//  677 //DLL.day_levelADC
//  678 //******************************************************************************
//  679 
//  680 /*
//  681 void real_daylight_calc(void)
//  682 {
//  683 	//DLL.calc_level unit is lux
//  684      DLL.calc_level = (DLL.setpoint_M * DLL.day_level)/10;									// calculate the daylight level (LUX)around the sensor
//  685 	
//  686 		 DLL.current_level = DLL.calc_level;
//  687 		
//  688 	   if((KO_conf.TypeLoop ==0)&&(KO_conf.DF !=0))														// default :KO_conf.DF=5(ceiling sensor),KO_conf.DF=1(wall sensor)
//  689 				//DLL.current_level = factor_mulcalc(DLL.current_level, DLL.DF);   	// calitrate real value and value measured by ambient light sensor
//  690 		 {
//  691 		
//  692 		 		if((Sensor_mode.power_on_flag == 1)&&(DLL.calc_OK_flag == 1))					// 0609
//  693 		 		{
//  694 		 				DLL.current_level = DLL.calc_level + (DLL.load_provision/KO_conf.DF)*(KO_conf.DF - 1);
//  695 		 		}
//  696 				else
//  697 				{
//  698 					DLL.current_level = DLL.current_level*KO_conf.DF;	//DLL.current_level*KO_conf.DF/10;
//  699 				}
//  700 		 }
//  701 
//  702 }
//  703 */
//  704 

        RSEG CODE:CODE:NOROOT(1)
//  705 void PofL_calc(void)
PofL_calc:
        CFI Block cfiBlock13 Using cfiCommon0
        CFI Function PofL_calc
//  706 {
        MOVW    R23:R22, R27:R26
//  707 	unsigned int V1,V2,V3;
//  708 	V1 = DLL.loadoff_level;
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        ADIW    R27:R26, 10
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 11
//  709 	V2 = DLL.PLv_5s - V1;
        ADIW    R27:R26, 46
        LD      R18, X+
        LD      R19, X
        SBIW    R27:R26, 47
        SUB     R18, R16
        SBC     R19, R17
//  710 	V3 = DLL.PLv_5min - V1;
        ADIW    R27:R26, 48
        LD      R20, X+
        LD      R21, X
        SBIW    R27:R26, 49
        SUB     R20, R16
        SBC     R21, R17
//  711 	if(V3 < V2 + V2/2)
        MOVW    R17:R16, R19:R18
        LSR     R17
        ROR     R16
        ADD     R18, R16
        ADC     R19, R17
        CP      R20, R18
        CPC     R21, R19
        BRCC    ??PofL_calc_0
//  712 		DLL.load_provision = V3;
        ADIW    R27:R26, 14
        ST      X+, R20
        ST      X, R21
        RJMP    ??PofL_calc_1
//  713 	else
//  714 		DLL.load_provision = V2 + V2/2;
??PofL_calc_0:
        ADIW    R27:R26, 14
        ST      X+, R18
        ST      X, R19
??PofL_calc_1:
        SBIW    R27:R26, 15
        ADIW    R27:R26, 14
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 15
        LDS     R20, (KO_conf + 22)
        LDI     R21, 0
        CALL    ?S_EC_MUL_L02
        LDI     R20, 10
        CALL    ?US_DIVMOD_L02
        ADIW    R27:R26, 14
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 15
//  715 
//  716 	DLL.load_provision = (DLL.load_provision*KO_conf.DF)/10;
//  717 	
//  718 	if(DLL.load_provision/5 > 0xFF)
        ADIW    R27:R26, 14
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 15
        LDI     R20, 5
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        CPI     R16, 0
        LDI     R18, 1
        CPC     R17, R18
        BRCS    ??PofL_calc_2
//  719 		KO_conf.PofL = 0xFF;
        STS     (KO_conf + 26), R30
        RJMP    ??PofL_calc_3
//  720 	else
//  721 		KO_conf.PofL = DLL.load_provision/5;						// does it need to wtite into eep?
??PofL_calc_2:
        ADIW    R27:R26, 14
        LD      R16, X+
        LD      R17, X
        LDI     R20, 5
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        STS     (KO_conf + 26), R16
//  722 }
??PofL_calc_3:
        MOVW    R27:R26, R23:R22
        RET
        CFI EndBlock cfiBlock13
//  723 
//  724 //******************************************************************************
//  725 //		function: get the value of  provision and setpoint OFF
//  726 //			Procedure to calculate the provision of light:
//  727 //		1)	the sensor stored the daylight value (V1) before light on
//  728 //		2)	After 5s, the sensor stored the max value (V2)
//  729 //		3)	After 5mn, the sensor stored an another max value (V3)
//  730 //		4)	The provision of light (P_l) is :
//  731 //			P_l = V3 if V3 < (V2-V1)*(1+50%)
//  732 //			Or P_L = (V2-V1)*(1+50%) if V3 >= (V2-V1)*(1+50%)
//  733 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  734 void daylight_service(void)
daylight_service:
        CFI Block cfiBlock14 Using cfiCommon0
        CFI Function daylight_service
//  735 {
        FUNCALL daylight_service, get_dl_level
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL daylight_service, PofL_calc
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL daylight_service, PofL_calc
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL daylight_service, PofL_calc
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE8_L09
        CFI R7 Frame(CFA_Y, -1)
        CFI R6 Frame(CFA_Y, -2)
        CFI R5 Frame(CFA_Y, -3)
        CFI R4 Frame(CFA_Y, -4)
        CFI R27 Frame(CFA_Y, -5)
        CFI R26 Frame(CFA_Y, -6)
        CFI R25 Frame(CFA_Y, -7)
        CFI R24 Frame(CFA_Y, -8)
        CFI CFA_Y Y+8
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
        REQUIRE ?Register_R6_is_cg_reg
        REQUIRE ?Register_R7_is_cg_reg
        LDS     R16, (KO_conf + 23)
        TST     R16
        BREQ    $+2+2
        RJMP    ??daylight_service_0
//  736 	if(KO_conf.TypeLoop == 0)           						// in close loop	
//  737 	{
//  738   		get_dl_level();
        RCALL   get_dl_level
//  739 
//  740       if(Sensor_mode.power_on_flag == 0)                    	// count the loadoff value when load is powerd down 5s
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        SBRC    R16, 5
        RJMP    ??daylight_service_1
//  741       {
//  742           DLL.loadoff_level = DLL.calc_level;
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+18
        LDD     R17, Z+19
        STD     Z+10, R16
        STD     Z+11, R17
//  743 					DLL.PLv_5s = DLL.calc_level;
        LDD     R16, Z+18
        LDD     R17, Z+19
        STD     Z+46, R16
        STD     Z+47, R17
//  744 					DLL.lightness_load = T_5min5s;					// 5s
        LDI     R16, 49
        LDI     R17, 1
        STD     Z+44, R16
        STD     Z+45, R17
//  745 					DLL.PLv_5min = DLL.calc_level;
        LDD     R16, Z+18
        LDD     R17, Z+19
        STD     Z+48, R16
        STD     Z+49, R17
//  746 					DLL.calc_OK_flag = 0;
        LDI     R16, 0
??daylight_service_2:
        STS     (DLL + 23), R16
        RJMP    ??daylight_service_3
//  747       }
//  748      	else  if(DLL.calc_OK_flag != 1 && KO_conf.status[1] != 0)							// if the load is light on and load provision have not calibrated yet
??daylight_service_1:
        LDS     R16, (DLL + 23)
        CPI     R16, 1
        BRNE    $+2+2
        RJMP    ??daylight_service_3
        LDS     R16, (KO_conf + 46)
        TST     R16
        BRNE    $+2+2
        RJMP    ??daylight_service_3
//  749       {																						// the provision of load is constant, no need to cablibrate every light on
//  750 				if(KO_conf.flag_PofL_Forced == 0)
        LDI     R30, LOW(KO_conf)
        LDI     R31, (KO_conf) >> 8
        LDD     R16, Z+49
        SBRC    R16, 0
        RJMP    ??daylight_service_4
//  751 				{
//  752 					//if(DLL.lightness_load > T_5mins && DLL.lightness_load < T_5mins + 2)					// load turn on less than 5 senconds
//  753 					if(DLL.lightness_load > T_5mins && DLL.lightness_load)
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+44
        LDD     R17, Z+45
        CPI     R16, 45
        LDI     R18, 1
        CPC     R17, R18
        BRCC    $+2+2
        RJMP    ??daylight_service_5
        LDD     R16, Z+44
        LDD     R17, Z+45
        OR      R16, R17
        BRNE    $+2+2
        RJMP    ??daylight_service_5
//  754 					{
//  755 						if( DLL.lightness_load < T_5mins + 2)
        LDD     R16, Z+44
        LDD     R17, Z+45
        CPI     R16, 46
        CPC     R17, R18
        BRCS    $+2+2
        RJMP    ??daylight_service_3
//  756 						{
//  757 							//reyno 0610
//  758 							//if(DLL.PLv_5s <= DLL.current_level)		DLL.PLv_5s = DLL.current_level;
//  759 							if(DLL.PLv_5s < (((unsigned long)DLL.calc_level*100)/KO_conf.status[1]))
        LDD     R4, Z+46
        LDD     R5, Z+47
        CLR     R6
        CLR     R7
        LDD     R16, Z+18
        LDD     R17, Z+19
        LDI     R18, 0
        LDI     R19, 0
        LDI     R20, 100
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?L_EC_MUL_L03
        LDS     R20, (KO_conf + 46)
        CALL    ?UL_DIVMOD_L03
        CP      R4, R16
        CPC     R5, R17
        CPC     R6, R18
        CPC     R7, R19
        BRCS    $+2+2
        RJMP    ??daylight_service_3
//  760 							{
//  761 								DLL.PLv_5s = ((unsigned long)DLL.calc_level*100)/KO_conf.status[1];
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+18
        LDD     R17, Z+19
        LDI     R18, 0
        LDI     R19, 0
        LDI     R20, 100
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?L_EC_MUL_L03
        LDS     R20, (KO_conf + 46)
        CALL    ?UL_DIVMOD_L03
        MOVW    R31:R30, R27:R26
        STD     Z+46, R16
        STD     Z+47, R17
//  762 								DLL.PLv_5min = ((unsigned long)DLL.calc_level*100)/KO_conf.status[1];
??daylight_service_6:
        LDD     R16, Z+18
        LDD     R17, Z+19
        LDI     R18, 0
        LDI     R19, 0
        LDI     R20, 100
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?L_EC_MUL_L03
        LDS     R20, (KO_conf + 46)
        CALL    ?UL_DIVMOD_L03
        MOVW    R31:R30, R27:R26
        STD     Z+48, R16
        STD     Z+49, R17
//  763 								PofL_calc();
        RCALL   PofL_calc
        RJMP    ??daylight_service_3
//  764 							}
//  765 						}
//  766 					}
//  767 					else if(DLL.lightness_load > 1)						// load turn on less than 5 minutes
??daylight_service_5:
        LDD     R24, Z+44
        LDD     R25, Z+45
        CPI     R24, 2
        SBCI    R25, 0
        BRCS    ??daylight_service_7
//  768 					{
//  769 							if(DLL.PLv_5min < (((unsigned long)DLL.calc_level*100)/KO_conf.status[1]))
        LDD     R4, Z+48
        LDD     R5, Z+49
        CLR     R6
        CLR     R7
        LDD     R16, Z+18
        LDD     R17, Z+19
        LDI     R18, 0
        LDI     R19, 0
        LDI     R20, 100
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?L_EC_MUL_L03
        LDS     R20, (KO_conf + 46)
        CALL    ?UL_DIVMOD_L03
        CP      R4, R16
        CPC     R5, R17
        CPC     R6, R18
        CPC     R7, R19
        BRCS    $+2+2
        RJMP    ??daylight_service_3
//  770 							{
//  771 								DLL.PLv_5min = ((unsigned long)DLL.calc_level*100)/KO_conf.status[1];
        MOVW    R31:R30, R27:R26
        RJMP    ??daylight_service_6
//  772 								PofL_calc();
//  773 							}
//  774 					}
//  775 					else if(DLL.lightness_load == 1 || DLL.lightness_load == 0)					// load on 5min, start to calibrate the provision of load
??daylight_service_7:
        LDD     R16, Z+44
        LDD     R17, Z+45
        CPI     R16, 1
        LDI     R18, 0
        CPC     R17, R18
        BREQ    ??daylight_service_8
        LDD     R16, Z+44
        LDD     R17, Z+45
        OR      R16, R17
        BREQ    $+2+2
        RJMP    ??daylight_service_3
//  776 					{
//  777 						/*
//  778 						unsigned int V1,V2,V3;
//  779 						V1 = DLL.loadoff_level;
//  780 						V2 = DLL.PLv_5s - V1;
//  781 						V3 = DLL.PLv_5min - V1;
//  782 						if(V3 < V2 + V2/2)
//  783 							DLL.load_provision = V3;
//  784 						else
//  785 							DLL.load_provision = V2 + V2/2;
//  786 					
//  787 						DLL.load_provision = (DLL.load_provision*KO_conf.DF)/10;
//  788 						DLL.setpoint_OFF = set_point + DLL.load_provision + DLL.load_provision/2;							//set_point + DLL.load_provision(1+k);
//  789 						
//  790 						if(DLL.load_provision/5 > 0xFF)
//  791 							KO_conf.PofL = 0xFF;
//  792 						else
//  793 							KO_conf.PofL = DLL.load_provision/5;						// does it need to wtite into eep?
//  794 						*/
//  795 						PofL_calc();
??daylight_service_8:
        RCALL   PofL_calc
//  796 						DLL.setpoint_OFF = set_point + DLL.load_provision + DLL.load_provision/2;							//set_point + DLL.load_provision(1+k);
        LDS     R16, set_point
        LDS     R17, (set_point + 1)
        MOVW    R31:R30, R27:R26
        LDD     R18, Z+14
        LDD     R19, Z+15
        ADD     R16, R18
        ADC     R17, R19
        LDD     R18, Z+14
        LDD     R19, Z+15
        LSR     R19
        ROR     R18
        ADD     R16, R18
        ADC     R17, R19
        STD     Z+20, R16
        STD     Z+21, R17
//  797 						
//  798 						DLL.calc_OK_flag = 1; //provision of light calculate OK
        LDI     R16, 1
        RJMP    ??daylight_service_2
//  799 					}
//  800 				}
//  801 				else
//  802 				{
//  803 					DLL.calc_OK_flag = 1;
??daylight_service_4:
        LDI     R16, 1
        STS     (DLL + 23), R16
//  804 					DLL.setpoint_OFF = set_point + KO_conf.PofL * 5 + (KO_conf.PofL * 5) / 2;
        LDS     R24, set_point
        LDS     R25, (set_point + 1)
        LDS     R20, (KO_conf + 26)
        LDI     R21, 0
        LDI     R16, 5
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        ADD     R24, R16
        ADC     R25, R17
        LDS     R20, (KO_conf + 26)
        LDI     R16, 5
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        LDI     R20, 2
        CALL    ?SS_DIVMOD_L02
        ADD     R24, R16
        ADC     R25, R17
        MOVW    R31:R30, R27:R26
        STD     Z+20, R24
        STD     Z+21, R25
        RJMP    ??daylight_service_3
//  805 				}
//  806 			}
//  807 	}
//  808 	else if(KO_conf.TypeLoop == 1)       									// in open loop
??daylight_service_0:
        LDS     R16, (KO_conf + 23)
        CPI     R16, 1
        BRNE    ??daylight_service_3
//  809 	{
//  810 		DLL.calc_OK_flag = 1;																// close loop
        LDI     R16, 1
        STS     (DLL + 23), R16
//  811 		//DLL.load_provision = KO_conf.PofL;								// set by user
//  812 		//DLL.loadoff_level  = KO_conf.DaylightLev;					// set by user
//  813 		DLL.loadoff_level = KO_conf.DayLightLevLux[0];
        LDS     R16, (KO_conf + 35)
        LDI     R17, 0
        LDI     R30, LOW(DLL)
        LDI     R31, (DLL) >> 8
        STD     Z+10, R16
        STD     Z+11, R17
//  814 		DLL.loadoff_level = DLL.loadoff_level<<8;
        LDD     R16, Z+10
        LDD     R17, Z+11
        MOV     R17, R16
        LDI     R16, 0
        STD     Z+10, R16
        STD     Z+11, R17
//  815 		DLL.loadoff_level = KO_conf.DayLightLevLux[1];
        LDS     R16, (KO_conf + 36)
        LDI     R17, 0
        STD     Z+10, R16
        STD     Z+11, R17
//  816 		DLL.current_level  = DLL.open_actualevel;						// (lux sent by daylight) / D.F
        LDD     R16, Z+38
        LDD     R17, Z+39
        STD     Z+16, R16
        STD     Z+17, R17
//  817 		DLL.setpoint_OFF   = DLL.load_provision + set_point;		
        LDD     R16, Z+14
        LDD     R17, Z+15
        LDS     R18, set_point
        LDS     R19, (set_point + 1)
        ADD     R16, R18
        ADC     R17, R19
        STD     Z+20, R16
        STD     Z+21, R17
//  818 	}
//  819 }
??daylight_service_3:
        LDI     R30, 8
        JMP     ?EPILOGUE_B8_L09
        CFI EndBlock cfiBlock14
//  820 
//  821 
//  822 
//  823 //******************************************************************************
//  824 //		get the value of  provision and setpoint OFF
//  825 //		flag__________>>>	DLL.setpoint_calibrate: calibration in the factory via SCS
//  826 //				|
//  827 //				|____>>>>	KO_conf.DF :calibration by user via IR
//  828 //******************************************************************************
//  829 /*
//  830 void get_dl_level(void)
//  831 {
//  832 	DLL.getlevel_finish = 0;
//  833 	DLL.read_daylightSample = read_adc ( daylight_channel );
//  834 	DLL.daylight_SampleValue = DLL.daylight_SampleValue + (unsigned int) DLL.read_daylightSample;
//  835 	DLL.daylight_SampleCount++;
//  836 	if(DLL.daylight_SampleCount >= 10)				
//  837 	{
//  838 		
//  839 		DLL.daylight_SampleCount = 0;
//  840 		DLL.day_level = DLL.daylight_SampleValue / 10;		// ADC value
//  841 		DLL.daylight_SampleValue = 0;
//  842 		DLL.getlevel_finish = 1;		
//  843 		if(DLL.setpoint_calibrate == 1)   							// flag of factory calibrate finished
//  844 		  	real_daylight_calc();
//  845     else      							
//  846 			DLL.current_level = DLL.day_level;
//  847 		
//  848 		KO_conf.DayLightLevLux[0] = (DLL.current_level/5)&0x00FF;		//  0515
//  849 		KO_conf.DayLightLevLux[1] = (DLL.current_level/5)>>8;				//  0515
//  850 	}
//  851 }
//  852 */
//  853 

        RSEG CODE:CODE:NOROOT(1)
//  854 void get_dl_level(void)
get_dl_level:
        CFI Block cfiBlock15 Using cfiCommon0
        CFI Function get_dl_level
//  855 {
        FUNCALL get_dl_level, read_adc10bit
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL get_dl_level, real_daylight_calc
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R27
        CFI R27 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        ST      -Y, R26
        CFI R26 Frame(CFA_Y, -2)
        CFI CFA_Y Y+2
//  856 	DLL.getlevel_finish = 0;
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        LDI     R16, 0
        STS     DLL, R16
//  857 	DLL.read_daylightSample = read_adc10bit ( daylight_channel );
        LDI     R16, 3
        CALL    read_adc10bit
        ADIW    R27:R26, 4
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 5
//  858 	DLL.daylight_SampleValue = DLL.daylight_SampleValue + (unsigned int) DLL.read_daylightSample;
        ADIW    R27:R26, 4
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 5
        ADIW    R27:R26, 2
        LD      R18, X+
        LD      R19, X
        ADD     R18, R16
        ADC     R19, R17
        ST      X, R19
        ST      -X, R18
        SBIW    R27:R26, 2
//  859 	DLL.daylight_SampleCount++;
        ADIW    R27:R26, 1
        LD      R16, X
        INC     R16
        ST      X, R16
        SBIW    R27:R26, 1
//  860 	if(DLL.daylight_SampleCount >= 10)				
        LDS     R16, (DLL + 1)
        CPI     R16, 10
        BRCS    ??get_dl_level_0
//  861 	{
//  862 #ifdef DEMOBOARD
//  863 		not_bit(&PORTB,0);
//  864 #endif
//  865 		DLL.daylight_SampleCount = 0;
        LDI     R16, 0
        STS     (DLL + 1), R16
//  866 		DLL.day_level = DLL.daylight_SampleValue / 10;		// ADC value
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        LDI     R20, 10
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        ADIW    R27:R26, 6
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 7
//  867 		DLL.daylight_SampleValue = 0;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
        SBIW    R27:R26, 3
//  868 		DLL.getlevel_finish = 1;		
        LDI     R16, 1
        STS     DLL, R16
//  869 		real_daylight_calc();
        RCALL   real_daylight_calc
//  870 		//	DLL.day_level is ADC value
//  871 		//  DLL.calc_level is the un-corrected value
//  872 		// DLL.current_level is the real value
//  873 
//  874 		KO_conf.DayLightLevLux[0] = (DLL.current_level/5)&0x00FF;		//  low byte
        ADIW    R27:R26, 16
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 17
        LDI     R20, 5
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        STS     (KO_conf + 35), R16
//  875 		KO_conf.DayLightLevLux[1] = (DLL.current_level/5)>>8;				//  higt byte
        ADIW    R27:R26, 16
        LD      R16, X+
        LD      R17, X
        LDI     R20, 5
        LDI     R21, 0
        CALL    ?US_DIVMOD_L02
        STS     (KO_conf + 36), R17
//  876 	}
//  877 }
??get_dl_level_0:
        LD      R26, Y+
        CFI R26 SameValue
        CFI CFA_Y Y+1
        LD      R27, Y+
        CFI R27 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock15
//  878 
//  879 //		(un-corrected value * D.F - PfL*ratio) / D.F + PfL*ratio
//  880 //		un-corrected value + PfL(D.F - 1)
//  881 
//  882 //		(un-corrected value * D.F - PfL) / D.F + PfL
//  883 //		un-corrected value - PfL / D.F + PfL

        RSEG CODE:CODE:NOROOT(1)
//  884 void real_daylight_calc(void)
real_daylight_calc:
        CFI Block cfiBlock16 Using cfiCommon0
        CFI Function real_daylight_calc
//  885 {
        CALL    ?PROLOGUE6_L09
        CFI R5 Frame(CFA_Y, -1)
        CFI R4 Frame(CFA_Y, -2)
        CFI R27 Frame(CFA_Y, -3)
        CFI R26 Frame(CFA_Y, -4)
        CFI R25 Frame(CFA_Y, -5)
        CFI R24 Frame(CFA_Y, -6)
        CFI CFA_Y Y+6
        REQUIRE ?Register_R4_is_cg_reg
        REQUIRE ?Register_R5_is_cg_reg
//  886 	//DLL.calc_level unit is lux
//  887 #ifdef SMT
//  888 	DLL.read_lux = exp10(5 * (double)(DLL.day_level)/1024 * 100000 / RES_VALUE);
//  889 	DLL.calc_level = (unsigned int)DLL.read_lux ;
//  890 #else
//  891 	//DLL.calc_level = (CONST_DAYLIGHT * (unsigned long)DLL.day_level)/100;									// calculate the daylight level (LUX)around the sensor
//  892 	DLL.calc_level = (unsigned int)(g_slope * (double)DLL.day_level);
        LDI     R26, LOW(DLL)
        LDI     R27, (DLL) >> 8
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+6
        LDD     R17, Z+7
        LDI     R18, 0
        LDI     R19, 0
        CALL    ?UL2F_L04
        MOVW    R21:R20, R17:R16
        MOVW    R23:R22, R19:R18
        LDI     R30, LOW(g_slope)
        LDI     R31, (g_slope) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CALL    ?F_MUL_L04
        CALL    ?F2SL_L04
        MOVW    R31:R30, R27:R26
        STD     Z+18, R16
        STD     Z+19, R17
        LDS     R16, (KO_conf + 23)
        TST     R16
        BREQ    $+2+2
        RJMP    ??real_daylight_calc_0
        LDS     R16, (KO_conf + 22)
        TST     R16
        BRNE    $+2+2
        RJMP    ??real_daylight_calc_0
//  893 #endif
//  894 //     DLL.calc_level = (DLL.setpoint_M * DLL.day_level)/10;									// calculate the daylight level (LUX)around the sensor
//  895 	
//  896 //		DLL.current_level = DLL.calc_level;
//  897 	if((KO_conf.TypeLoop == 0)&&(KO_conf.DF !=0))														// default :KO_conf.DF=5(ceiling sensor),KO_conf.DF=1(wall sensor)
//  898 	{
//  899 		if((Sensor_mode.power_on_flag == 1)&&(DLL.calc_OK_flag == 1))					// 0609
        LDI     R30, LOW(Sensor_mode)
        LDI     R31, (Sensor_mode) >> 8
        LDD     R16, Z+7
        SBRS    R16, 5
        RJMP    ??real_daylight_calc_1
        LDS     R16, (DLL + 23)
        CPI     R16, 1
        BRNE    ??real_daylight_calc_1
//  900 		{
//  901 			if(KO_conf.DF > KO_conf.NF)
        LDS     R16, (KO_conf + 24)
        LDS     R17, (KO_conf + 22)
        CP      R16, R17
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+18
        LDD     R17, Z+19
        LDS     R20, (KO_conf + 24)
        LDI     R21, 0
        BRCC    ??real_daylight_calc_2
//  902 				DLL.current_level = DLL.calc_level*KO_conf.NF/10 + (((unsigned long)DLL.load_provision * KO_conf.status[1])/100) * ((KO_conf.DF - KO_conf.NF) / KO_conf.DF);
        CALL    ?S_EC_MUL_L02
        LDI     R20, 10
        CALL    ?US_DIVMOD_L02
        MOVW    R25:R24, R17:R16
        MOVW    R31:R30, R27:R26
        LDD     R22, Z+14
        LDD     R23, Z+15
        LDS     R20, (KO_conf + 46)
        LDI     R21, 0
        MUL     R23, R21
        MOVW    R19:R18, R1:R0
        MUL     R22, R20
        MOVW    R17:R16, R1:R0
        MUL     R23, R20
        ADD     R17, R0
        ADC     R18, R1
        ADC     R19, R21
        LDI     R20, 100
        LDI     R22, 0
        LDI     R23, 0
        CALL    ?UL_DIVMOD_L03
        MOVW    R5:R4, R17:R16
        LDS     R16, (KO_conf + 22)
        LDI     R17, 0
        LDS     R18, (KO_conf + 24)
        SUB     R16, R18
        SBCI    R17, 0
        LDS     R20, (KO_conf + 22)
        LDI     R21, 0
        CALL    ?SS_DIVMOD_L02
        MOVW    R21:R20, R5:R4
        CALL    ?S_EC_MUL_L02
        ADD     R24, R16
        ADC     R25, R17
        MOVW    R31:R30, R27:R26
        STD     Z+16, R24
        STD     Z+17, R25
        RJMP    ??real_daylight_calc_0
//  903 			else
//  904 				DLL.current_level = DLL.calc_level * KO_conf.NF / 10;
//  905 			//DLL.current_level = DLL.calc_level - ((((unsigned long)DLL.load_provision)*KO_conf.status[1])/100)*KO_conf.DF / 10; //Reyno 0722
//  906 			//DLL.current_level = DLL.calc_level;	//DLL.current_level*KO_conf.DF/10;    //Reyno 0722		
//  907 		}
//  908 		else
//  909 		{
//  910 			DLL.current_level = DLL.calc_level * KO_conf.NF / 10;	//DLL.current_level*KO_conf.DF/10;
??real_daylight_calc_1:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+18
        LDD     R17, Z+19
        LDS     R20, (KO_conf + 24)
        LDI     R21, 0
??real_daylight_calc_2:
        CALL    ?S_EC_MUL_L02
        LDI     R20, 10
        CALL    ?US_DIVMOD_L02
        MOVW    R31:R30, R27:R26
        STD     Z+16, R16
        STD     Z+17, R17
//  911 		}
//  912 		//DLL.current_level = DLL.calc_level * KO_conf.DF / 10;	//DLL.current_level*KO_conf.DF/10;
//  913 	}
//  914 }
??real_daylight_calc_0:
        LDI     R30, 6
        JMP     ?EPILOGUE_B6_L09
        CFI EndBlock cfiBlock16
//  915 //******************************************************************************
//  916 //			timer for Pir and US cycle
//  917 //			200us each interupt
//  918 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  919 void timer0_enable(void)
timer0_enable:
        CFI Block cfiBlock17 Using cfiCommon0
        CFI Function timer0_enable
//  920 {
//  921 	ASSR = 0x00;
        LDI     R16, 0
        STS     _A_ASSR, R16
//  922 	TCCR0A = 0x00;
        OUT     0x24, R16
//  923 	TCCR0B = 0x03;
        LDI     R16, 3
        OUT     0x25, R16
//  924 	TCNT0 = 0x8D;
        LDI     R16, 141
        OUT     0x26, R16
//  925 	OCR0A = 0x00;
        LDI     R16, 0
        OUT     0x27, R16
//  926 	OCR0B = 0x00;
        OUT     0x28, R16
//  927 	SetBit(TIMSK0,TOIE0);
        LDS     R16, 110
        ORI     R16, 0x01
        STS     110, R16
//  928 }
        RET
        CFI EndBlock cfiBlock17
        REQUIRE _A_ASSR
        REQUIRE _A_TIMSK0
        REQUIRE _A_OCR0B
        REQUIRE _A_OCR0A
        REQUIRE _A_TCNT0
        REQUIRE _A_TCCR0B
        REQUIRE _A_TCCR0A
//  929 
//  930 //******************************************************************************
//  931 //			timer for time delay, 1ms
//  932 //******************************************************************************

        RSEG CODE:CODE:NOROOT(1)
//  933 void timer2_enable(void)
timer2_enable:
        CFI Block cfiBlock18 Using cfiCommon0
        CFI Function timer2_enable
//  934 {
//  935 	/*
//  936 	TCCR0A = (1<<COM0A1)|(0<<COM0A0)|(1<<WGM01)|(0<<WGM00);	// match on clear
//  937 	TCCR0B = (0<<WGM02)|(0<<CS02)|(1<<CS01)|(1<<CS00);			// CLOCK/64
//  938 	TIMSK0 = (1<<OCIE0A);				        										// enable COMPARE MATCH A interrupt
//  939 	TIFR0 = (1<<OCF0A);
//  940 	OCR0A = 21;																							//200us each interupt
//  941 	*/
//  942 	// Timer/Counter 0 initialization
//  943 	// Clock source: System Clock
//  944 	// Clock value: 7372.800 kHz
//  945 	// Mode: Normal top=FFh
//  946 	// OC0A output: Disconnected
//  947 	// OC0B output: Disconnected
//  948 	
//  949 	/*
//  950 	TCCR2A=0x00;
//  951 	TCCR2B=0x01;
//  952 	TCNT2=0x00;
//  953 	OCR2A=0x00;
//  954 	OCR2B=0x00;
//  955 	TIMSK2=0x01;
//  956 	*/
//  957 	
//  958 	/*
//  959 	ASSR=0x00;
//  960 TCCR2A=0xF0;
//  961 TCCR2B=0x01;
//  962 TCNT2=0x00;
//  963 OCR2A=0xB8;
//  964 OCR2B=0x5C;
//  965 	*/
//  966 	TCCR2A=0xC1;          //0x43
        LDI     R16, 193
        STS     _A_TCCR2A, R16
//  967 	TCCR2B = 0xC1;      //0x19
        STS     _A_TCCR2B, R16
//  968 	//TCNT2=0x50;
//  969 	OCR2A=ee_back_light_duty;
        LDI     R20, LOW(ee_back_light_duty)
        LDI     R21, (ee_back_light_duty) >> 8
        CALL    __eeget8_16
        STS     _A_OCR2A, R16
//  970 	//OCR2B = 0x40;
//  971 }
        RET
        CFI EndBlock cfiBlock18
        REQUIRE _A_OCR2A
        REQUIRE _A_TCCR2B
        REQUIRE _A_TCCR2A
//  972 
//  973 /*
//  974 unsigned char motion_detect(unsigned char mode)      // add by alan on 20090409
//  975 {
//  976 		switch(mode)
//  977       {
//  978             case 1:
//  979 								if(PIR_detection_en ==1)	return 1;
//  980 								else return 0;
//  981             case 2:
//  982 								if(US_detection_en ==1)	return 1;
//  983 								else return 0;
//  984             case 3:
//  985                 if((PIR_detection_en ==1)&&(US_detection_en ==1))
//  986 									return 1;
//  987                 else
//  988 									return 0;
//  989             case 4:
//  990                 if((PIR_detection_en ==1)||(US_detection_en ==1))
//  991 									return 1;
//  992                 else
//  993 									return 0;
//  994             default:  return 0;
//  995       }
//  996 }
//  997 */
//  998 

        RSEG CODE:CODE:NOROOT(1)
//  999 unsigned char motion_detect(unsigned char mode)
motion_detect:
        CFI Block cfiBlock19 Using cfiCommon0
        CFI Function motion_detect
// 1000 {
        FUNCALL motion_detect, PIR_detect
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL motion_detect, get_us
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL motion_detect, PIR_detect
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL motion_detect, get_us
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL motion_detect, get_us
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL motion_detect, PIR_detect
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL motion_detect, PIR_detect
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R24
        CFI R24 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
// 1001 	unsigned char temp = 0;
// 1002 	switch(mode)
        SUBI    R16, 1
        BREQ    ??motion_detect_0
        DEC     R16
        BREQ    ??motion_detect_1
        DEC     R16
        BREQ    ??motion_detect_2
        DEC     R16
        BREQ    ??motion_detect_3
        RJMP    ??motion_detect_4
// 1003 	{
// 1004 		case 1:				//PIR only
// 1005 			US_OFF;
??motion_detect_0:
        SBI     0x08, 0x02
// 1006 			temp = PIR_detect();
        CALL    PIR_detect
        MOV     R24, R16
// 1007 			//PIR_detect();
// 1008 			asm("nop");
        nop
// 1009 			if(temp)
        TST     R24
        BREQ    ??motion_detect_5
// 1010 				asm("nop");
        nop
// 1011 			return temp;
        RJMP    ??motion_detect_5
// 1012 			
// 1013 		case 2:				//US only
// 1014 			US_ON;
??motion_detect_1:
        CBI     0x08, 0x02
// 1015 			get_us();
        RCALL   get_us
// 1016 			return US_detection_en;
        LDS     R16, US_detection_en
        RJMP    ??motion_detect_5
// 1017 
// 1018 		case 3:				//PIR and US
// 1019 			US_ON;
??motion_detect_2:
        CBI     0x08, 0x02
// 1020 			temp = PIR_detect();
        CALL    PIR_detect
        MOV     R24, R16
// 1021 			//PIR_detect();
// 1022 			get_us();
        RCALL   get_us
// 1023 			if(US_detection_en && temp)
        LDS     R16, US_detection_en
        TST     R16
        BREQ    ??motion_detect_3
        TST     R24
        BREQ    ??motion_detect_3
// 1024 				return 1;
??motion_detect_6:
        LDI     R16, 1
        RJMP    ??motion_detect_5
// 1025 
// 1026 		case 4:				//PIR or US
// 1027 			US_ON;
??motion_detect_3:
        CBI     0x08, 0x02
// 1028 			get_us();
        RCALL   get_us
// 1029 			PIR_detect();
        CALL    PIR_detect
// 1030 			if(US_detection_en || PIR_detect())
        LDS     R16, US_detection_en
        TST     R16
        BRNE    ??motion_detect_6
        CALL    PIR_detect
        TST     R16
        BRNE    ??motion_detect_6
// 1031 				return 1;
// 1032 
// 1033 		default:
// 1034 			return 0;				
??motion_detect_4:
        LDI     R16, 0
??motion_detect_5:
        LD      R24, Y+
        CFI R24 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock19
        REQUIRE _A_PORTC
// 1035 	}
// 1036 }
// 1037 
// 1038 
// 1039 /******************************************************************************
// 1040 *	USIR tools		// alan 0604
// 1041 ******************************************************************************/

        RSEG CODE:CODE:NOROOT(1)
// 1042 unsigned char get_us(void)
get_us:
        CFI Block cfiBlock20 Using cfiCommon0
        CFI Function get_us
// 1043 {
        FUNCALL get_us, us_detection
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL get_us, delay_us
        LOCFRAME CSTACK, 1, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R24
        CFI R24 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
// 1044 	unsigned char i;
// 1045 	if(Time_delay.IR.time_out)
        LDS     R16, (Time_delay + 234)
        TST     R16
        BREQ    ??get_us_0
// 1046 	{
// 1047 		US_detection_en = 0;
        LDI     R16, 0
        STS     US_detection_en, R16
// 1048 		for(i=0;i<10;i++)
        LDI     R24, 0
        RJMP    ??get_us_1
??get_us_2:
        INC     R24
??get_us_1:
        CPI     R24, 10
        BRCC    ??get_us_0
// 1049 		{
// 1050 			us_detection();
        CALL    us_detection
// 1051 			delay_us(100);
        LDI     R16, 100
        LDI     R17, 0
        CALL    delay_us
// 1052 			if(US_detection_en == 1)
        LDS     R16, US_detection_en
        CPI     R16, 1
        BRNE    ??get_us_2
// 1053 				return 1;
        LDI     R16, 1
        RJMP    ??get_us_3
// 1054 			//else
// 1055 			//	return 0;
// 1056 		}
// 1057 	}
// 1058 	return 0;
??get_us_0:
        LDI     R16, 0
??get_us_3:
        LD      R24, Y+
        CFI R24 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock20
// 1059 }
// 1060 

        RSEG CODE:CODE:NOROOT(1)
// 1061 void load_update(unsigned char status)
load_update:
        CFI Block cfiBlock21 Using cfiCommon0
        CFI Function load_update
// 1062 {
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, send_frame_pp_broad
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, send_frame_pp_ext
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, send_frame_pp_broad
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, send_frame_pp_broad
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, CharToStr
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL load_update, send_frame_pp_broad
        LOCFRAME CSTACK, 33, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R24
        CFI R24 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        SBIW    R29:R28, 32
        CFI CFA_Y Y+33
        MOV     R24, R16
// 1063   unsigned char buffer_short[9] = "00001200";
        MOVW    R19:R18, R29:R28
        SUBI    R18, 253
        SBCI    R19, 255
        MOVW    R17:R16, R19:R18
        LDI     R30, LOW(`?<Constant "00001200">`)
        LDI     R31, (`?<Constant "00001200">`) >> 8
        LDI     R20, 9
        LDI     R21, 0
        CALL    ?ML_FLASH_SRAM_16EC_16_L07
// 1064   unsigned char buffer_tx[17] = "D10001420D000000";
        MOVW    R19:R18, R29:R28
        SUBI    R18, 241
        SBCI    R19, 255
        MOVW    R17:R16, R19:R18
        LDI     R20, 17
        CALL    ?ML_FLASH_SRAM_16EC_16_L07
// 1065   unsigned char buffer[3];
// 1066   unsigned char buffer_add[3];
// 1067 
// 1068   buffer[2] = 0;
        STD     Y+2, R20
        MOVW    R19:R18, R29:R28
        SUBI    R18, 244
        SBCI    R19, 255
        LDS     R16, (KO_conf + 2)
// 1069 
// 1070   CharToStr(KO_conf.DesAdd,buffer_add);
        CALL    CharToStr
// 1071 
// 1072   switch (KO_conf.AddressType)
        LDS     R16, (KO_conf + 1)
        SUBI    R16, 0
        BREQ    ??load_update_0
        DEC     R16
        BREQ    ??load_update_1
        DEC     R16
        BREQ    ??load_update_2
        DEC     R16
        BRNE    $+2+2
        RJMP    ??load_update_3
        RJMP    ??load_update_4
// 1073   {
// 1074     case 0x00://p to p
// 1075         CharToStr(KO_conf.DesAdd,buffer);
??load_update_0:
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 2)
        CALL    CharToStr
// 1076 				buffer_short[0] = buffer[0];
        LD      R16, Y
        STD     Y+3, R16
// 1077 				buffer_short[1] = buffer[1];
        LDD     R16, Y+1
        STD     Y+4, R16
// 1078         CharToStr(status,buffer);
        MOVW    R19:R18, R29:R28
        MOV     R16, R24
        CALL    CharToStr
// 1079         buffer_short[6] = buffer[0];
        LD      R16, Y
        STD     Y+9, R16
// 1080         buffer_short[7] = buffer[1];
        LDD     R16, Y+1
        STD     Y+10, R16
// 1081 				send_frame_pp_broad(buffer_short,TRANS_DELAY); //0707
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_broad
// 1082 
// 1083         CharToStr(status,buffer);
        MOVW    R19:R18, R29:R28
        MOV     R16, R24
        CALL    CharToStr
// 1084         buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+25, R16
// 1085         buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+26, R16
// 1086 				send_frame_pp_ext(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 241
        SBCI    R17, 255
        CALL    send_frame_pp_ext
        RJMP    ??load_update_4
// 1087     break;
// 1088 
// 1089     case 0x01://area
// 1090       buffer_short[0] = 'B';
??load_update_1:
        LDI     R16, 66
        STD     Y+3, R16
// 1091 		  buffer_short[1] = '3';
        LDI     R16, 51
        STD     Y+4, R16
// 1092       CharToStr(KO_conf.DesAdd,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 2)
        CALL    CharToStr
// 1093 			buffer_short[2] = buffer[0];
        LD      R16, Y
        STD     Y+5, R16
// 1094 			buffer_short[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+6, R16
// 1095       CharToStr(status,buffer);
        RJMP    ??load_update_5
// 1096       buffer_short[6] = buffer[0];
// 1097       buffer_short[7] = buffer[1];
// 1098 			send_frame_pp_broad(buffer_short,TRANS_DELAY); //0707
// 1099     break;
// 1100 
// 1101     case 0x02://group
// 1102       buffer_short[0] = 'B';
??load_update_2:
        LDI     R16, 66
        STD     Y+3, R16
// 1103 		  buffer_short[1] = '5';
        LDI     R16, 53
        STD     Y+4, R16
// 1104 		  CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 1105 		  buffer_short[2] = buffer[0];
        LD      R16, Y
        STD     Y+5, R16
// 1106 		  buffer_short[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+6, R16
// 1107 		  send_frame_pp_broad(buffer_short,TRANS_DELAY);
        RJMP    ??load_update_6
// 1108     break;
// 1109 
// 1110     case 0x03://general
// 1111       buffer_short[0] = 'B';
??load_update_3:
        LDI     R16, 66
        STD     Y+3, R16
// 1112 			buffer_short[1] = '1';
        LDI     R16, 49
        STD     Y+4, R16
// 1113       CharToStr(status,buffer);
??load_update_5:
        MOVW    R19:R18, R29:R28
        MOV     R16, R24
        CALL    CharToStr
// 1114       buffer_short[6] = buffer[0];
        LD      R16, Y
        STD     Y+9, R16
// 1115       buffer_short[7] = buffer[1];
        LDD     R16, Y+1
        STD     Y+10, R16
// 1116 			send_frame_pp_broad(buffer_short,TRANS_DELAY); //0707
??load_update_6:
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_broad
// 1117     break;
// 1118 
// 1119     default:break;
// 1120   }
// 1121 }
??load_update_4:
        ADIW    R29:R28, 32
        CFI CFA_Y Y+1
        LD      R24, Y+
        CFI R24 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock21
// 1122 

        RSEG CODE:CODE:NOROOT(1)
// 1123 void button_press_detect(void)
button_press_detect:
        CFI Block cfiBlock22 Using cfiCommon0
        CFI Function button_press_detect
// 1124 {
// 1125 	if(!get_key())
        FUNCALL button_press_detect, get_key
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL button_press_detect, key_time_clear
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL button_press_detect, get_key
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    get_key
        TST     R16
        BRNE    ??button_press_detect_0
// 1126 	{
// 1127 		if(Time_delay.LPB.enabled == 1)
        LDS     R16, (Time_delay + 125)
        CPI     R16, 1
        BRNE    ??button_press_detect_1
// 1128 		{
// 1129 			if(Time_delay.LPB.count != 0)
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        OR      R16, R17
        OR      R16, R18
        OR      R16, R19
        BREQ    ??button_press_detect_1
// 1130 			{
// 1131 				if( Time_delay.LPB.count < 1000 )
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CPI     R16, 232
        LDI     R20, 3
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCC    ??button_press_detect_2
// 1132 				{
// 1133 					key_result.short_pressed = 1;
        LDI     R16, 1
        STS     key_result, R16
        RJMP    ??button_press_detect_3
// 1134 					//buzzer_ms(100);					//20090211
// 1135 				}
// 1136 				else if( Time_delay.LPB.count > 3000 )
??button_press_detect_2:
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CPI     R16, 185
        LDI     R20, 11
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCS    ??button_press_detect_3
// 1137 				{
// 1138 					key_result.long_pressed = 1;
        LDI     R16, 1
        STS     (key_result + 1), R16
// 1139 					//buzzer_ms(200);					//20090211
// 1140 				}
// 1141 				key_time_clear();
??button_press_detect_3:
        CALL    key_time_clear
// 1142 			}
// 1143 		}
// 1144 
// 1145 		Time_delay.LPB.count = 0;
??button_press_detect_1:
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 1146 		Time_delay.LPB.enabled = 0;
        STS     (Time_delay + 125), R16
        RET
// 1147 	}
// 1148 	else if(get_key())
??button_press_detect_0:
        CALL    get_key
        TST     R16
        BREQ    ??button_press_detect_4
// 1149 	{
// 1150 		Time_delay.LPB.enabled = 1;
        LDI     R16, 1
        STS     (Time_delay + 125), R16
// 1151 	}
// 1152 }
??button_press_detect_4:
        RET
        CFI EndBlock cfiBlock22
// 1153 

        RSEG CODE:CODE:NOROOT(1)
// 1154 void button_release_detect(void)
button_release_detect:
        CFI Block cfiBlock23 Using cfiCommon0
        CFI Function button_release_detect
// 1155 {
// 1156 	if(!get_key())
        FUNCALL button_release_detect, get_key
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    get_key
        TST     R16
        BRNE    ??button_release_detect_0
// 1157 	{
// 1158 		Time_delay.LPB.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 1159 		Time_delay.LPB.enabled = 0;
        STS     (Time_delay + 125), R16
// 1160 	}
// 1161 }
??button_release_detect_0:
        RET
        CFI EndBlock cfiBlock23
// 1162 

        RSEG CODE:CODE:NOROOT(1)
// 1163 unsigned char scs_pnl_advance_master(void)
scs_pnl_advance_master:
        CFI Block cfiBlock24 Using cfiCommon0
        CFI Function scs_pnl_advance_master
// 1164 {
        FUNCALL scs_pnl_advance_master, led_blinking
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, timer_flex_initial
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking_disable
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, timer_flex_initial
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking_stage2_initial
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_group_pnl_frame
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, factory_default
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, system_reset
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking_disable
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, timer_flex_initial
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, strncpy
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, timer_flex_initial
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_group_pnl_frame
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_group_pnl_frame
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_group_pnl_frame
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, delay_ms
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_group_pnl_frame
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, strncpy
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking_disable
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, StrToChar
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, strncpy
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, led_blinking_disable
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, strncpy
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, strncpy
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_master, PnL_ad_end
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        SBIW    R29:R28, 20
        CFI CFA_Y Y+20
// 1165 	char buffer_tx[17] = "D20001428C220940";
        MOVW    R19:R18, R29:R28
        SUBI    R18, 253
        SBCI    R19, 255
        MOVW    R17:R16, R19:R18
        LDI     R30, LOW(`?<Constant "D20001428C220940">`)
        LDI     R31, (`?<Constant "D20001428C220940">`) >> 8
        LDI     R20, 17
        LDI     R21, 0
        CALL    ?ML_FLASH_SRAM_16EC_16_L07
// 1166 	char buffer[3];
// 1167 
// 1168   buffer[2] = 0;
        STD     Y+2, R20
// 1169 
// 1170 	static struct
// 1171 	{
// 1172 		unsigned char A;
// 1173 		unsigned char PL;
// 1174 		unsigned char flag;
// 1175 		unsigned char group_create_flag;
// 1176 	}ptop;
// 1177 
// 1178 	static unsigned char conf_3s;
// 1179 	//KO_conf.GR = 1;
// 1180 	if( state.main_state == STATE_NORMAL )
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        OR      R16, R17
        BRNE    ??scs_pnl_advance_master_0
        LDS     R16, key_result
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_0
// 1181 	{
// 1182 		if(key_result.short_pressed == 1)
// 1183 		{
// 1184 			key_result.short_pressed = 0;
        STS     key_result, R20
// 1185 			state.main_state = PNL_AD_CONFED_STEP1;
        LDI     R16, 7
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1186 			led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1187       timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        CALL    timer_flex_initial
// 1188 		}
// 1189 	}
// 1190 
// 1191 	if( state.main_state == PNL_AD_CONFED_STEP1 )
??scs_pnl_advance_master_0:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 7
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_master_1
// 1192 	{
// 1193 		if(Time_delay.timer_flex.time_out == 1)
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_2
// 1194 		{
// 1195 			led_blinking_disable(0);
??scs_pnl_advance_master_3:
        LDI     R16, 0
        CALL    led_blinking_disable
// 1196 			state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
// 1197 			return 0;
        RJMP    ??scs_pnl_advance_master_4
// 1198 		}
??scs_pnl_advance_master_2:
        LDS     R16, key_result
        CPI     R16, 1
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_master_5
// 1199 		else if( key_result.short_pressed == 1 )
// 1200 		{
// 1201 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1202 			state.main_state = PNL_AD_CONFED_STEP2;
        LDI     R16, 8
        STS     (state + 2), R16
        STS     (state + 3), R18
// 1203 			timer_flex_initial(600000);
        LDI     R16, 192
        LDI     R17, 39
        LDI     R18, 9
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1204 			led_blinking_stage2_initial(600000);
        LDI     R16, 192
        LDI     R17, 39
        LDI     R18, 9
        LDI     R19, 0
        CALL    led_blinking_stage2_initial
// 1205 			led_blinking(250,250);
        LDI     R20, 250
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 250
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1206 			send_frame_pp_broad("B0009900",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW(`?<Constant "B0009900">`)
        LDI     R17, (`?<Constant "B0009900">`) >> 8
        CALL    send_frame_pp_broad
        LDS     R16, (KO_conf + 6)
        TST     R16
        BREQ    ??scs_pnl_advance_master_6
// 1207 
// 1208 			if(KO_conf.GR != 0)
// 1209 			{
// 1210 				CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 1211 				buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 1212 				buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 1213 				send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
??scs_pnl_advance_master_7:
        CALL    send_frame_pp_ext_broad
        RJMP    ??scs_pnl_advance_master_1
// 1214 			}
// 1215 			else
// 1216 			{
// 1217 				state.main_state = PNL_AD_CONFED_STEP8;
??scs_pnl_advance_master_6:
        LDI     R16, 14
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1218 				send_frame_pp_ext_broad("D20001428C000940",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 9))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 9))
        RJMP    ??scs_pnl_advance_master_7
// 1219 			}
// 1220 		}			
// 1221 		else if(Time_delay.LPB.count > 10000)				// group initial
??scs_pnl_advance_master_5:
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CPI     R16, 17
        LDI     R20, 39
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCS    ??scs_pnl_advance_master_1
// 1222 		{
// 1223       Time_delay.LPB.count = 0;
        ST      Z, R20
        STD     Z+1, R20
        STD     Z+2, R20
        STD     Z+3, R20
// 1224       ee_flags.manual_initialize = 1;
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeget16_16
        ORI     R16, 0x01
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeput16_16
// 1225 			send_group_pnl_frame(SET,KO_conf.GR,GROUP_RELEASE);
        LDI     R18, 55
        LDS     R17, (KO_conf + 6)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1226       factory_default();
        CALL    factory_default
// 1227 			system_reset();
        CALL    system_reset
// 1228 		}
// 1229 	}
// 1230 
// 1231 	if( state.main_state == PNL_AD_CONFED_STEP2 )      //group remove
??scs_pnl_advance_master_1:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 8
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_master_8
        LDS     R16, key_result
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_9
// 1232 	{
// 1233 		if(key_result.short_pressed == 1)								//state 6 is here
// 1234 		{
// 1235 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1236 			led_blinking_disable(0);
        RCALL   led_blinking_disable
// 1237       timer_flex_initial(100);    //for close the procedure
        LDI     R16, 100
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
        LDS     R16, (KO_conf + 5)
        TST     R16
        BRNE    ??scs_pnl_advance_master_10
// 1238 			if(KO_conf.Reference == 0)
// 1239 			{
// 1240 				strncpy(buffer_tx,"B5001500",17);
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW((`?<Constant "B0009900">` + 26))
        LDI     R19, HIGH((`?<Constant "B0009900">` + 26))
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
// 1241 				CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 1242 				buffer_tx[2] = buffer[0];
        LD      R16, Y
        STD     Y+5, R16
// 1243 				buffer_tx[3] = buffer[1];
        LDD     R16, Y+1
        STD     Y+6, R16
// 1244 				send_frame_pp_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_broad
// 1245         timer_flex_initial(3000);
        LDI     R16, 184
        LDI     R17, 11
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1246 				conf_3s = 1;
        LDI     R16, 1
        STS     (??ptop + 4), R16
// 1247 			}
// 1248 			state.main_state = PNL_AD_CONFED_STEP6;
??scs_pnl_advance_master_10:
        LDI     R16, 12
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1249 		}
// 1250 
// 1251 		if(Time_delay.LPB.count > 10000)
??scs_pnl_advance_master_9:
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CPI     R16, 17
        LDI     R20, 39
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCC    $+2+2
        RJMP    ??scs_pnl_advance_master_8
// 1252 		{
// 1253       key_result.short_pressed = 0;
        STS     key_result, R20
// 1254 			key_result.long_pressed = 0;
        STS     (key_result + 1), R20
        LDS     R16, (KO_conf + 5)
        TST     R16
        BREQ    ??scs_pnl_advance_master_11
// 1255 
// 1256 			if(KO_conf.Reference != 0)
// 1257 				send_group_pnl_frame(SET,KO_conf.Reference,REF_TRANS);
        LDI     R18, 51
        LDS     R17, (KO_conf + 5)
        LDI     R16, 50
        CALL    send_group_pnl_frame
??scs_pnl_advance_master_11:
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeget16_16
        ANDI    R16, 0x02
        BREQ    ??scs_pnl_advance_master_12
// 1258 			
// 1259 			if(ee_flags.PnG_confed)
// 1260 			{
// 1261 				KO_conf.Reference = ee_variable.Reference;
        LDI     R20, LOW((ee_variable + 1))
        LDI     R21, HIGH((ee_variable + 1))
        CALL    __eeget8_16
        STS     (KO_conf + 5), R16
// 1262 				ee_KO_conf.Reference = ee_variable.Reference;
        LDI     R20, LOW((ee_variable + 1))
        LDI     R21, HIGH((ee_variable + 1))
        CALL    __eeget8_16
        RJMP    ??scs_pnl_advance_master_13
// 1263 			}
// 1264 			else
// 1265 			{
// 1266 				KO_conf.Reference = 0;
??scs_pnl_advance_master_12:
        LDI     R16, 0
        STS     (KO_conf + 5), R16
// 1267 				ee_KO_conf.Reference = 0;
??scs_pnl_advance_master_13:
        LDI     R20, LOW((ee_KO_conf + 5))
        LDI     R21, HIGH((ee_KO_conf + 5))
        CALL    __eeput8_16
// 1268 			}
// 1269 			
// 1270 			send_group_pnl_frame(SET,KO_conf.GR,GROUP_END_PNL);
        LDI     R18, 70
        LDS     R17, (KO_conf + 6)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1271 			send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 1272 			send_group_pnl_frame(SET,KO_conf.GR,GROUP_ERASE);
        LDI     R18, 52
        LDS     R17, (KO_conf + 6)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1273 			led_blinking(60,200);
        LDI     R20, 200
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 60
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1274       delay_ms(5000);
        LDI     R16, 136
        LDI     R17, 19
        CALL    delay_ms
// 1275       state.main_state = NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
??scs_pnl_advance_master_8:
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_master_14
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 33
        BRNE    ??scs_pnl_advance_master_14
        LDS     R16, (KO_conf + 5)
        TST     R16
        BRNE    ??scs_pnl_advance_master_14
// 1276 		}
// 1277 	}
// 1278 
// 1279 	if((g_asc_reception_buffer[6] == 0x09) && (g_asc_reception_buffer[7] == 0x21))
// 1280 	{
// 1281 		if(KO_conf.Reference == 0)
// 1282 		{
// 1283 			KO_conf.Reference = g_asc_reception_buffer[1];
        LDS     R16, (g_asc_reception_buffer + 1)
        STS     (KO_conf + 5), R16
// 1284 			ee_KO_conf.Reference = g_asc_reception_buffer[1];
        LDS     R16, (g_asc_reception_buffer + 1)
        LDI     R20, LOW((ee_KO_conf + 5))
        LDI     R21, HIGH((ee_KO_conf + 5))
        CALL    __eeput8_16
// 1285 		}
// 1286 	}	
// 1287 		
// 1288 	if( state.main_state == PNL_AD_CONFED_STEP6)
??scs_pnl_advance_master_14:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 12
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_master_15
// 1289 	{
// 1290 		if(conf_3s == 1)
        LDI     R30, LOW(??ptop)
        LDI     R31, (??ptop) >> 8
        LDD     R16, Z+4
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_16
// 1291 		{
// 1292 			if((g_asc_reception_buffer[6] == 0x09) && (g_asc_reception_buffer[7] == 0x21))
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_master_16
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 33
        BRNE    ??scs_pnl_advance_master_16
// 1293 			{
// 1294 				conf_3s = 0;
        LDI     R16, 0
        STD     Z+4, R16
        LDS     R16, (g_asc_reception_buffer + 1)
        STS     (KO_conf + 5), R16
// 1295 				KO_conf.Reference = g_asc_reception_buffer[1];
// 1296 				ee_KO_conf.Reference = KO_conf.Reference;
        LDS     R16, (KO_conf + 5)
        LDI     R20, LOW((ee_KO_conf + 5))
        LDI     R21, HIGH((ee_KO_conf + 5))
        CALL    __eeput8_16
// 1297 			}
// 1298 		}
// 1299 
// 1300 		if(Time_delay.timer_flex.time_out == 1)
??scs_pnl_advance_master_16:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_15
// 1301 		{
// 1302 			state.main_state = PNL_AD_CONFED_STEP7;
        LDI     R16, 13
        STS     (state + 2), R16
        STS     (state + 3), R18
// 1303 		}
// 1304 	}
// 1305 
// 1306 	if( state.main_state == PNL_AD_CONFED_STEP7)
??scs_pnl_advance_master_15:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 13
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_master_17
        LDS     R16, (KO_conf + 5)
        TST     R16
        BREQ    ??scs_pnl_advance_master_18
// 1307 	{
// 1308 		if(KO_conf.Reference != 0)
// 1309 				send_group_pnl_frame(SET,KO_conf.Reference,REF_TRANS);
        LDI     R18, 51
        LDS     R17, (KO_conf + 5)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1310 		
// 1311 		strncpy(buffer_tx,"D20001428C22094F",17);
??scs_pnl_advance_master_18:
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW((`?<Constant "B0009900">` + 44))
        LDI     R19, HIGH((`?<Constant "B0009900">` + 44))
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
// 1312 		CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 1313 		buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 1314 		buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 1315 		send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
// 1316 
// 1317 		send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 1318 
// 1319 		led_blinking_disable(0);
        LDI     R16, 0
        RCALL   led_blinking_disable
// 1320 		state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
// 1321 	}
// 1322 
// 1323 	if( state.main_state == PNL_AD_CONFED_STEP8 )
??scs_pnl_advance_master_17:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 14
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_master_19
// 1324 	{
// 1325 		/////////////////////////////////////////////////
// 1326 		///      for solve GR==0         ////////////////
// 1327 		if( key_result.short_pressed )
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_advance_master_20
// 1328 		{
// 1329 			state.main_state = PNL_AD_CONFED_STEP90;
        LDI     R16, 17
        STS     (state + 2), R16
        STS     (state + 3), R18
// 1330 		}
// 1331 		/////////////////////////////////////////////////
// 1332 		if( (g_asc_short_buffer[0] == 0xB8) && (g_asc_short_buffer[2] == 0x12))
??scs_pnl_advance_master_20:
        LDS     R16, g_asc_short_buffer
        CPI     R16, 184
        BRNE    ??scs_pnl_advance_master_21
        LDS     R16, (g_asc_short_buffer + 2)
        CPI     R16, 18
        BRNE    ??scs_pnl_advance_master_21
// 1333 		{
// 1334 			ptop.A = g_short_buffer[2];
        LDI     R30, LOW(??ptop)
        LDI     R31, (??ptop) >> 8
        LDS     R16, (g_short_buffer + 2)
        ST      Z, R16
// 1335 			ptop.PL = g_short_buffer[3];
        LDS     R16, (g_short_buffer + 3)
        STD     Z+1, R16
// 1336 			ptop.flag = 1;
        LDI     R16, 1
        STD     Z+2, R16
// 1337 			state.main_state = PNL_AD_CONFED_STEP81;			//ptop step 3
        LDI     R16, 15
        STS     (state + 2), R16
        STS     (state + 3), R18
// 1338 		}
// 1339 		if((g_asc_reception_buffer[6] == 0x09) && (g_asc_reception_buffer[7] == 0x41))
??scs_pnl_advance_master_21:
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_master_22
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 65
        BRNE    ??scs_pnl_advance_master_22
// 1340 		{
// 1341 			send_frame_pp_ext_broad("D20001428C000945",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 61))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 61))
        CALL    send_frame_pp_ext_broad
// 1342 			state.main_state = PNL_AD_CONFED_STEP9;
        LDI     R16, 16
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1343 		}
// 1344 
// 1345 		//add timeout
// 1346 		if(Time_delay.timer_flex.time_out == 1)
??scs_pnl_advance_master_22:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    $+2+2
        RJMP    ??scs_pnl_advance_master_3
// 1347 		{
// 1348 			led_blinking_disable(0);
// 1349 			state.main_state = STATE_NORMAL;
// 1350 			return 0;
// 1351 		}
// 1352 	}
// 1353 
// 1354 	if( state.main_state == PNL_AD_CONFED_STEP81 )
??scs_pnl_advance_master_19:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 15
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_master_23
        LDS     R16, (key_result + 1)
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_24
// 1355 	{
// 1356 		if( key_result.long_pressed == 1 )
// 1357 		{
// 1358 			key_result.long_pressed = 0;
        LDI     R16, 0
        STS     (key_result + 1), R16
        LDI     R16, LOW(??ptop)
        LDI     R17, (??ptop) >> 8
// 1359 
// 1360 			KO_conf.Reference = StrToChar(&ptop.A);
        CALL    StrToChar
        STS     (KO_conf + 5), R16
// 1361 			ee_KO_conf.Reference = KO_conf.Reference;
        LDS     R16, (KO_conf + 5)
        LDI     R20, LOW((ee_KO_conf + 5))
        LDI     R21, HIGH((ee_KO_conf + 5))
        CALL    __eeput8_16
// 1362 			
// 1363 			strncpy(buffer_tx,"D20001428C00094F",17);
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW((`?<Constant "B0009900">` + 78))
        LDI     R19, HIGH((`?<Constant "B0009900">` + 78))
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
// 1364 			send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
// 1365 			led_blinking_disable(0);
        LDI     R16, 0
        RCALL   led_blinking_disable
// 1366 			state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
        RJMP    ??scs_pnl_advance_master_25
// 1367 		}
// 1368 		else if((g_asc_reception_buffer[6] == 0x09) && (g_asc_reception_buffer[7] == 0x21))
??scs_pnl_advance_master_24:
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_master_25
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 33
        BRNE    ??scs_pnl_advance_master_25
        LDS     R16, (g_asc_reception_buffer + 1)
        STS     (KO_conf + 2), R16
// 1369 		{
// 1370 			//StrToChar();
// 1371 			KO_conf.DesAdd = g_asc_reception_buffer[1];
// 1372 			ee_KO_conf.DesAdd = KO_conf.DesAdd;
        LDS     R16, (KO_conf + 2)
        LDI     R20, LOW((ee_KO_conf + 2))
        LDI     R21, HIGH((ee_KO_conf + 2))
        CALL    __eeput8_16
// 1373 			send_frame_pp_ext_broad("D20001428C000945",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 61))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 61))
        CALL    send_frame_pp_ext_broad
// 1374 		}
// 1375 
// 1376 		if((g_asc_reception_buffer[6] == 0x09) && (g_asc_reception_buffer[7] == 0x06))
??scs_pnl_advance_master_25:
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_master_26
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 6
        BRNE    ??scs_pnl_advance_master_26
        LDS     R16, (g_asc_reception_buffer + 1)
        STS     (KO_conf + 2), R16
        LDS     R16, (KO_conf + 2)
        LDI     R20, LOW((ee_KO_conf + 2))
        LDI     R21, HIGH((ee_KO_conf + 2))
        CALL    __eeput8_16
// 1377 		{
// 1378 			//StrToChar();
// 1379 			KO_conf.DesAdd = g_asc_reception_buffer[1];
// 1380 			ee_KO_conf.DesAdd = KO_conf.DesAdd;
// 1381 
// 1382 			KO_conf.GR = g_asc_reception_buffer[5];
        LDS     R16, (g_asc_reception_buffer + 5)
        STS     (KO_conf + 6), R16
// 1383 			ee_KO_conf.GR = KO_conf.GR;
        LDS     R16, (KO_conf + 6)
        LDI     R20, LOW((ee_KO_conf + 6))
        LDI     R21, HIGH((ee_KO_conf + 6))
        CALL    __eeput8_16
// 1384 			
// 1385 			CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 1386 			buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 1387 			buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 1388 			strncpy(buffer_tx,"D20001428C000940",17);
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW((`?<Constant "B0009900">` + 9))
        LDI     R19, HIGH((`?<Constant "B0009900">` + 9))
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
// 1389 			
// 1390 			state.main_state = PNL_AD_CONFED_STEP2;
        LDI     R16, 8
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1391 		}
// 1392 
// 1393 		//add timeout
// 1394 		if(Time_delay.timer_flex.time_out == 1)
??scs_pnl_advance_master_26:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    $+2+2
        RJMP    ??scs_pnl_advance_master_3
// 1395 		{
// 1396 			led_blinking_disable(0);
// 1397 			state.main_state = STATE_NORMAL;
// 1398 			return 0;
// 1399 		}
// 1400 	}
// 1401 
// 1402 	if( state.main_state == PNL_AD_CONFED_STEP9 )
??scs_pnl_advance_master_23:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 16
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_master_27
// 1403 	{
// 1404 		if( (g_asc_reception_buffer[6] == 0x09) && (g_asc_reception_buffer[7] == 0x06))
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_master_28
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 6
        BRNE    ??scs_pnl_advance_master_28
        LDS     R16, (g_asc_reception_buffer + 5)
        STS     (KO_conf + 6), R16
// 1405 		{
// 1406 			KO_conf.GR = g_asc_reception_buffer[5];
// 1407 			ee_KO_conf.GR = KO_conf.GR;
        LDS     R16, (KO_conf + 6)
        LDI     R20, LOW((ee_KO_conf + 6))
        LDI     R21, HIGH((ee_KO_conf + 6))
        CALL    __eeput8_16
// 1408 			strncpy(buffer_tx,"D20001428C000940",17);
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW((`?<Constant "B0009900">` + 9))
        LDI     R19, HIGH((`?<Constant "B0009900">` + 9))
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
// 1409 			CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 1410 			buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 1411 			buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 1412 			send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
// 1413 			state.main_state = PNL_AD_CONFED_STEP90;
        LDI     R16, 17
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1414 		}
// 1415 
// 1416 		//add timeout
// 1417 		if(Time_delay.timer_flex.time_out == 1)
??scs_pnl_advance_master_28:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    $+2+2
        RJMP    ??scs_pnl_advance_master_3
// 1418 		{
// 1419 			led_blinking_disable(0);
// 1420 			state.main_state = STATE_NORMAL;
// 1421 			return 0;
// 1422 		}
// 1423 	}
// 1424 
// 1425 	if( state.main_state == PNL_AD_CONFED_STEP90 )
??scs_pnl_advance_master_27:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 17
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_master_29
        LDS     R16, key_result
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_master_30
// 1426 	{
// 1427 		if( key_result.short_pressed == 1 )
// 1428 		{
// 1429 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1430 			PnL_ad_end();
        CALL    PnL_ad_end
// 1431 		}
// 1432 
// 1433 		//add timeout
// 1434 		if(Time_delay.timer_flex.time_out == 1)
??scs_pnl_advance_master_30:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    $+2+2
        RJMP    ??scs_pnl_advance_master_3
// 1435 		{
// 1436 			led_blinking_disable(0);
// 1437 			state.main_state = STATE_NORMAL;
// 1438 			return 0;
// 1439 		}
// 1440 	}
// 1441   return 0;
??scs_pnl_advance_master_29:
        LDI     R16, 0
??scs_pnl_advance_master_4:
        ADIW    R29:R28, 20
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock24
// 1442 }

        RSEG NEAR_Z:DATA:NOROOT(0)
        REQUIRE `?<Segment init: NEAR_Z>`
??ptop:
        DS8 4
        DS8 1
// 1443 

        RSEG CODE:CODE:NOROOT(1)
// 1444 void scs_pnl_none_confed_master(void)
scs_pnl_none_confed_master:
        CFI Block cfiBlock25 Using cfiCommon0
        CFI Function scs_pnl_none_confed_master
// 1445 {
// 1446 	if(state.main_state == STATE_NORMAL)
        FUNCALL scs_pnl_none_confed_master, led_blinking
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, timer_flex_initial
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, led_blinking_disable
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_disable_automatic_control
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_start_pnl_none_group_confed
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, led_blinking
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, led_blinking_stage2_initial
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, factory_default
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, system_reset
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, load_default_advance_parameter
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_group_request
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, timer_flex_initial
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, load_default_advance_parameter
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, send_group_pnl_frame
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, load_default_advance_parameter
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_end_pnl
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, send_frame_pp_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, led_blinking_normal
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_enable_automatic_control
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_end_pnl
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, led_blinking_normal
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, load_default_advance_parameter
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, frame_send_start_pnl_group_confed
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_master, PnL_NONE_end
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        OR      R16, R17
        BRNE    ??scs_pnl_none_confed_master_0
        LDS     R16, key_result
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_0
// 1447 	{
// 1448 		if(key_result.short_pressed == 1)
// 1449 		{
// 1450 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1451 			state.main_state = PNL_NONE_CONFED_STEP1;
        LDI     R16, 1
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1452 			led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1453 			timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1454 		}
// 1455 	}
// 1456 
// 1457 	if(state.main_state == PNL_NONE_CONFED_STEP1)
??scs_pnl_none_confed_master_0:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 1
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_none_confed_master_1
// 1458 	{
// 1459 		if(Time_delay.timer_flex.time_out == 1)
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_2
// 1460 		{
// 1461 			LLED_OFF;
        SBI     0x0B, 0x06
// 1462 			led_blinking_disable(0);
        LDI     R16, 0
        RCALL   led_blinking_disable
// 1463 			state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
??scs_pnl_none_confed_master_2:
        LDS     R16, key_result
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_3
// 1464 		}
// 1465 		
// 1466 		if( key_result.short_pressed == 1 )
// 1467 		{
// 1468 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1469 			state.main_state = PNL_NONE_CONFED_STEP2;
        LDI     R16, 2
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1470 			frame_send_disable_automatic_control();
        CALL    frame_send_disable_automatic_control
// 1471 			frame_send_start_pnl_none_group_confed();
        CALL    frame_send_start_pnl_none_group_confed
// 1472 			led_blinking(250,250);
        LDI     R20, 250
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 250
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1473 			//timer_flex_initial(600000);
// 1474 			led_blinking_stage2_initial(600000);
        LDI     R16, 192
        LDI     R17, 39
        LDI     R18, 9
        LDI     R19, 0
        CALL    led_blinking_stage2_initial
        RJMP    ??scs_pnl_none_confed_master_1
// 1475 		}
// 1476     else if(Time_delay.LPB.count > 10000)	
??scs_pnl_none_confed_master_3:
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CPI     R16, 17
        LDI     R20, 39
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCS    ??scs_pnl_none_confed_master_1
// 1477     {
// 1478       factory_default();
        RCALL   factory_default
// 1479       ee_flags.manual_initialize = 1;
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeget16_16
        ORI     R16, 0x01
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeput16_16
// 1480 			system_reset();
        CALL    system_reset
// 1481     }
// 1482 	}
// 1483 
// 1484 	if(state.main_state == PNL_NONE_CONFED_STEP2)
??scs_pnl_none_confed_master_1:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 2
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_none_confed_master_4
// 1485 	{
// 1486 		if(Time_delay.pnl_stage2.time_out == 1)
        LDS     R16, (Time_delay + 201)
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_5
// 1487 		{
// 1488 			state.main_state = PNL_NONE_CONFED_STEP4;
        LDI     R16, 4
        STS     (state + 2), R16
        STS     (state + 3), R18
// 1489 		}
// 1490 		
// 1491     if(g_asc_short_buffer[0] == 0xB8 && g_asc_short_buffer[2] == 0x12)
??scs_pnl_none_confed_master_5:
        LDI     R30, LOW(g_asc_short_buffer)
        LDI     R31, (g_asc_short_buffer) >> 8
        LD      R16, Z
        CPI     R16, 184
        BRNE    ??scs_pnl_none_confed_master_6
        LDD     R16, Z+2
        CPI     R16, 18
        BRNE    ??scs_pnl_none_confed_master_6
// 1492     {
// 1493 			//KO_conf.DesAdd = g_asc_short_buffer[1];
// 1494 			//ee_KO_conf.DesAdd = g_asc_short_buffer[1];
// 1495 			temp_variable.DesAdd = g_asc_short_buffer[1];
        LDD     R16, Z+1
        STS     (temp_variable + 19), R16
// 1496 			flags.pp_link = 1;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ORI     R17, 0x04
        STD     Z+3, R17
        STD     Z+2, R16
??scs_pnl_none_confed_master_6:
        LDS     R16, key_result
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_7
// 1497 			//product_information.conf_type = ADVANCED;
// 1498 			//ee_product_information.conf_type = ADVANCED;
// 1499     }
// 1500 
// 1501 		if( key_result.short_pressed == 1 )
// 1502 		{
// 1503 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1504 			if(flags.pp_link)
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        MOV     R16, R17
        SBRS    R16, 2
        RJMP    ??scs_pnl_none_confed_master_8
// 1505 			{
// 1506 				flags.pp_link = 0;
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xFB
        STD     Z+3, R17
        STD     Z+2, R16
// 1507 				load_default_advance_parameter();
        CALL    load_default_advance_parameter
        LDS     R16, (temp_variable + 19)
        STS     (KO_conf + 2), R16
        LDS     R16, (temp_variable + 19)
        LDI     R20, LOW((ee_KO_conf + 2))
        LDI     R21, HIGH((ee_KO_conf + 2))
        CALL    __eeput8_16
// 1508 				KO_conf.DesAdd = temp_variable.DesAdd;
// 1509 				ee_KO_conf.DesAdd = temp_variable.DesAdd;
// 1510 				product_information.conf_type = ADVANCED;
        LDI     R16, 2
        STS     product_information, R16
// 1511 				ee_product_information.conf_type = ADVANCED;
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeput8_16
// 1512 				KO_conf.AddressType = PP;
        LDI     R16, 0
        STS     (KO_conf + 1), R16
// 1513 				ee_KO_conf.AddressType = PP;
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 1514 			}
// 1515 			state.main_state = PNL_NONE_CONFED_STEP4;
??scs_pnl_none_confed_master_8:
        LDI     R16, 4
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
??scs_pnl_none_confed_master_7:
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_none_confed_master_9
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 33
        BRNE    ??scs_pnl_none_confed_master_9
// 1516 		}
// 1517 		
// 1518     if(g_asc_reception_buffer[6] == 0x09 && g_asc_reception_buffer[7] == 0x21)
// 1519     {
// 1520       KO_conf.Reference = g_asc_reception_buffer[1];
        LDS     R16, (g_asc_reception_buffer + 1)
        STS     (KO_conf + 5), R16
// 1521 			ee_KO_conf.Reference = g_asc_reception_buffer[1];
        LDS     R16, (g_asc_reception_buffer + 1)
        LDI     R20, LOW((ee_KO_conf + 5))
        LDI     R21, HIGH((ee_KO_conf + 5))
        CALL    __eeput8_16
// 1522       frame_send_group_request();
        CALL    frame_send_group_request
// 1523       timer_flex_initial(3000);
        LDI     R16, 184
        LDI     R17, 11
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1524       state.main_state = PNL_NONE_CONFED_WAIT_FOR_GROUP_ASSIGN;
        LDI     R16, 3
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1525     }
// 1526 
// 1527 		////////////////////////////////////////////////////////////////////////
// 1528 		//////////////  for none confed group sensor   /////////////////////////
// 1529 		if(g_asc_reception_buffer[6] == 0x09 && (g_asc_reception_buffer[7] == 0x06 || g_asc_reception_buffer[7] == 0xF6))
??scs_pnl_none_confed_master_9:
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_none_confed_master_10
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 6
        BREQ    ??scs_pnl_none_confed_master_11
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 246
        BRNE    ??scs_pnl_none_confed_master_10
// 1530 		{
// 1531 			load_default_advance_parameter();
??scs_pnl_none_confed_master_11:
        CALL    load_default_advance_parameter
        LDS     R16, (g_asc_reception_buffer + 5)
        STS     (KO_conf + 6), R16
        LDS     R16, (g_asc_reception_buffer + 5)
        LDI     R20, LOW((ee_KO_conf + 6))
        LDI     R21, HIGH((ee_KO_conf + 6))
        CALL    __eeput8_16
// 1532 			KO_conf.GR = g_asc_reception_buffer[5];
// 1533 			ee_KO_conf.GR = g_asc_reception_buffer[5];
// 1534 			KO_conf.AddressType = GROUP;
        LDI     R16, 2
        STS     (KO_conf + 1), R16
// 1535 			ee_KO_conf.AddressType = GROUP;
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 1536 			product_information.conf_type = ADVANCED;
        STS     product_information, R16
// 1537       ee_product_information.conf_type = ADVANCED;
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeput8_16
// 1538 			send_group_pnl_frame(SET,KO_conf.GR,START_PNL);
        LDI     R18, 48
        LDS     R17, (KO_conf + 6)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1539 			state.main_state = PNL_AD_CONFED_STEP2;
        LDI     R16, 8
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1540 		}
// 1541 		
// 1542 		if(Time_delay.LPB.count > 3000)				// group initial
??scs_pnl_none_confed_master_10:
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        LD      R16, Z
        LDD     R17, Z+1
        LDD     R18, Z+2
        LDD     R19, Z+3
        CPI     R16, 185
        LDI     R20, 11
        CPC     R17, R20
        LDI     R20, 0
        CPC     R18, R20
        CPC     R19, R20
        BRCS    ??scs_pnl_none_confed_master_4
// 1543 		{
// 1544 			key_result.short_pressed = 0;
        STS     key_result, R20
// 1545 			key_result.long_pressed = 0;
        STS     (key_result + 1), R20
// 1546 			load_default_advance_parameter();
        CALL    load_default_advance_parameter
        LDS     R16, (temp_variable + 19)
        STS     (KO_conf + 2), R16
        LDS     R16, (temp_variable + 19)
        LDI     R20, LOW((ee_KO_conf + 2))
        LDI     R21, HIGH((ee_KO_conf + 2))
        CALL    __eeput8_16
// 1547 			KO_conf.DesAdd = temp_variable.DesAdd;
// 1548 			ee_KO_conf.DesAdd = temp_variable.DesAdd;
// 1549 			KO_conf.AddressType = PP;
        LDI     R16, 0
        STS     (KO_conf + 1), R16
// 1550 			ee_KO_conf.AddressType = PP;
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 1551 			product_information.conf_type = ADVANCED;
        LDI     R16, 2
        STS     product_information, R16
// 1552 			ee_product_information.conf_type = ADVANCED;
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeput8_16
// 1553 			frame_send_end_pnl();
        CALL    frame_send_end_pnl
// 1554 			send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 1555 			led_blinking_normal();
        CALL    led_blinking_normal
// 1556 			state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
// 1557 		}
// 1558 	}
// 1559 
// 1560   if(state.main_state == PNL_NONE_CONFED_WAIT_FOR_GROUP_ASSIGN)
??scs_pnl_none_confed_master_4:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 3
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_none_confed_master_12
// 1561   {
// 1562 		if(Time_delay.timer_flex2.time_out == 1)
        LDS     R16, (Time_delay + 212)
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_13
// 1563 		{
// 1564 			state.main_state = PNL_NONE_CONFED_STEP4;
        LDI     R16, 4
        STS     (state + 2), R16
        STS     (state + 3), R18
// 1565 		}
// 1566 		
// 1567     if(Time_delay.timer_flex.time_out == 1)
??scs_pnl_none_confed_master_13:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_master_14
// 1568 		{
// 1569       frame_send_enable_automatic_control();    //added by reyno
        CALL    frame_send_enable_automatic_control
// 1570       frame_send_end_pnl(); //added by reyno
        CALL    frame_send_end_pnl
// 1571 		  led_blinking_normal();
        CALL    led_blinking_normal
// 1572 		  state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
// 1573 		}
// 1574 
// 1575     if(flags.group_assigned)
??scs_pnl_none_confed_master_14:
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        SBRS    R16, 0
        RJMP    ??scs_pnl_none_confed_master_12
// 1576     {
// 1577 			load_default_advance_parameter();
        CALL    load_default_advance_parameter
        LDS     R16, (g_asc_reception_buffer + 5)
        STS     (KO_conf + 6), R16
        LDS     R16, (g_asc_reception_buffer + 5)
        LDI     R20, LOW((ee_KO_conf + 6))
        LDI     R21, HIGH((ee_KO_conf + 6))
        CALL    __eeput8_16
// 1578       KO_conf.GR = g_asc_reception_buffer[5];
// 1579       ee_KO_conf.GR = g_asc_reception_buffer[5];
// 1580 			KO_conf.AddressType = GROUP;
        LDI     R16, 2
        STS     (KO_conf + 1), R16
// 1581 			ee_KO_conf.AddressType = GROUP;
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 1582       product_information.conf_type = ADVANCED;
        STS     product_information, R16
// 1583       ee_product_information.conf_type = ADVANCED;
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeput8_16
// 1584       frame_send_start_pnl_group_confed();
        CALL    frame_send_start_pnl_group_confed
        LDI     R16, 0
        STS     key_result, R16
// 1585       key_result.short_pressed = 0;
// 1586       key_result.long_pressed = 0;
        STS     (key_result + 1), R16
// 1587       state.main_state = PNL_AD_CONFED_STEP2;
        LDI     R16, 8
        LDI     R17, 144
        STS     (state + 2), R16
        STS     (state + 3), R17
// 1588       //state.main_state = PNL_NONE_CONFED_STEP4;
// 1589     }
// 1590   }
// 1591 
// 1592   if(state.main_state == PNL_NONE_CONFED_STEP4)
??scs_pnl_none_confed_master_12:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        CPI     R16, 4
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_none_confed_master_15
// 1593   {
// 1594 		PnL_NONE_end();
        CALL    PnL_NONE_end
// 1595   }
// 1596 
// 1597 }
??scs_pnl_none_confed_master_15:
        RET
        CFI EndBlock cfiBlock25
        REQUIRE _A_PORTD
// 1598 

        RSEG CODE:CODE:NOROOT(1)
// 1599 void scs_pnl_advance_slave(void)
scs_pnl_advance_slave:
        CFI Block cfiBlock26 Using cfiCommon0
        CFI Function scs_pnl_advance_slave
// 1600 {
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_disable
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, timer_flex_initial
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, timer_flex_initial
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_normal
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, CharToStr
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, CharToStr
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, delay_ms
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_disable
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_disable
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, delay_ms
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_normal
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, timer_flex2_initial
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_frame_pp_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_normal
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, send_frame_pp_broad
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_advance_slave, led_blinking_normal
        LOCFRAME CSTACK, 22, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R27
        CFI R27 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        ST      -Y, R26
        CFI R26 Frame(CFA_Y, -2)
        CFI CFA_Y Y+2
        SBIW    R29:R28, 20
        CFI CFA_Y Y+22
// 1601 	unsigned char buffer_tx[17] = "D20001348C000941";
        MOVW    R19:R18, R29:R28
        SUBI    R18, 253
        SBCI    R19, 255
        MOVW    R17:R16, R19:R18
        LDI     R30, LOW(`?<Constant "D20001348C000941">`)
        LDI     R31, (`?<Constant "D20001348C000941">`) >> 8
        LDI     R20, 17
        LDI     R21, 0
        CALL    ?ML_FLASH_SRAM_16EC_16_L07
// 1602 	unsigned char buffer[3];
// 1603 	
// 1604 	if(state.main_state == NORMAL)
        LDI     R26, LOW(state)
        LDI     R27, (state) >> 8
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+2
        LDD     R17, Z+3
        OR      R16, R17
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_slave_0
// 1605 	{
// 1606 		if(state.pnl_slave == START_PNL_GROUP_SENSOR)
        LDS     R16, (state + 4)
        CPI     R16, 1
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_slave_1
// 1607 		{
// 1608 			if(key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BRNE    $+2+2
        RJMP    ??scs_pnl_advance_slave_0
// 1609   	  {
// 1610   	    key_result.short_pressed = 0;
        STS     key_result, R20
// 1611 				if(flags.wait_GS_remove == 1)
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        MOV     R16, R17
        SBRS    R16, 1
        RJMP    ??scs_pnl_advance_slave_2
// 1612 				{
// 1613 					flags.wait_GS_remove = 0;
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xFD
        STD     Z+3, R17
        STD     Z+2, R16
        LDS     R16, (KO_conf + 7)
        LDS     R17, (temp_variable + 14)
        CP      R16, R17
        LDI     R18, 52
        BRNE    ??scs_pnl_advance_slave_3
// 1614 					if(KO_conf.GS1 == temp_variable.GR) //remove
// 1615 					{
// 1616 						send_group_pnl_frame(ANSWER,KO_conf.GS1,GROUP_ERASE);
        LDS     R17, (KO_conf + 7)
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1617 						KO_conf.GS1 = 0;
        LDI     R16, 0
        STS     (KO_conf + 7), R16
// 1618 						ee_KO_conf.GS1 = 0;
        LDI     R20, LOW((ee_KO_conf + 7))
        LDI     R21, HIGH((ee_KO_conf + 7))
        RJMP    ??scs_pnl_advance_slave_4
// 1619 					}
// 1620 					else
// 1621 					{
// 1622 						send_group_pnl_frame(ANSWER,KO_conf.GS2,GROUP_ERASE);
??scs_pnl_advance_slave_3:
        LDS     R17, (KO_conf + 8)
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1623 						KO_conf.GS2 = 0;
        LDI     R16, 0
        STS     (KO_conf + 8), R16
// 1624 						ee_KO_conf.GS2 = 0;
        LDI     R20, LOW((ee_KO_conf + 8))
        LDI     R21, HIGH((ee_KO_conf + 8))
??scs_pnl_advance_slave_4:
        CALL    __eeput8_16
// 1625 					}
// 1626 					led_blinking_disable(0);
        RCALL   led_blinking_disable
// 1627 					state.main_state = NORMAL;
        LDI     R16, 0
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
        RJMP    ??scs_pnl_advance_slave_0
// 1628 				}
// 1629 				else
// 1630 				{
// 1631 					led_blinking(1000,1000);
??scs_pnl_advance_slave_2:
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1632 					timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1633 					state.main_state = SENSOR_GROUP_STEP4;
        LDI     R16, 25
        RJMP    ??scs_pnl_advance_slave_5
// 1634 				}
// 1635 			}
// 1636   	}
// 1637 		else if(state.pnl_slave == START_PNL_NONE_CONFED_GROUP_SENSOR)
??scs_pnl_advance_slave_1:
        LDS     R16, (state + 4)
        CPI     R16, 2
        BRNE    ??scs_pnl_advance_slave_0
// 1638 		{
// 1639 			if( key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_advance_slave_0
// 1640     	{
// 1641       	key_result.short_pressed = 0;
        STS     key_result, R20
// 1642       	led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1643 				timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1644 				state.main_state = NONE_TO_AD_STEP1;
        LDI     R16, 32
??scs_pnl_advance_slave_5:
        LDI     R17, 144
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R17
// 1645     	}
// 1646 		}
// 1647 	}
// 1648 	
// 1649 	if(state.main_state == SENSOR_GROUP_STEP4)
??scs_pnl_advance_slave_0:
        LDD     R16, Z+2
        LDD     R17, Z+3
        CPI     R16, 25
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_slave_6
// 1650 	{
// 1651 		if(Time_delay.timer_flex.time_out == 1)
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_slave_7
// 1652 		{
// 1653 		  led_blinking_normal();
        RCALL   led_blinking_normal
// 1654 		  state.main_state = STATE_NORMAL;
        LDI     R16, 0
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
// 1655 		}
// 1656 		
// 1657 		if(key_result.short_pressed)
??scs_pnl_advance_slave_7:
        LDS     R16, key_result
        TST     R16
        BRNE    $+2+2
        RJMP    ??scs_pnl_advance_slave_6
// 1658 		{
// 1659 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1660 			if(KO_conf.GS1 == 0 || KO_conf.GS1 == temp_variable.GR)
        LDS     R16, (temp_variable + 14)
        LDS     R17, (KO_conf + 7)
        TST     R17
        BREQ    ??scs_pnl_advance_slave_8
        LDS     R17, (KO_conf + 7)
        CP      R17, R16
        BRNE    ??scs_pnl_advance_slave_9
// 1661 			{
// 1662 				KO_conf.GS1 = temp_variable.GR;
??scs_pnl_advance_slave_8:
        STS     (KO_conf + 7), R16
// 1663 				ee_KO_conf.GS1 = temp_variable.GR;
        LDS     R16, (temp_variable + 14)
        LDI     R20, LOW((ee_KO_conf + 7))
        LDI     R21, HIGH((ee_KO_conf + 7))
        CALL    __eeput8_16
// 1664 				CharToStr(KO_conf.GS1,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 7)
??scs_pnl_advance_slave_10:
        CALL    CharToStr
// 1665 				buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 1666 				buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 1667 				send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
// 1668 				led_blinking(250,250);
        LDI     R20, 250
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 250
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1669 				state.main_state = ADD_THEN_REMOVE;
        LDI     R16, 48
        LDI     R17, 144
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R17
        RJMP    ??scs_pnl_advance_slave_6
// 1670 			}
// 1671 			else if(KO_conf.GS2 == 0 || KO_conf.GS2 == temp_variable.GR)
??scs_pnl_advance_slave_9:
        LDS     R17, (KO_conf + 8)
        TST     R17
        BREQ    ??scs_pnl_advance_slave_11
        LDS     R17, (KO_conf + 8)
        CP      R17, R16
        BRNE    ??scs_pnl_advance_slave_12
// 1672 			{
// 1673 				KO_conf.GS2 = temp_variable.GR;
??scs_pnl_advance_slave_11:
        STS     (KO_conf + 8), R16
// 1674 				ee_KO_conf.GS2 = temp_variable.GR;
        LDS     R16, (temp_variable + 14)
        LDI     R20, LOW((ee_KO_conf + 8))
        LDI     R21, HIGH((ee_KO_conf + 8))
        CALL    __eeput8_16
// 1675 				CharToStr(KO_conf.GS2,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 8)
        RJMP    ??scs_pnl_advance_slave_10
// 1676 				buffer_tx[10] = buffer[0];
// 1677 				buffer_tx[11] = buffer[1];
// 1678 				send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
// 1679 				led_blinking(250,250);
// 1680 				state.main_state = ADD_THEN_REMOVE;
// 1681 			}
// 1682 			else
// 1683 			{
// 1684 				led_blinking(120,0);
??scs_pnl_advance_slave_12:
        LDI     R20, 0
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1685 				delay_ms(5000);
        LDI     R16, 136
        LDI     R17, 19
        CALL    delay_ms
// 1686 				led_blinking_disable(0);
        LDI     R16, 0
        RCALL   led_blinking_disable
// 1687 				state.main_state = NORMAL;
        LDI     R16, 0
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
// 1688 			}
// 1689 		}
// 1690 	}
// 1691 	
// 1692 	if(state.main_state == ADD_THEN_REMOVE)
??scs_pnl_advance_slave_6:
        LDD     R16, Z+2
        LDD     R17, Z+3
        CPI     R16, 48
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_slave_13
// 1693 	{
// 1694 		if(key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_advance_slave_13
// 1695     {
// 1696 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
        LDS     R16, (KO_conf + 7)
        LDS     R17, (temp_variable + 14)
        CP      R16, R17
        LDI     R18, 52
        BRNE    ??scs_pnl_advance_slave_14
// 1697       if(KO_conf.GS1 == temp_variable.GR) //remove
// 1698 			{
// 1699 				send_group_pnl_frame(ANSWER,KO_conf.GS1,GROUP_ERASE);
        LDS     R17, (KO_conf + 7)
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1700 				KO_conf.GS1 = 0;
        LDI     R16, 0
        STS     (KO_conf + 7), R16
// 1701 				ee_KO_conf.GS1 = 0;
        LDI     R20, LOW((ee_KO_conf + 7))
        LDI     R21, HIGH((ee_KO_conf + 7))
        RJMP    ??scs_pnl_advance_slave_15
// 1702 			}
// 1703 			else
// 1704 			{
// 1705 				send_group_pnl_frame(ANSWER,KO_conf.GS2,GROUP_ERASE);
??scs_pnl_advance_slave_14:
        LDS     R17, (KO_conf + 8)
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1706 				KO_conf.GS2 = 0;
        LDI     R16, 0
        STS     (KO_conf + 8), R16
// 1707 				ee_KO_conf.GS2 = 0;
        LDI     R20, LOW((ee_KO_conf + 8))
        LDI     R21, HIGH((ee_KO_conf + 8))
??scs_pnl_advance_slave_15:
        CALL    __eeput8_16
// 1708 			}
// 1709 			led_blinking_disable(0);
        RCALL   led_blinking_disable
// 1710 			state.main_state = NORMAL;
        LDI     R16, 0
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
// 1711 		}
// 1712 	}
// 1713 	
// 1714 	if(state.main_state == NONE_TO_AD_STEP1)
??scs_pnl_advance_slave_13:
        LDD     R16, Z+2
        LDD     R17, Z+3
        CPI     R16, 32
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_slave_16
// 1715 	{
// 1716 		if( key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_advance_slave_16
// 1717 		{
// 1718 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
        LDS     R16, (KO_conf + 7)
        TST     R16
        BREQ    ??scs_pnl_advance_slave_17
        LDS     R16, (temp_variable + 14)
        LDS     R17, (KO_conf + 7)
        CP      R17, R16
        BRNE    ??scs_pnl_advance_slave_18
// 1719 			if(KO_conf.GS1 == 0 || KO_conf.GS1 == temp_variable.GR)
// 1720 			{
// 1721 				led_blinking(250,250);
??scs_pnl_advance_slave_17:
        LDI     R20, 250
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 250
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1722 				state.main_state = NONE_TO_AD_STEP2;
        LDI     R16, 33
        LDI     R17, 144
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R17
        RJMP    ??scs_pnl_advance_slave_16
// 1723 			}
// 1724 			else if(KO_conf.GS2 == 0 || KO_conf.GS2 == temp_variable.GR)
??scs_pnl_advance_slave_18:
        LDS     R17, (KO_conf + 8)
        TST     R17
        BREQ    ??scs_pnl_advance_slave_17
        LDS     R17, (KO_conf + 8)
        CP      R17, R16
        BREQ    ??scs_pnl_advance_slave_17
// 1725 			{
// 1726 				led_blinking(250,250);
// 1727 				state.main_state = NONE_TO_AD_STEP2;
// 1728 			}
// 1729 			else
// 1730 			{
// 1731 				led_blinking(120,0);
        LDI     R20, 0
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1732 				delay_ms(5000);
        LDI     R16, 136
        LDI     R17, 19
        CALL    delay_ms
// 1733 				state.main_state = NORMAL;
        LDI     R16, 0
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
// 1734 				state.pnl_slave = NORMAL;
        STS     (state + 4), R16
// 1735 				flags.scs_pnl_group_sensor_starded = NORMAL;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xFE
        STD     Z+3, R17
        STD     Z+2, R16
// 1736 				led_blinking_normal();
        RCALL   led_blinking_normal
// 1737 			}
// 1738 		}
// 1739 	}
// 1740 	
// 1741 	if(state.main_state == NONE_TO_AD_STEP2)
??scs_pnl_advance_slave_16:
        MOVW    R31:R30, R27:R26
        LDD     R16, Z+2
        LDD     R17, Z+3
        CPI     R16, 33
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_slave_19
// 1742 	{
// 1743 		send_group_pnl_frame(ANSWER,0x00,GROUP_CONFIRM);
        LDI     R18, 49
        LDI     R17, 0
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1744 		send_group_pnl_frame(SET,0x00,GROUP_REQUEST);
        LDI     R18, 53
        LDI     R17, 0
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1745 		timer_flex2_initial(3000);
        LDI     R16, 184
        LDI     R17, 11
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex2_initial
// 1746 		state.main_state = NONE_TO_AD_STEP3;
        LDI     R16, 34
        LDI     R17, 144
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R17
// 1747 	}
// 1748 	
// 1749 	if(state.main_state == NONE_TO_AD_STEP3)
??scs_pnl_advance_slave_19:
        LDD     R16, Z+2
        LDD     R17, Z+3
        CPI     R16, 34
        LDI     R18, 144
        CPC     R17, R18
        BREQ    $+2+2
        RJMP    ??scs_pnl_advance_slave_20
// 1750 	{
// 1751 		if(Time_delay.timer_flex2.time_out == 1)
        LDS     R16, (Time_delay + 212)
        CPI     R16, 1
        BRNE    ??scs_pnl_advance_slave_21
// 1752 		{
// 1753 			send_group_pnl_frame(SET,0x00,GROUP_END_PNL);
        LDI     R18, 70
        LDI     R17, 0
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1754 			send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 1755 			led_blinking_normal();
        RCALL   led_blinking_normal
// 1756 			state.pnl_slave = NORMAL;
        LDI     R16, 0
        STS     (state + 4), R16
// 1757 	  	state.main_state = STATE_NORMAL;
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
        RJMP    ??scs_pnl_advance_slave_20
// 1758 		}
??scs_pnl_advance_slave_21:
        LDS     R16, (g_asc_reception_buffer + 3)
        CPI     R16, 66
        BRNE    ??scs_pnl_advance_slave_20
        LDS     R16, (g_asc_reception_buffer + 4)
        CPI     R16, 140
        BRNE    ??scs_pnl_advance_slave_20
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BRNE    ??scs_pnl_advance_slave_20
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 64
        BRNE    ??scs_pnl_advance_slave_20
        LDS     R16, (KO_conf + 7)
        TST     R16
        BREQ    ??scs_pnl_advance_slave_22
        LDS     R16, (KO_conf + 7)
        LDS     R17, (g_asc_reception_buffer + 5)
        CP      R16, R17
        BRNE    ??scs_pnl_advance_slave_23
// 1759 		else
// 1760 		{
// 1761 			if(g_asc_reception_buffer[3] == 0x42 && g_asc_reception_buffer[4] == 0x8C && g_asc_reception_buffer[6] == 0x09 && g_asc_reception_buffer[7] == 0x40)
// 1762 			{
// 1763 				if(KO_conf.GS1 == 0 || KO_conf.GS1 == g_asc_reception_buffer[5])
// 1764 				{
// 1765 					send_group_pnl_frame(ANSWER,KO_conf.GS1,GROUP_CONFIRM);
??scs_pnl_advance_slave_22:
        LDI     R18, 49
        LDS     R17, (KO_conf + 7)
        RJMP    ??scs_pnl_advance_slave_24
// 1766 				}
// 1767 				else if(KO_conf.GS2 == 0 || KO_conf.GS2 == g_asc_reception_buffer[5])
??scs_pnl_advance_slave_23:
        LDS     R16, (KO_conf + 8)
        TST     R16
        BREQ    ??scs_pnl_advance_slave_25
        LDS     R16, (KO_conf + 8)
        LDS     R17, (g_asc_reception_buffer + 5)
        CP      R16, R17
        BRNE    ??scs_pnl_advance_slave_26
// 1768 				{
// 1769 					send_group_pnl_frame(ANSWER,KO_conf.GS2,GROUP_CONFIRM);
??scs_pnl_advance_slave_25:
        LDI     R18, 49
        LDS     R17, (KO_conf + 8)
??scs_pnl_advance_slave_24:
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1770 				}
// 1771 				state.main_state = NONE_TO_AD_STEP4;
??scs_pnl_advance_slave_26:
        LDI     R16, 35
        LDI     R17, 144
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R17
// 1772 			}
// 1773 		}
// 1774 	}
// 1775 	
// 1776 	if(state.main_state == NONE_TO_AD_STEP4)
??scs_pnl_advance_slave_20:
        LDD     R16, Z+2
        LDD     R17, Z+3
        CPI     R16, 35
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_advance_slave_27
// 1777 	{
// 1778 		if( key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_advance_slave_27
// 1779 		{
// 1780 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1781 			send_group_pnl_frame(SET,0x00,GROUP_END_PNL);
        LDI     R18, 70
        LDI     R17, 0
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1782 			send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 1783 			led_blinking_normal();
        RCALL   led_blinking_normal
// 1784 			state.pnl_slave = NORMAL;
        LDI     R16, 0
        STS     (state + 4), R16
// 1785 	  	state.main_state = STATE_NORMAL;
        MOVW    R31:R30, R27:R26
        STD     Z+2, R16
        STD     Z+3, R16
// 1786 		}
// 1787 	}
// 1788 }
??scs_pnl_advance_slave_27:
        ADIW    R29:R28, 20
        CFI CFA_Y Y+2
        LD      R26, Y+
        CFI R26 SameValue
        CFI CFA_Y Y+1
        LD      R27, Y+
        CFI R27 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock26
// 1789 

        RSEG CODE:CODE:NOROOT(1)
// 1790 void scs_advance_from_none_confed(void)
scs_advance_from_none_confed:
        CFI Block cfiBlock27 Using cfiCommon0
        CFI Function scs_advance_from_none_confed
// 1791 {
        FUNCALL scs_advance_from_none_confed, led_blinking
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_advance_from_none_confed, timer_flex_initial
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_advance_from_none_confed, led_blinking
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_advance_from_none_confed, delay_ms
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_advance_from_none_confed, led_blinking_normal
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R27
        CFI R27 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        ST      -Y, R26
        CFI R26 Frame(CFA_Y, -2)
        CFI CFA_Y Y+2
// 1792 	//for PnL confed sensor slave
// 1793 	if( key_result.short_pressed)
        LDI     R26, LOW(state)
        LDI     R27, (state) >> 8
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_advance_from_none_confed_0
// 1794   {
// 1795       key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1796       led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1797 			timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1798 			//state.pnl_slave_none_confed = AFTER_STEP1;
// 1799 			state.main_state = NONE_TO_AD_STEP1;
        LDI     R16, 32
        LDI     R17, 144
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 3
// 1800     }
// 1801 	
// 1802 		if(state.pnl_slave == START_PNL_NONE_CONFED_GROUP_SENSOR)
??scs_advance_from_none_confed_0:
        LDS     R16, (state + 4)
        CPI     R16, 2
        BRNE    ??scs_advance_from_none_confed_1
// 1803 		{
// 1804 			if(KO_conf.GS1 == 0)
        LDS     R16, (KO_conf + 7)
        TST     R16
        BREQ    ??scs_advance_from_none_confed_1
// 1805 			{
// 1806 			
// 1807 			}
// 1808 			else if(KO_conf.GS2 == 0)
        LDS     R16, (KO_conf + 8)
        TST     R16
        BREQ    ??scs_advance_from_none_confed_1
// 1809 			{
// 1810 		
// 1811 			}
// 1812 			else
// 1813 			{
// 1814 				led_blinking(120,0);
        LDI     R20, 0
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1815 				delay_ms(5000);
        LDI     R16, 136
        LDI     R17, 19
        CALL    delay_ms
// 1816 				state.main_state = NORMAL;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
// 1817 				state.pnl_slave = NORMAL;
        STS     (state + 4), R16
// 1818 				flags.scs_pnl_group_sensor_starded = NORMAL;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xFE
        STD     Z+3, R17
        STD     Z+2, R16
// 1819 				led_blinking_normal();
        RCALL   led_blinking_normal
// 1820 			}
// 1821 		}
// 1822 }
??scs_advance_from_none_confed_1:
        LD      R26, Y+
        CFI R26 SameValue
        CFI CFA_Y Y+1
        LD      R27, Y+
        CFI R27 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock27
// 1823 

        RSEG CODE:CODE:NOROOT(1)
// 1824 unsigned char scs_pnl_none_confed_slave(void)
scs_pnl_none_confed_slave:
        CFI Block cfiBlock28 Using cfiCommon0
        CFI Function scs_pnl_none_confed_slave
// 1825 {
        FUNCALL scs_pnl_none_confed_slave, led_blinking
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, timer_flex_initial
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking_normal
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, delay_ms
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking_normal
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, timer_flex_initial
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking_normal
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, delay_ms
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking_normal
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, load_default_advance_parameter
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, send_group_pnl_frame
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, send_frame_pp_broad
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL scs_pnl_none_confed_slave, led_blinking_normal
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R27
        CFI R27 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        ST      -Y, R26
        CFI R26 Frame(CFA_Y, -2)
        CFI CFA_Y Y+2
// 1826 	if(state.main_state == NORMAL && state.pnl_slave == NORMAL)
        LDI     R26, LOW(state)
        LDI     R27, (state) >> 8
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        OR      R16, R17
        BRNE    ??scs_pnl_none_confed_slave_0
        LDS     R16, (state + 4)
        TST     R16
        BRNE    ??scs_pnl_none_confed_slave_0
// 1827 	{
// 1828 		if( key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_none_confed_slave_0
// 1829     {
// 1830      	key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1831      	led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1832 			timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1833 			state.main_state = AD_TO_NONE_STEP2;
        LDI     R16, 50
        LDI     R17, 144
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 3
// 1834     }
// 1835 	}
// 1836 	
// 1837 	if(state.main_state == AD_TO_NONE_STEP2)
??scs_pnl_none_confed_slave_0:
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        CPI     R16, 50
        LDI     R18, 144
        CPC     R17, R18
        BRNE    ??scs_pnl_none_confed_slave_1
// 1838 		{
// 1839 			if(Time_delay.timer_flex.time_out == 1)
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_slave_2
// 1840 			{
// 1841 		  	led_blinking_normal();
        RCALL   led_blinking_normal
// 1842 		  	state.main_state = NORMAL;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
        SBIW    R27:R26, 3
// 1843 			}
// 1844 		
// 1845 			if( key_result.short_pressed)
??scs_pnl_none_confed_slave_2:
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_none_confed_slave_1
// 1846     	{
// 1847      		key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1848 				state.main_state = CONSTANT_LIGHT;
        LDI     R16, 49
        LDI     R17, 144
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 3
// 1849      		led_blinking(120,0);
        LDI     R20, 0
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1850 				delay_ms(5000);
        LDI     R16, 136
        LDI     R17, 19
        CALL    delay_ms
// 1851 				state.main_state = NORMAL;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
        SBIW    R27:R26, 3
// 1852 				led_blinking_normal();
        RCALL   led_blinking_normal
// 1853     	}
// 1854 		}
// 1855 	
// 1856 	if(state.pnl_slave == START_PNL_NONE_CONFED_GROUP_SENSOR)
??scs_pnl_none_confed_slave_1:
        LDS     R16, (state + 4)
        CPI     R16, 2
        BRNE    ??scs_pnl_none_confed_slave_3
// 1857 	{
// 1858 		if(state.main_state == NORMAL)
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        OR      R16, R17
        BRNE    ??scs_pnl_none_confed_slave_3
// 1859 		{
// 1860 			if( key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_none_confed_slave_3
// 1861     	{
// 1862       	key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1863       	led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1864 				timer_flex_initial(60000);
        LDI     R16, 96
        LDI     R17, 234
        LDI     R18, 0
        LDI     R19, 0
        RCALL   timer_flex_initial
// 1865 				state.main_state = SENSOR_NONE_CONFED_SUB_STEP3;
        LDI     R16, 3
        LDI     R17, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R17
        SBIW    R27:R26, 3
// 1866     	}
// 1867 		}
// 1868 	}
// 1869 		
// 1870 	if(state.main_state == SENSOR_NONE_CONFED_SUB_STEP3)
??scs_pnl_none_confed_slave_3:
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        CPI     R16, 3
        LDI     R18, 0
        CPC     R17, R18
        BRNE    ??scs_pnl_none_confed_slave_4
// 1871 	{
// 1872 		if(Time_delay.timer_flex.time_out == 1)
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??scs_pnl_none_confed_slave_5
// 1873 		{
// 1874 		  led_blinking_normal();
        RCALL   led_blinking_normal
// 1875 		  state.main_state = STATE_NORMAL;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
        SBIW    R27:R26, 3
// 1876 			state.pnl_slave = NORMAL;
        STS     (state + 4), R16
// 1877 		}
// 1878 		
// 1879 		if( key_result.short_pressed)
??scs_pnl_none_confed_slave_5:
        LDS     R16, key_result
        TST     R16
        BRNE    $+2+2
        RJMP    ??scs_pnl_none_confed_slave_6
// 1880 		{
// 1881 			key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 1882 			led_blinking(100,0);
        LDI     R20, 0
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 100
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 1883 			delay_ms(5000);
        LDI     R16, 136
        LDI     R17, 19
        CALL    delay_ms
// 1884 			state.main_state = NORMAL;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
// 1885 			state.pnl_slave = NORMAL;
        STS     (state + 4), R16
// 1886 			flags.scs_pnl_group_sensor_starded = NORMAL;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xFE
        STD     Z+3, R17
        STD     Z+2, R16
// 1887 			led_blinking_normal();
        RCALL   led_blinking_normal
// 1888 			return 1;
        LDI     R16, 1
        RJMP    ??scs_pnl_none_confed_slave_7
// 1889 		}
// 1890 	}
// 1891 	else if(state.main_state == SENSOR_NONE_CONFED_SUB_STEP31)
??scs_pnl_none_confed_slave_4:
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        CPI     R16, 4
        CPC     R17, R18
        BRNE    ??scs_pnl_none_confed_slave_8
        LDS     R16, (g_asc_reception_buffer + 6)
        CPI     R16, 9
        BREQ    $+2+2
        RJMP    ??scs_pnl_none_confed_slave_6
        LDS     R16, (g_asc_reception_buffer + 7)
        CPI     R16, 64
        BREQ    $+2+2
        RJMP    ??scs_pnl_none_confed_slave_6
// 1892 	{
// 1893 		if(g_asc_reception_buffer[6] == 0x09 && g_asc_reception_buffer[7] == 0x40)
// 1894 		{
// 1895 			load_default_advance_parameter();
        RCALL   load_default_advance_parameter
        LDS     R16, (g_asc_reception_buffer + 5)
        STS     (KO_conf + 7), R16
// 1896 			KO_conf.GS1 = g_asc_reception_buffer[5];
// 1897 			ee_KO_conf.GS1 = g_asc_reception_buffer[5];
        LDS     R16, (g_asc_reception_buffer + 5)
        LDI     R20, LOW((ee_KO_conf + 7))
        LDI     R21, HIGH((ee_KO_conf + 7))
        CALL    __eeput8_16
// 1898 			KO_conf.GR = g_asc_reception_buffer[5];
        LDS     R16, (g_asc_reception_buffer + 5)
        STS     (KO_conf + 6), R16
// 1899 			ee_KO_conf.GR = g_asc_reception_buffer[5];
        LDS     R16, (g_asc_reception_buffer + 5)
        LDI     R20, LOW((ee_KO_conf + 6))
        LDI     R21, HIGH((ee_KO_conf + 6))
        CALL    __eeput8_16
// 1900 			send_group_pnl_frame(ANSWER,KO_conf.GS1,GROUP_CONFIRM);
        LDI     R18, 49
        LDS     R17, (KO_conf + 7)
        LDI     R16, 52
        CALL    send_group_pnl_frame
// 1901 			state.main_state = WAIT_END_PNL;
        LDI     R16, 5
        LDI     R17, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R17
        RJMP    ??scs_pnl_none_confed_slave_6
// 1902 		}
// 1903 	}
// 1904 	else if(state.main_state == WAIT_END_PNL)
??scs_pnl_none_confed_slave_8:
        ADIW    R27:R26, 2
        LD      R16, X+
        LD      R17, X
        SBIW    R27:R26, 3
        CPI     R16, 5
        CPC     R17, R18
        BRNE    ??scs_pnl_none_confed_slave_6
// 1905 	{
// 1906 		if( key_result.short_pressed)
        LDS     R16, key_result
        TST     R16
        BREQ    ??scs_pnl_none_confed_slave_6
// 1907 		{
// 1908 			key_result.short_pressed = 0;
        STS     key_result, R18
// 1909 			product_information.conf_type = ADVANCED;
        LDI     R16, 2
        STS     product_information, R16
// 1910 			ee_product_information.conf_type = ADVANCED;
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeput8_16
// 1911 			send_group_pnl_frame(SET,KO_conf.GS1,GROUP_END_PNL);
        LDI     R18, 70
        LDS     R17, (KO_conf + 7)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 1912 			send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 1913 			state.main_state = NORMAL;
        LDI     R16, 0
        ADIW    R27:R26, 2
        ST      X+, R16
        ST      X, R16
// 1914 			state.pnl_slave = NORMAL;
        STS     (state + 4), R16
// 1915 			flags.scs_pnl_group_sensor_starded = NORMAL;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xFE
        STD     Z+3, R17
        STD     Z+2, R16
// 1916 			led_blinking_normal();
        RCALL   led_blinking_normal
// 1917 		}
// 1918 	}
// 1919 	return 0;
??scs_pnl_none_confed_slave_6:
        LDI     R16, 0
??scs_pnl_none_confed_slave_7:
        LD      R26, Y+
        CFI R26 SameValue
        CFI CFA_Y Y+1
        LD      R27, Y+
        CFI R27 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock28
// 1920 }
// 1921 

        RSEG CODE:CODE:NOROOT(1)
// 1922 void scs_pnl_group_sensor_detector(void)
scs_pnl_group_sensor_detector:
        CFI Block cfiBlock29 Using cfiCommon0
        CFI Function scs_pnl_group_sensor_detector
// 1923 {
// 1924 
// 1925 }
        RET
        CFI EndBlock cfiBlock29
// 1926 

        RSEG CODE:CODE:NOROOT(1)
// 1927 void key_time_clear(void)
key_time_clear:
        CFI Block cfiBlock30 Using cfiCommon0
        CFI Function key_time_clear
// 1928 {
// 1929 	Time_delay.LPB.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 116))
        LDI     R31, HIGH((Time_delay + 116))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 1930 	Time_delay.LPB.enabled = 0;
        STS     (Time_delay + 125), R16
// 1931 }
        RET
        CFI EndBlock cfiBlock30
// 1932 /*
// 1933 void led_blinking_double(unsigned long int on_ms, unsigned long int off_ms)
// 1934 {
// 1935   Time_delay.led_double_on.count = 0;
// 1936 	Time_delay.led_double_off.count = 0;
// 1937 	Time_delay.led_double_on.stack_top = (unsigned long int)(on_ms);
// 1938 	Time_delay.led_double_off.stack_top = (unsigned long int)(off_ms);
// 1939 	Time_delay.led_double_on.enabled = 1;
// 1940 	Time_delay.led_double_off.enabled = 1;
// 1941 }
// 1942 */

        RSEG CODE:CODE:NOROOT(1)
// 1943 void led_blinking_double_disable(void)
led_blinking_double_disable:
        CFI Block cfiBlock31 Using cfiCommon0
        CFI Function led_blinking_double_disable
// 1944 {
// 1945 	LLED_OFF;
        SBI     0x0B, 0x06
// 1946 	DLED_OFF;
        SBI     0x08, 0x06
// 1947   Time_delay.led_double_on.enabled = 1;
        LDI     R16, 1
        STS     (Time_delay + 246), R16
// 1948 	Time_delay.led_double_off.enabled = 1;
        STS     (Time_delay + 257), R16
// 1949 }
        RET
        CFI EndBlock cfiBlock31
        REQUIRE _A_PORTD
        REQUIRE _A_PORTC
// 1950 

        RSEG CODE:CODE:NOROOT(1)
// 1951 void led_blinking(unsigned long int on_ms, unsigned long int off_ms)
led_blinking:
        CFI Block cfiBlock32 Using cfiCommon0
        CFI Function led_blinking
// 1952 {
        MOV     R0, R24
// 1953 	Time_delay.led_on.count = 0;
        LDI     R24, 0
        LDI     R30, LOW((Time_delay + 127))
        LDI     R31, HIGH((Time_delay + 127))
        ST      Z, R24
        STD     Z+1, R24
        STD     Z+2, R24
        STD     Z+3, R24
// 1954 	Time_delay.led_off.count = 0;
        LDI     R30, LOW((Time_delay + 138))
        LDI     R31, HIGH((Time_delay + 138))
        ST      Z, R24
        STD     Z+1, R24
        STD     Z+2, R24
        STD     Z+3, R24
// 1955 	Time_delay.led_on.stack_top = (unsigned long int)(on_ms);
        LDI     R30, LOW((Time_delay + 131))
        LDI     R31, HIGH((Time_delay + 131))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 1956 	Time_delay.led_off.stack_top = (unsigned long int)(off_ms);
        LDI     R30, LOW((Time_delay + 142))
        LDI     R31, HIGH((Time_delay + 142))
        ST      Z, R20
        STD     Z+1, R21
        STD     Z+2, R22
        STD     Z+3, R23
// 1957 	Time_delay.led_on.enabled = 1;
        LDI     R16, 1
        STS     (Time_delay + 136), R16
// 1958 	Time_delay.led_off.enabled = 0;
        STS     (Time_delay + 147), R24
// 1959 }
        MOV     R24, R0
        RET
        CFI EndBlock cfiBlock32
// 1960 

        RSEG CODE:CODE:NOROOT(1)
// 1961 void led_blinking_ms(unsigned long int on_ms,unsigned long int off_ms, unsigned long int period)
led_blinking_ms:
        CFI Block cfiBlock33 Using cfiCommon1
        CFI Function led_blinking_ms
// 1962 {
        FUNCALL led_blinking_ms, led_blinking
        LOCFRAME CSTACK, 8, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE4_L09
        CFI R27 Frame(CFA_Y, -5)
        CFI R26 Frame(CFA_Y, -6)
        CFI R25 Frame(CFA_Y, -7)
        CFI R24 Frame(CFA_Y, -8)
        CFI CFA_Y Y+8
        LDD     R24, Y+4
        LDD     R25, Y+5
        LDD     R26, Y+6
        LDD     R27, Y+7
// 1963 	led_blinking(on_ms,off_ms);
        RCALL   led_blinking
// 1964 	Time_delay.blinking_count.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 182))
        LDI     R31, HIGH((Time_delay + 182))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 1965 	Time_delay.blinking_count.stack_top = period;
        LDI     R30, LOW((Time_delay + 186))
        LDI     R31, HIGH((Time_delay + 186))
        ST      Z, R24
        STD     Z+1, R25
        STD     Z+2, R26
        STD     Z+3, R27
// 1966 	Time_delay.blinking_count.time_out = 0;
        STS     (Time_delay + 190), R16
// 1967 	Time_delay.blinking_count.enabled = 1;
        LDI     R16, 1
        STS     (Time_delay + 191), R16
// 1968 }
        LDI     R30, 8
        JMP     ?EPILOGUE_B4_L09
        CFI EndBlock cfiBlock33
// 1969 

        RSEG CODE:CODE:NOROOT(1)
// 1970 void Dled_light_on_ms(unsigned long int on_ms)
Dled_light_on_ms:
        CFI Block cfiBlock34 Using cfiCommon0
        CFI Function Dled_light_on_ms
// 1971 {
// 1972 	Time_delay.Dled.count = 0;
        LDI     R20, 0
        LDI     R30, LOW((Time_delay + 215))
        LDI     R31, HIGH((Time_delay + 215))
        ST      Z, R20
        STD     Z+1, R20
        STD     Z+2, R20
        STD     Z+3, R20
// 1973 	Time_delay.Dled.stack_top = on_ms;
        LDI     R30, LOW((Time_delay + 219))
        LDI     R31, HIGH((Time_delay + 219))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 1974 	Time_delay.Dled.time_out = 0;
        STS     (Time_delay + 223), R20
// 1975 	Time_delay.Dled.enabled = 1;
        LDI     R16, 1
        STS     (Time_delay + 224), R16
// 1976 	DLED_ON;
        CBI     0x08, 0x06
// 1977 }
        RET
        CFI EndBlock cfiBlock34
        REQUIRE _A_PORTC
// 1978 

        RSEG CODE:CODE:NOROOT(1)
// 1979 void led_blinking_disable(unsigned char state)
led_blinking_disable:
        CFI Block cfiBlock35 Using cfiCommon0
        CFI Function led_blinking_disable
// 1980 {
// 1981 	Time_delay.led_on.enabled = 0;
        LDI     R17, 0
        STS     (Time_delay + 136), R17
// 1982 	Time_delay.led_off.enabled = 0;
        STS     (Time_delay + 147), R17
// 1983 	if(state == 1)
        CPI     R16, 1
        BRNE    ??led_blinking_disable_0
// 1984 		LLED_ON;
        CBI     0x0B, 0x06
        RET
// 1985 	else if(state == 0)
??led_blinking_disable_0:
        TST     R16
        BRNE    ??led_blinking_disable_1
// 1986 		LLED_OFF;
        SBI     0x0B, 0x06
// 1987 }
??led_blinking_disable_1:
        RET
        CFI EndBlock cfiBlock35
        REQUIRE _A_PORTD
// 1988 

        RSEG CODE:CODE:NOROOT(1)
// 1989 void timer_flex_initial(unsigned long int ms)
timer_flex_initial:
        CFI Block cfiBlock36 Using cfiCommon0
        CFI Function timer_flex_initial
// 1990 {
// 1991 	Time_delay.timer_flex.stack_top = ms;
        LDI     R30, LOW((Time_delay + 153))
        LDI     R31, HIGH((Time_delay + 153))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 1992 	Time_delay.timer_flex.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 149))
        LDI     R31, HIGH((Time_delay + 149))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 1993 	Time_delay.timer_flex.time_out = 0;
        STS     (Time_delay + 157), R16
// 1994 	Time_delay.timer_flex.started = 1;
        LDI     R16, 1
        STS     (Time_delay + 159), R16
// 1995 	Time_delay.timer_flex.enabled = 1;
        STS     (Time_delay + 158), R16
// 1996 }
        RET
        CFI EndBlock cfiBlock36
// 1997 

        RSEG CODE:CODE:NOROOT(1)
// 1998 void timer_flex2_initial(unsigned long int ms)
timer_flex2_initial:
        CFI Block cfiBlock37 Using cfiCommon0
        CFI Function timer_flex2_initial
// 1999 {
// 2000 	Time_delay.timer_flex2.stack_top = ms;
        LDI     R30, LOW((Time_delay + 208))
        LDI     R31, HIGH((Time_delay + 208))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 2001 	Time_delay.timer_flex2.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 204))
        LDI     R31, HIGH((Time_delay + 204))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 2002 	Time_delay.timer_flex2.time_out = 0;
        STS     (Time_delay + 212), R16
// 2003 	Time_delay.timer_flex2.started = 1;
        LDI     R16, 1
        STS     (Time_delay + 214), R16
// 2004 	Time_delay.timer_flex2.enabled = 1;
        STS     (Time_delay + 213), R16
// 2005 }
        RET
        CFI EndBlock cfiBlock37
// 2006 

        RSEG CODE:CODE:NOROOT(1)
// 2007 void timer_dimmer_initial(unsigned long int ms)
timer_dimmer_initial:
        CFI Block cfiBlock38 Using cfiCommon0
        CFI Function timer_dimmer_initial
// 2008 {
// 2009   Time_delay.dimmer.stack_top = ms;
        LDI     R30, LOW((Time_delay + 263))
        LDI     R31, HIGH((Time_delay + 263))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 2010 	Time_delay.dimmer.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 259))
        LDI     R31, HIGH((Time_delay + 259))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 2011 	Time_delay.dimmer.time_out = 0;
        STS     (Time_delay + 267), R16
// 2012 	Time_delay.dimmer.started = 1;
        LDI     R16, 1
        STS     (Time_delay + 269), R16
// 2013 	Time_delay.dimmer.enabled = 1;
        STS     (Time_delay + 268), R16
// 2014 }
        RET
        CFI EndBlock cfiBlock38
// 2015 

        RSEG CODE:CODE:NOROOT(1)
// 2016 void all_reception_buffer_clear(void)
all_reception_buffer_clear:
        CFI Block cfiBlock39 Using cfiCommon0
        CFI Function all_reception_buffer_clear
// 2017 {
// 2018 	unsigned char i;
// 2019 	for(i=0;i<DEEP;i++)
        FUNCALL all_reception_buffer_clear, reception_buffer_clear
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R20, 0
        RJMP    ??all_reception_buffer_clear_0
// 2020 	{
// 2021 		if(scs_frame[i].finished != 0)
??all_reception_buffer_clear_1:
        LDI     R21, 0
        LDI     R16, 24
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        LDI     R30, LOW(scs_frame)
        LDI     R31, (scs_frame) >> 8
        ADD     R30, R16
        ADC     R31, R17
        LDD     R16, Z+22
        TST     R16
        BREQ    ??all_reception_buffer_clear_2
// 2022 		{
// 2023 			scs_frame[i].finished = 1;
        LDI     R16, 1
        STD     Z+22, R16
// 2024 		}
// 2025 
// 2026     scs_frame[i].byte[20] = 0;
??all_reception_buffer_clear_2:
        STD     Z+20, R21
// 2027 	}
        INC     R20
??all_reception_buffer_clear_0:
        CPI     R20, 35
        BRCS    ??all_reception_buffer_clear_1
// 2028 	reception_buffer_clear(0);
        LDI     R16, 0
        CALL    reception_buffer_clear
// 2029 }
        RET
        CFI EndBlock cfiBlock39
// 2030 

        RSEG CODE:CODE:NOROOT(1)
// 2031 void manual_reception_buffer_clear(void)
manual_reception_buffer_clear:
        CFI Block cfiBlock40 Using cfiCommon0
        CFI Function manual_reception_buffer_clear
// 2032 {
// 2033   unsigned char i;
// 2034 	for(i=0;i<DEEP;i++)
        LDI     R20, 0
        RJMP    ??manual_reception_buffer_clear_0
// 2035 	{
// 2036 		scs_frame[i].finished = 0;
??manual_reception_buffer_clear_1:
        LDI     R21, 0
        LDI     R16, 24
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        LDI     R30, LOW(scs_frame)
        LDI     R31, (scs_frame) >> 8
        ADD     R30, R16
        ADC     R31, R17
        STD     Z+22, R21
// 2037     scs_frame[i].byte[20] = 0;
        STD     Z+20, R21
// 2038 	}
        INC     R20
??manual_reception_buffer_clear_0:
        CPI     R20, 35
        BRCS    ??manual_reception_buffer_clear_1
// 2039 }
        RET
        CFI EndBlock cfiBlock40
// 2040 

        RSEG CODE:CODE:NOROOT(1)
// 2041 void start_conf(void)
start_conf:
        CFI Block cfiBlock41 Using cfiCommon0
        CFI Function start_conf
// 2042 {
        FUNCALL start_conf, put_s
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, delay_ms
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, is_gateway_busy
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, put_s
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, delay_ms
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, put_s
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, delay_ms
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, put_s
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, led_blinking_normal
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, delay_ms
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, get_key
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, delay_ms
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, StrToChar
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, StrToChar
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, StrToChar
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL start_conf, led_blinking
        LOCFRAME CSTACK, 12, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        ST      -Y, R24
        CFI R24 Frame(CFA_Y, -1)
        CFI CFA_Y Y+1
        SBIW    R29:R28, 10
        CFI CFA_Y Y+11
// 2043 	unsigned char  buffer[3];
// 2044   volatile unsigned char ko_confed;
// 2045 	unsigned char buffer_gateway[6];
// 2046 	unsigned char i;
// 2047 	
// 2048 	#ifndef NO_CONFIGURATOR_HOUSING
// 2049   if(flags.id_confed)
// 2050   {
// 2051 		while(power_up_configuration() != 0)
// 2052 		{
// 2053 			if(flags.diagnostic != 1)
// 2054 			{
// 2055 				led_blinking(200,1000);
// 2056 				KO[0] = '0';
// 2057         KO[1] = '2';
// 2058         KO[2] = '0';
// 2059         KO[3] = '3';
// 2060 				diagnostic_frame();
// 2061 				flags.diagnostic = 1;
// 2062 			}
// 2063 		}
// 2064 		
// 2065 		if( ee_product_information.conf_type == 0 )
// 2066     	ee_configurators = Configurators;
// 2067   }
// 2068 	#else
// 2069 
// 2070 	#endif
// 2071   //configuration for gateway
// 2072 	put_s("$09\r");
        LDI     R16, LOW(`?<Constant "$09\\r">`)
        LDI     R17, (`?<Constant "$09\\r">`) >> 8
        CALL    put_s
// 2073 	for(i=0;i<200;i++)
        LDI     R24, 0
        RJMP    ??start_conf_0
// 2074   {
// 2075     if(is_gateway_busy() == 0x13)
// 2076     {
// 2077 			break;
// 2078 		}
// 2079 		else
// 2080 		{
// 2081       delay_ms(10);
??start_conf_1:
        LDI     R16, 10
        LDI     R17, 0
        CALL    delay_ms
// 2082 		}
        INC     R24
??start_conf_0:
        CPI     R24, 200
        BRCC    ??start_conf_2
        CALL    is_gateway_busy
        CPI     R16, 19
        BRNE    ??start_conf_1
// 2083   }
// 2084 	
// 2085 	//put_s("$13\r");
// 2086 	//delay_ms(2000);
// 2087 	
// 2088   put_s("$270500\r");
??start_conf_2:
        LDI     R16, LOW((`?<Constant "$09\\r">` + 5))
        LDI     R17, HIGH((`?<Constant "$09\\r">` + 5))
        CALL    put_s
// 2089   delay_ms(50);
        LDI     R16, 50
        LDI     R17, 0
        CALL    delay_ms
// 2090   put_s("$021000\r");
        LDI     R16, LOW((`?<Constant "$09\\r">` + 14))
        LDI     R17, HIGH((`?<Constant "$09\\r">` + 14))
        CALL    put_s
// 2091   delay_ms(50);
        LDI     R16, 50
        LDI     R17, 0
        CALL    delay_ms
// 2092 	
// 2093 	buffer_gateway[0] = '$';
        LDI     R16, 36
        STD     Y+4, R16
// 2094 	buffer_gateway[1] = '1';
        LDI     R16, 49
        STD     Y+5, R16
// 2095 	buffer_gateway[2] = '6';
        LDI     R16, 54
        STD     Y+6, R16
// 2096 	buffer_gateway[3] = '2';
        LDI     R16, 50
        STD     Y+7, R16
// 2097 	buffer_gateway[4] = '2';
        STD     Y+8, R16
// 2098 	buffer_gateway[5] = 0x0D;
        LDI     R16, 13
        STD     Y+9, R16
// 2099   put_s(buffer_gateway);
        MOVW    R17:R16, R29:R28
        SUBI    R16, 252
        SBCI    R17, 255
        CALL    put_s
// 2100 	
// 2101 	/*
// 2102 	put_s("$1600\r");
// 2103   delay_ms(50);
// 2104   */
// 2105   if(ee_flags.manual_initialize)
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeget16_16
        ANDI    R16, 0x01
        BREQ    ??start_conf_3
// 2106   {
// 2107     led_blinking_normal();
        RCALL   led_blinking_normal
        RJMP    ??start_conf_4
// 2108     while(get_key()) delay_ms(50);
??start_conf_5:
        LDI     R16, 50
        LDI     R17, 0
        CALL    delay_ms
??start_conf_4:
        CALL    get_key
        TST     R16
        BRNE    ??start_conf_5
// 2109     delay_ms(500);
        LDI     R16, 244
        LDI     R17, 1
        CALL    delay_ms
// 2110     ee_flags.manual_initialize = 0;
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeget16_16
        ANDI    R16, 0xFE
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeput16_16
??start_conf_3:
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeget8_16
        TST     R16
        BREQ    ??start_conf_6
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeget8_16
        CPI     R16, 1
        BREQ    $+2+2
        RJMP    ??start_conf_7
??start_conf_6:
        LDI     R30, LOW(Configurators)
        LDI     R31, (Configurators) >> 8
        LDI     R20, LOW(ee_configurators)
        LDI     R21, (ee_configurators) >> 8
        LDI     R17, 6
        LDI     R18, 0
        CALL    ?ML_EEPROM_SRAM_16_16_L07
// 2111   }
// 2112   //flags.manual_initialize = 0;
// 2113 
// 2114 	if(ee_product_information.conf_type == BASIC_PHYSICAL || ee_product_information.conf_type == BASIC_VIRTUAL)
// 2115 	{
// 2116     Configurators = ee_configurators;
// 2117 		buffer[0] = Configurators.A;
        LDS     R16, (Configurators + 1)
        STD     Y+1, R16
// 2118 		buffer[1] = Configurators.PL;
        LDS     R16, (Configurators + 2)
        STD     Y+2, R16
// 2119 		KO_conf.DesAdd = StrToChar(buffer);
        MOVW    R17:R16, R29:R28
        SUBI    R16, 255
        SBCI    R17, 255
        CALL    StrToChar
        STS     (KO_conf + 2), R16
        MOVW    R17:R16, R29:R28
        SUBI    R16, 255
        SBCI    R17, 255
// 2120 		ee_KO_conf.DesAdd = StrToChar(buffer);
        CALL    StrToChar
        LDI     R20, LOW((ee_KO_conf + 2))
        LDI     R21, HIGH((ee_KO_conf + 2))
        CALL    __eeput8_16
// 2121 
// 2122     switch(Configurators.M)
        LDS     R16, (Configurators + 3)
        SUBI    R16, 48
        BREQ    ??start_conf_8
        DEC     R16
        BREQ    ??start_conf_9
        DEC     R16
        BREQ    ??start_conf_10
        DEC     R16
        BREQ    ??start_conf_8
        DEC     R16
        BRNE    $+2+2
        RJMP    ??start_conf_11
        RJMP    ??start_conf_12
??start_conf_8:
        LDI     R16, 48
        LDI     R20, LOW(ee_KO)
        LDI     R21, (ee_KO) >> 8
        CALL    __eeput8_16
// 2123     {
// 2124       case '0':
// 2125         #ifdef NONE_CONFED_203
// 2126           ee_KO[0] = '0';
// 2127           ee_KO[1] = '0';
        LDI     R20, LOW((ee_KO + 1))
        LDI     R21, HIGH((ee_KO + 1))
        CALL    __eeput8_16
// 2128           ee_KO[2] = 'A';
        LDI     R16, 65
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        CALL    __eeput8_16
// 2129           ee_KO[3] = '8';
        LDI     R16, 56
??start_conf_13:
        LDI     R20, LOW((ee_KO + 3))
        LDI     R21, HIGH((ee_KO + 3))
        CALL    __eeput8_16
// 2130           ee_product_information.cen_system = NOT_CEN;
??start_conf_14:
        LDI     R16, 0
??start_conf_15:
        LDI     R20, LOW((ee_product_information + 4))
        LDI     R21, HIGH((ee_product_information + 4))
??start_conf_16:
        CALL    __eeput8_16
        RJMP    ??start_conf_12
??start_conf_9:
        LDI     R16, 48
        LDI     R20, LOW(ee_KO)
        LDI     R21, (ee_KO) >> 8
        CALL    __eeput8_16
// 2131         #endif
// 2132       break;
// 2133 
// 2134       case '1':
// 2135         #ifdef NONE_CONFED_203
// 2136           ee_KO[0] = '0';
// 2137           ee_KO[1] = '0';
        LDI     R20, LOW((ee_KO + 1))
        LDI     R21, HIGH((ee_KO + 1))
        CALL    __eeput8_16
// 2138           ee_KO[2] = 'A';
        LDI     R16, 65
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        CALL    __eeput8_16
// 2139           ee_KO[3] = '6';
        LDI     R16, 54
        RJMP    ??start_conf_13
??start_conf_10:
        LDI     R16, 48
        LDI     R20, LOW(ee_KO)
        LDI     R21, (ee_KO) >> 8
        CALL    __eeput8_16
// 2140           ee_product_information.cen_system = NOT_CEN;
// 2141         #endif
// 2142       break;
// 2143 
// 2144       case '2':
// 2145         #ifdef NONE_CONFED_203
// 2146           ee_KO[0] = '0';
// 2147           ee_KO[1] = '0';
        LDI     R20, LOW((ee_KO + 1))
        LDI     R21, HIGH((ee_KO + 1))
        CALL    __eeput8_16
// 2148           ee_KO[2] = '8';
        LDI     R16, 56
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        CALL    __eeput8_16
// 2149           ee_KO[3] = '0';
        LDI     R16, 48
        LDI     R20, LOW((ee_KO + 3))
        LDI     R21, HIGH((ee_KO + 3))
        CALL    __eeput8_16
// 2150 					ee_KO_conf.AddressType = PP;
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 2151           ee_product_information.cen_system = CEN;
        LDI     R16, 1
        LDI     R20, LOW((ee_product_information + 4))
        LDI     R21, HIGH((ee_product_information + 4))
        CALL    __eeput8_16
// 2152           ee_product_information.local_A = Configurators.A;
        LDS     R16, (Configurators + 1)
        LDI     R20, LOW((ee_product_information + 2))
        LDI     R21, HIGH((ee_product_information + 2))
        CALL    __eeput8_16
// 2153           ee_product_information.local_PL = Configurators.PL;
        LDS     R16, (Configurators + 2)
        LDI     R20, LOW((ee_product_information + 3))
        LDI     R21, HIGH((ee_product_information + 3))
        RJMP    ??start_conf_16
??start_conf_11:
        LDI     R16, 48
        LDI     R20, LOW(ee_KO)
        LDI     R21, (ee_KO) >> 8
        CALL    __eeput8_16
// 2154         #endif
// 2155       break;
// 2156 
// 2157       case '3':
// 2158         #ifdef NONE_CONFED_203
// 2159           ee_KO[0] = '0';
// 2160           ee_KO[1] = '0';
// 2161           ee_KO[2] = 'A';
// 2162           ee_KO[3] = '8';
// 2163           ee_product_information.cen_system = NOT_CEN;
// 2164         #endif
// 2165       break;
// 2166 
// 2167       case '4':
// 2168         #ifdef NONE_CONFED_203
// 2169           ee_KO[0] = '0';
// 2170           ee_KO[1] = '0';
        LDI     R20, LOW((ee_KO + 1))
        LDI     R21, HIGH((ee_KO + 1))
        CALL    __eeput8_16
// 2171           ee_KO[2] = 'A';
        LDI     R16, 65
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        CALL    __eeput8_16
// 2172           ee_KO[3] = '6';
        LDI     R16, 54
        LDI     R20, LOW((ee_KO + 3))
        LDI     R21, HIGH((ee_KO + 3))
        CALL    __eeput8_16
// 2173           ee_product_information.cen_system = NOT_CEN;
        LDI     R16, 0
        LDI     R20, LOW((ee_product_information + 4))
        LDI     R21, HIGH((ee_product_information + 4))
        CALL    __eeput8_16
// 2174           ee_KO_conf.Reference = ee_KO_conf.DesAdd;
        LDI     R20, LOW((ee_KO_conf + 2))
        LDI     R21, HIGH((ee_KO_conf + 2))
        CALL    __eeget8_16
        LDI     R20, LOW((ee_KO_conf + 5))
        LDI     R21, HIGH((ee_KO_conf + 5))
        RJMP    ??start_conf_16
// 2175         #endif
// 2176       break;
// 2177 
// 2178       default:break;
// 2179     }
// 2180 	}
// 2181 	else if(ee_product_information.conf_type == ADVANCED)
??start_conf_7:
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeget8_16
        CPI     R16, 2
        BRNE    ??start_conf_17
        LDI     R16, 48
        STS     (Configurators + 1), R16
// 2182 	{
// 2183 		Configurators.A = '0';
// 2184 		Configurators.PL = '0';
        STS     (Configurators + 2), R16
// 2185 		Configurators.M = '0';
        STS     (Configurators + 3), R16
// 2186 		Configurators.S = '0';
        STS     (Configurators + 4), R16
// 2187 		Configurators.T = '0';	
        STS     (Configurators + 5), R16
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        CALL    __eeget8_16
        STD     Y+1, R16
// 2188 
// 2189     buffer[0] = ee_KO[2];
// 2190     buffer[1] = ee_KO[3];
        LDI     R20, LOW((ee_KO + 3))
        LDI     R21, HIGH((ee_KO + 3))
        CALL    __eeget8_16
        STD     Y+2, R16
// 2191     ko_confed = StrToChar(buffer);
        MOVW    R17:R16, R29:R28
        SUBI    R16, 255
        SBCI    R17, 255
        CALL    StrToChar
        ST      Y, R16
// 2192 #ifdef NONE_CONFED_203
// 2193    switch(ko_confed)
        LD      R16, Y
        SUBI    R16, 128
        BREQ    ??start_conf_18
        SUBI    R16, 36
        BREQ    ??start_conf_18
        DEC     R16
        BREQ    ??start_conf_18
        DEC     R16
        BREQ    ??start_conf_19
        SUBI    R16, 2
        BREQ    ??start_conf_19
        SUBI    R16, 207
        BRNE    ??start_conf_20
// 2194    {
// 2195     case 0xA8:
// 2196       ee_product_information.cen_system = NOT_CEN;
??start_conf_19:
        LDI     R16, 0
        RJMP    ??start_conf_21
// 2197     break;
// 2198 
// 2199     case 0xA6:
// 2200       ee_product_information.cen_system = NOT_CEN;
// 2201       //ee_KO_conf.Reference = ee_KO_conf.DesAdd;
// 2202     break;
// 2203 
// 2204     case 0x77:
// 2205       ee_product_information.cen_system = NOT_CEN;
// 2206     break;
// 2207 
// 2208     case 0x80:
// 2209       ee_product_information.cen_system = CEN;
??start_conf_18:
        LDI     R16, 1
??start_conf_21:
        LDI     R20, LOW((ee_product_information + 4))
        LDI     R21, HIGH((ee_product_information + 4))
        CALL    __eeput8_16
// 2210     break;
// 2211 
// 2212     case 0xA4:
// 2213       ee_product_information.cen_system = CEN;
// 2214     break;
// 2215 
// 2216     case 0xA5:
// 2217       ee_product_information.cen_system = CEN;
// 2218     break;
// 2219 
// 2220     default:break;
// 2221    }
// 2222 #endif
// 2223 
// 2224 #ifdef NONE_CONFED_204
// 2225    switch(ko_confed)
// 2226    {
// 2227     case 0xA6:
// 2228       ee_product_information.cen_system = NOT_CEN;
// 2229     break;
// 2230 
// 2231     case 0xA4:
// 2232       ee_product_information.cen_system = CEN;
// 2233     break;
// 2234 
// 2235     default:break;
// 2236    }
// 2237 #endif
// 2238 
// 2239 #ifdef NONE_CONFED_203
// 2240    switch(ko_confed)
??start_conf_20:
        LD      R16, Y
        SUBI    R16, 165
        BREQ    ??start_conf_22
        SUBI    R16, 203
        BREQ    ??start_conf_23
        SUBI    R16, 7
        BRNE    ??start_conf_12
// 2241    {
// 2242     case 0x77:
// 2243       ee_product_information.cen_system = NOT_CEN;
??start_conf_23:
        RJMP    ??start_conf_14
// 2244     break;
// 2245 
// 2246     case 0xA5:
// 2247       ee_product_information.cen_system = CEN;
??start_conf_22:
        LDI     R16, 1
        RJMP    ??start_conf_15
// 2248     break;
// 2249 
// 2250     case 0x70:
// 2251       ee_product_information.cen_system = NOT_CEN;
// 2252     break;
// 2253 
// 2254     default:break;
// 2255    }
// 2256 #endif
// 2257 	}
// 2258 	else
// 2259 	{
// 2260     for(unsigned char i = 0;i<16;i++)
??start_conf_17:
        LDI     R22, 0
        RJMP    ??start_conf_24
??start_conf_25:
        INC     R22
??start_conf_24:
        CPI     R22, 16
        BRCC    ??start_conf_26
// 2261     {
// 2262       if(ee_scenario[i].confed)
        LDI     R18, LOW((ee_scenario + 6))
        LDI     R19, HIGH((ee_scenario + 6))
        MOV     R20, R22
        LDI     R21, 0
        LDI     R16, 7
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        ADD     R18, R16
        ADC     R19, R17
        MOVW    R21:R20, R19:R18
        CALL    __eeget8_16
        TST     R16
        BREQ    ??start_conf_25
// 2263       {
// 2264         flags.confed = 1;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ORI     R16, 0x20
        STD     Z+3, R17
        STD     Z+2, R16
// 2265         break;
// 2266       }
// 2267     }
// 2268 
// 2269     if(flags.confed == 0)
??start_conf_26:
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        SBRC    R16, 5
        RJMP    ??start_conf_27
// 2270 		  led_blinking(120,120);
        LDI     R20, 120
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
??start_conf_27:
        LDI     R16, 48
        STS     (Configurators + 1), R16
// 2271 		
// 2272 		Configurators.A = '0';
// 2273 		Configurators.PL = '0';
        STS     (Configurators + 2), R16
// 2274 		Configurators.M = '0';
        STS     (Configurators + 3), R16
// 2275 		Configurators.S = '0';
        STS     (Configurators + 4), R16
// 2276 		Configurators.T = '0';	
        STS     (Configurators + 5), R16
// 2277 	}
// 2278 
// 2279   if( ee_product_information.ID_factory_assigned )
??start_conf_12:
        LDI     R20, LOW((ee_product_information + 5))
        LDI     R21, HIGH((ee_product_information + 5))
        CALL    __eeget16_16
        ANDI    R16, 0x01
        BREQ    ??start_conf_28
// 2280     DLED_OFF;
        SBI     0x08, 0x06
        RJMP    ??start_conf_29
// 2281   else
// 2282     DLED_ON;
??start_conf_28:
        CBI     0x08, 0x06
// 2283 
// 2284   Time_delay.led_blink.count = 0;
??start_conf_29:
        LDI     R16, 0
        LDI     R18, 0
        LDI     R30, LOW((Time_delay + 160))
        LDI     R31, HIGH((Time_delay + 160))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 2285 	Time_delay.led_blink.stack_top = 999;
        LDI     R16, 231
        LDI     R17, 3
        LDI     R30, LOW((Time_delay + 164))
        LDI     R31, HIGH((Time_delay + 164))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R18
// 2286 	Time_delay.led_blink.enabled = 1;
        LDI     R16, 1
        STS     (Time_delay + 169), R16
// 2287 }
        ADIW    R29:R28, 10
        CFI CFA_Y Y+1
        LD      R24, Y+
        CFI R24 SameValue
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock41
        REQUIRE _A_PORTC
// 2288 

        RSEG CODE:CODE:NOROOT(1)
// 2289 void factory_default(void)
factory_default:
        CFI Block cfiBlock42 Using cfiCommon0
        CFI Function factory_default
// 2290 {
        FUNCALL factory_default, KO_parameter_initial_temp
        LOCFRAME CSTACK, 53, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        CALL    ?PROLOGUE3_L09
        CFI R26 Frame(CFA_Y, -1)
        CFI R25 Frame(CFA_Y, -2)
        CFI R24 Frame(CFA_Y, -3)
        CFI CFA_Y Y+3
        SBIW    R29:R28, 50
        CFI CFA_Y Y+53
        LDS     R16, flash_KO
        STS     KO, R16
// 2291 	unsigned char i;
// 2292 	unsigned char j;
// 2293 	//load_default_parameter();
// 2294 	//remember_parameter();				// with load default together
// 2295 	
// 2296 	//ID_setting("00050000");
// 2297 	KO[0] = flash_KO[0];
// 2298   KO[1] = flash_KO[1];
        LDS     R24, (flash_KO + 1)
        STS     (KO + 1), R24
// 2299   KO[2] = flash_KO[2];
        LDS     R25, (flash_KO + 2)
        STS     (KO + 2), R25
// 2300   KO[3] = flash_KO[3];
        LDS     R26, (flash_KO + 3)
        STS     (KO + 3), R26
// 2301 	KO_parameter_initial_temp();
        CALL    KO_parameter_initial_temp
// 2302 	ee_KO_conf = KO_conf;
        MOVW    R19:R18, R29:R28
        MOVW    R17:R16, R19:R18
        LDI     R30, LOW(KO_conf)
        LDI     R31, (KO_conf) >> 8
        LDI     R20, 50
        LDI     R21, 0
        CALL    ?ML_SRAM_SRAM_16_L07
        MOVW    R23:R22, R29:R28
        LDI     R20, LOW(ee_KO_conf)
        LDI     R21, (ee_KO_conf) >> 8
        MOVW    R31:R30, R23:R22
        LDI     R17, 50
        LDI     R18, 0
        CALL    ?ML_SRAM_EEPROM_16_16_L07
        LDS     R16, flash_KO
        LDI     R20, LOW(ee_KO)
        LDI     R21, (ee_KO) >> 8
        CALL    __eeput8_16
// 2303 	
// 2304   ee_KO[0] = flash_KO[0];
// 2305   ee_KO[1] = flash_KO[1];
        LDI     R20, LOW((ee_KO + 1))
        LDI     R21, HIGH((ee_KO + 1))
        MOV     R16, R24
        CALL    __eeput8_16
// 2306   ee_KO[2] = flash_KO[2];
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        MOV     R16, R25
        CALL    __eeput8_16
// 2307   ee_KO[3] = flash_KO[3];
        LDI     R20, LOW((ee_KO + 3))
        LDI     R21, HIGH((ee_KO + 3))
        MOV     R16, R26
        CALL    __eeput8_16
        LDI     R16, 0
        LDI     R20, LOW((ee_product_information + 4))
        LDI     R21, HIGH((ee_product_information + 4))
        CALL    __eeput8_16
// 2308   ee_product_information.cen_system = 0;
// 2309 	ee_product_information.conf_type = 3;
        LDI     R16, 3
        LDI     R20, LOW(ee_product_information)
        LDI     R21, (ee_product_information) >> 8
        CALL    __eeput8_16
// 2310 	//ee_product_information.ID_confed = 0;
// 2311 
// 2312 	ee_scenario_index = 0;
        LDI     R16, 0
        LDI     R20, LOW(ee_scenario_index)
        LDI     R21, (ee_scenario_index) >> 8
        CALL    __eeput8_16
// 2313   g_ns_index = 0;
        LDI     R20, LOW(g_ns_index)
        LDI     R21, (g_ns_index) >> 8
        CALL    __eeput8_16
// 2314 	for(i=0;i<16;i++)
        LDI     R22, 0
        RJMP    ??factory_default_0
// 2315 	{
// 2316 		ee_scenario[i].ns_number = 0x01;
// 2317 		ee_scenario[i].reg_type = 0x01;
// 2318 		for(j=0;j<3;j++)
// 2319 		{
// 2320 			ee_scenario[i].id[j] = 0;
??factory_default_1:
        ADD     R20, R30
        ADC     R21, R16
        SUBI    R20, 254
        SBCI    R21, 255
        CALL    __eeput8_16
// 2321 		}
        INC     R30
??factory_default_2:
        CPI     R30, 3
        LDI     R16, 0
        MOVW    R21:R20, R19:R18
        BRCS    ??factory_default_1
// 2322 		ee_scenario[i].key_number = 0;
        SUBI    R20, 251
        SBCI    R21, 255
        CALL    __eeput8_16
// 2323 		ee_scenario[i].confed = 0;
        SUBI    R18, 250
        SBCI    R19, 255
        MOVW    R21:R20, R19:R18
        CALL    __eeput8_16
        INC     R22
??factory_default_0:
        CPI     R22, 16
        BRCC    ??factory_default_3
        MOV     R20, R22
        LDI     R21, 0
        LDI     R16, 7
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        LDI     R18, LOW(ee_scenario)
        LDI     R19, (ee_scenario) >> 8
        ADD     R18, R16
        ADC     R19, R17
        LDI     R16, 1
        MOVW    R21:R20, R19:R18
        CALL    __eeput8_16
        MOVW    R21:R20, R19:R18
        SUBI    R20, 255
        SBCI    R21, 255
        CALL    __eeput8_16
        LDI     R30, 0
        RJMP    ??factory_default_2
// 2324 	}
// 2325 
// 2326 	ee_product_information.local_A = '0';
??factory_default_3:
        LDI     R16, 48
        LDI     R20, LOW((ee_product_information + 2))
        LDI     R21, HIGH((ee_product_information + 2))
        CALL    __eeput8_16
// 2327 	ee_product_information.local_PL = '0';
        LDI     R20, LOW((ee_product_information + 3))
        LDI     R21, HIGH((ee_product_information + 3))
        CALL    __eeput8_16
        LDI     R20, LOW((ee_configurators + 1))
        LDI     R21, HIGH((ee_configurators + 1))
        CALL    __eeput8_16
// 2328 	
// 2329 	ee_configurators.A = '0';
// 2330 	ee_configurators.PL = '0';
        LDI     R20, LOW((ee_configurators + 2))
        LDI     R21, HIGH((ee_configurators + 2))
        CALL    __eeput8_16
// 2331 	ee_configurators.M = '0';
        LDI     R20, LOW((ee_configurators + 3))
        LDI     R21, HIGH((ee_configurators + 3))
        CALL    __eeput8_16
// 2332 	ee_configurators.S = '0';
        LDI     R20, LOW((ee_configurators + 4))
        LDI     R21, HIGH((ee_configurators + 4))
        CALL    __eeput8_16
// 2333 	ee_configurators.T = '0';
        LDI     R20, LOW((ee_configurators + 5))
        LDI     R21, HIGH((ee_configurators + 5))
        CALL    __eeput8_16
// 2334 	
// 2335 	ee_flags.PnG_confed = 0;
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeget16_16
        ANDI    R16, 0xFD
        LDI     R20, LOW(ee_flags)
        LDI     R21, (ee_flags) >> 8
        CALL    __eeput16_16
// 2336 }
        ADIW    R29:R28, 50
        CFI CFA_Y Y+3
        LDI     R30, 3
        JMP     ?EPILOGUE_B3_L09
        CFI EndBlock cfiBlock42
// 2337 

        RSEG CODE:CODE:NOROOT(1)
// 2338 void configurator_to_KO(void)
configurator_to_KO:
        CFI Block cfiBlock43 Using cfiCommon0
        CFI Function configurator_to_KO
// 2339 {
// 2340 	switch(ee_configurators.M)
        LDI     R20, LOW((ee_configurators + 3))
        LDI     R21, HIGH((ee_configurators + 3))
        CALL    __eeget8_16
        SUBI    R16, 48
        BREQ    ??configurator_to_KO_0
        SUBI    R16, 3
        BREQ    ??configurator_to_KO_1
        RJMP    ??configurator_to_KO_2
??configurator_to_KO_0:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 2341 	{
// 2342 		case '0':
// 2343 			ee_KO_conf.AddressType = 0;
// 2344 			ee_KO_conf.FuncMod = 1;
        LDI     R16, 1
        LDI     R20, LOW((ee_KO_conf + 29))
        LDI     R21, HIGH((ee_KO_conf + 29))
        CALL    __eeput8_16
// 2345 			ee_KO_conf.LightReg = 0;
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 28))
        LDI     R21, HIGH((ee_KO_conf + 28))
        CALL    __eeput8_16
// 2346 			ee_KO_conf.Retrigger = 0;
        RJMP    ??configurator_to_KO_3
??configurator_to_KO_1:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 1))
        LDI     R21, HIGH((ee_KO_conf + 1))
        CALL    __eeput8_16
// 2347 			ee_KO_conf.en_load = 1;
// 2348 			ee_KO_conf.en_GS_main_group = 0;
// 2349 			ee_KO_conf.TypeLoop = 0;
// 2350 			ee_KO_conf.Retrigger = 0;
// 2351 			//ee_KO_conf.PofL = 60;
// 2352 #ifdef HARDWARE_PIR
// 2353 			ee_KO_conf.InitOccu = 1;
// 2354 			ee_KO_conf.MaintainOccu = 1;
// 2355 #endif
// 2356 			
// 2357 #ifdef HARDWARE_US
// 2358 			ee_KO_conf.InitOccu = 2;
// 2359 			ee_KO_conf.MaintainOccu = 2;
// 2360 #endif
// 2361 			
// 2362 #ifdef HAEDWARE_PIR_US
// 2363 			ee_KO_conf.InitOccu = 3;
// 2364 			ee_KO_conf.MaintainOccu = 4;
// 2365 #endif
// 2366 		break;
// 2367 		
// 2368 	case '1':
// 2369 		
// 2370 		break;
// 2371 		
// 2372 	case '2':
// 2373 		break;
// 2374 		
// 2375 	case '3':
// 2376 		ee_KO_conf.AddressType = 0;
// 2377 		ee_KO_conf.FuncMod = 1;
        LDI     R16, 1
        LDI     R20, LOW((ee_KO_conf + 29))
        LDI     R21, HIGH((ee_KO_conf + 29))
        CALL    __eeput8_16
// 2378 		ee_KO_conf.LightReg = 1;
        LDI     R20, LOW((ee_KO_conf + 28))
        LDI     R21, HIGH((ee_KO_conf + 28))
        CALL    __eeput8_16
// 2379 		ee_KO_conf.Retrigger = 0;
        LDI     R16, 0
??configurator_to_KO_3:
        LDI     R20, LOW((ee_KO_conf + 32))
        LDI     R21, HIGH((ee_KO_conf + 32))
        CALL    __eeput8_16
// 2380 		ee_KO_conf.en_load = 1;
        LDI     R16, 1
        LDI     R20, LOW((ee_KO_conf + 13))
        LDI     R21, HIGH((ee_KO_conf + 13))
        CALL    __eeput8_16
// 2381 		ee_KO_conf.en_GS_main_group = 0;
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 14))
        LDI     R21, HIGH((ee_KO_conf + 14))
        CALL    __eeput8_16
// 2382 		ee_KO_conf.TypeLoop = 0;
        LDI     R20, LOW((ee_KO_conf + 23))
        LDI     R21, HIGH((ee_KO_conf + 23))
        CALL    __eeput8_16
// 2383 		ee_KO_conf.Retrigger = 0;
// 2384 		//ee_KO_conf.PofL = 60;
// 2385 #ifdef HARDWARE_PIR
// 2386 		ee_KO_conf.InitOccu = 1;
        LDI     R16, 1
        LDI     R20, LOW((ee_KO_conf + 30))
        LDI     R21, HIGH((ee_KO_conf + 30))
        CALL    __eeput8_16
// 2387 		ee_KO_conf.MaintainOccu = 1;
        LDI     R20, LOW((ee_KO_conf + 31))
        LDI     R21, HIGH((ee_KO_conf + 31))
        CALL    __eeput8_16
// 2388 #endif
// 2389 		
// 2390 #ifdef HARDWARE_US
// 2391 		ee_KO_conf.InitOccu = 2;
// 2392 		ee_KO_conf.MaintainOccu = 2;
// 2393 #endif
// 2394 		
// 2395 #ifdef HAEDWARE_PIR_US
// 2396 		ee_KO_conf.InitOccu = 3;
// 2397 		ee_KO_conf.MaintainOccu = 4;
// 2398 #endif
// 2399 		break;
// 2400 		
// 2401 	case '4':
// 2402 		break;
// 2403 		
// 2404 	default:break;
// 2405 	}
// 2406 				switch(ee_configurators.S)
??configurator_to_KO_2:
        LDI     R20, LOW((ee_configurators + 4))
        LDI     R21, HIGH((ee_configurators + 4))
        CALL    __eeget8_16
        SUBI    R16, 48
        BREQ    ??configurator_to_KO_4
        DEC     R16
        BREQ    ??configurator_to_KO_5
        DEC     R16
        BREQ    ??configurator_to_KO_6
        DEC     R16
        BREQ    ??configurator_to_KO_7
        RJMP    ??configurator_to_KO_8
??configurator_to_KO_4:
        LDI     R16, 0
        RJMP    ??configurator_to_KO_9
??configurator_to_KO_5:
        LDI     R16, 1
        RJMP    ??configurator_to_KO_9
??configurator_to_KO_6:
        LDI     R16, 2
        RJMP    ??configurator_to_KO_9
??configurator_to_KO_7:
        LDI     R16, 3
??configurator_to_KO_9:
        LDI     R20, LOW((ee_KO_conf + 20))
        LDI     R21, HIGH((ee_KO_conf + 20))
        CALL    __eeput8_16
// 2407 				{
// 2408 				case '0':
// 2409 					ee_KO_conf.PirSens = 0;
// 2410 					ee_KO_conf.USSens = 0;
// 2411 					break;
// 2412 					
// 2413 				case '1':
// 2414 					ee_KO_conf.PirSens = 1;
// 2415 						ee_KO_conf.USSens = 1;
// 2416 					break;
// 2417 					
// 2418 				case '2':
// 2419 					ee_KO_conf.PirSens = 2;
// 2420 						ee_KO_conf.USSens = 2;
// 2421 					break;
// 2422 					
// 2423 				case '3':
// 2424 					ee_KO_conf.PirSens = 3;
// 2425 						ee_KO_conf.USSens = 3;
        LDI     R20, LOW((ee_KO_conf + 21))
        LDI     R21, HIGH((ee_KO_conf + 21))
        CALL    __eeput8_16
// 2426 					break;
// 2427 					
// 2428 				default:break;
// 2429 				}
// 2430 	
// 2431 	switch( Configurators.T )
??configurator_to_KO_8:
        LDS     R16, (Configurators + 5)
        LDI     R30, LOW(`?<Jumptable for configurator_to_KO>_0`)
        LDI     R31, (`?<Jumptable for configurator_to_KO>_0`) >> 8
        JMP     ?CV_SWITCH_L06
??configurator_to_KO_10:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2432 	{
// 2433 		case '0':
// 2434 			ee_KO_conf.Hours = 0;
// 2435 			ee_KO_conf.Minutes = 10;
        LDI     R16, 10
        RJMP    ??configurator_to_KO_11
??configurator_to_KO_12:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2436 			ee_KO_conf.Seconds = 0;
// 2437 		break;
// 2438 
// 2439 		case '1':
// 2440 			ee_KO_conf.Hours = 0;
// 2441 			ee_KO_conf.Minutes = 0;
        LDI     R20, LOW((ee_KO_conf + 11))
        LDI     R21, HIGH((ee_KO_conf + 11))
        CALL    __eeput8_16
// 2442 			ee_KO_conf.Seconds = 30;
        LDI     R16, 30
        RJMP    ??configurator_to_KO_13
??configurator_to_KO_14:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2443 		break;
// 2444 
// 2445 		case '2':
// 2446 			ee_KO_conf.Hours = 0;
// 2447 			ee_KO_conf.Minutes = 1;
        LDI     R16, 1
??configurator_to_KO_11:
        LDI     R20, LOW((ee_KO_conf + 11))
        LDI     R21, HIGH((ee_KO_conf + 11))
        CALL    __eeput8_16
// 2448 			ee_KO_conf.Seconds = 0;
        LDI     R16, 0
??configurator_to_KO_13:
        LDI     R20, LOW((ee_KO_conf + 12))
        LDI     R21, HIGH((ee_KO_conf + 12))
        CALL    __eeput8_16
        RET
??configurator_to_KO_15:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2449 		break;
// 2450 
// 2451 		case '3':
// 2452 			ee_KO_conf.Hours = 0;
// 2453 			ee_KO_conf.Minutes = 2;
        LDI     R16, 2
        RJMP    ??configurator_to_KO_11
??configurator_to_KO_16:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2454 			ee_KO_conf.Seconds = 0;
// 2455 		break;
// 2456 
// 2457 		case '4':
// 2458 			ee_KO_conf.Hours = 0;
// 2459 			ee_KO_conf.Minutes = 5;
        LDI     R16, 5
        RJMP    ??configurator_to_KO_11
??configurator_to_KO_17:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2460 			ee_KO_conf.Seconds = 0;
// 2461 		break;
// 2462 
// 2463 		case '5':
// 2464 			ee_KO_conf.Hours = 0;
// 2465 			ee_KO_conf.Minutes = 10;
// 2466 			ee_KO_conf.Seconds = 0;
// 2467 		break;
// 2468 
// 2469 		case '6':
// 2470 			ee_KO_conf.Hours = 0;
// 2471 			ee_KO_conf.Minutes = 15;
        LDI     R16, 15
        RJMP    ??configurator_to_KO_11
??configurator_to_KO_18:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2472 			ee_KO_conf.Seconds = 0;
// 2473 		break;
// 2474 
// 2475 		case '7':
// 2476 			ee_KO_conf.Hours = 0;
// 2477 			ee_KO_conf.Minutes = 20;
        LDI     R16, 20
        RJMP    ??configurator_to_KO_11
??configurator_to_KO_19:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2478 			ee_KO_conf.Seconds = 0;
// 2479 		break;
// 2480 
// 2481 		case '8':
// 2482 			ee_KO_conf.Hours = 0;
// 2483 			ee_KO_conf.Minutes = 30;
        LDI     R16, 30
        RJMP    ??configurator_to_KO_11
??configurator_to_KO_20:
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 10))
        LDI     R21, HIGH((ee_KO_conf + 10))
        CALL    __eeput8_16
// 2484 			ee_KO_conf.Seconds = 0;
// 2485 		break;
// 2486 
// 2487 		case '9':
// 2488 			ee_KO_conf.Hours = 0;
// 2489 			ee_KO_conf.Minutes = 40;
        LDI     R16, 40
        LDI     R20, LOW((ee_KO_conf + 11))
        LDI     R21, HIGH((ee_KO_conf + 11))
        CALL    __eeput8_16
// 2490 			ee_KO_conf.Seconds = 0;
        LDI     R16, 0
        LDI     R20, LOW((ee_KO_conf + 12))
        LDI     R21, HIGH((ee_KO_conf + 12))
        CALL    __eeput8_16
// 2491 		break;
// 2492 
// 2493 		default: break;
// 2494 	}
// 2495 }
??configurator_to_KO_21:
        RET
        CFI EndBlock cfiBlock43
// 2496 

        RSEG CODE:CODE:NOROOT(1)
// 2497 void service_main(void)
service_main:
        CFI Block cfiBlock44 Using cfiCommon0
        CFI Function service_main
// 2498 {
// 2499   switch (state.main_state)
        FUNCALL service_main, get_key
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, diagnostic_frame
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, timer_flex_initial
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, led_blinking
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, led_blinking_normal
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, get_key
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, diagnostic_frame
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, timer_flex_initial
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, led_blinking
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, led_blinking_normal
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, factory_calibration
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, function_service
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, ir_pnl
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, scs_pnl_advance_slave
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, scs_pnl_advance_master
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, scs_pnl_none_confed_master
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, scs_pnl_none_confed_slave
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, scs_pnl_none_confed_master
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, led_blinking_disable
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL service_main, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        LDI     R30, LOW(`?<Jumptable for service_main>_0`)
        LDI     R31, (`?<Jumptable for service_main>_0`) >> 8
        JMP     ?SV_SWITCH_L06
// 2500   {
// 2501     case STATE_PRE_PROGRAMMING:
// 2502       if(get_key())
??service_main_0:
        CALL    get_key
        TST     R16
        BRNE    $+2+2
        RJMP    ??service_main_1
// 2503 			{
// 2504         key_result.short_pressed = 0;
        LDI     R16, 0
        STS     key_result, R16
// 2505         key_result.long_pressed = 0;
        STS     (key_result + 1), R16
// 2506         state.main_state = STATE_PROGRAMMING;
        LDI     R17, 32
        STS     (state + 2), R16
        STS     (state + 3), R17
// 2507 				diagnostic_frame();	
        CALL    diagnostic_frame
// 2508 				flags.AA_received = 0;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R17, 0xBF
        STD     Z+3, R17
        STD     Z+2, R16
// 2509 				flags.parameter_setting_wrong = 0;
        LDD     R16, Z+4
        LDD     R17, Z+5
        ANDI    R16, 0xFD
        STD     Z+5, R17
        STD     Z+4, R16
// 2510 				flags.parameter_write_right = 0;
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R16, 0x7F
        STD     Z+3, R17
        STD     Z+2, R16
        RJMP    ??service_main_1
// 2511 			}
// 2512     break;
// 2513 
// 2514     case STATE_PROGRAMMING:
// 2515 			timer_flex_initial(660000);				//11 minutes time out
??service_main_2:
        LDI     R16, 32
        LDI     R17, 18
        LDI     R18, 10
        LDI     R19, 0
        RCALL   timer_flex_initial
// 2516 			led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 2517 			state.main_state = STATE_PROGRAMMING_DURING;
        LDI     R16, 0
        LDI     R17, 33
??service_main_3:
        STS     (state + 2), R16
        STS     (state + 3), R17
        RJMP    ??service_main_1
// 2518     break;
// 2519 
// 2520     case STATE_PROGRAMMING_DURING:
// 2521 			if( Time_delay.timer_flex.time_out == 1 )
??service_main_4:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??service_main_1
// 2522 			{
// 2523 				led_blinking_normal();
        RCALL   led_blinking_normal
// 2524         send_frame_pp_ext_broad("D20001348C0000FA",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW(`?<Constant "D20001348C0000FA">`)
        LDI     R17, (`?<Constant "D20001348C0000FA">`) >> 8
        CALL    send_frame_pp_ext_broad
// 2525 				state.main_state = STATE_NORMAL;
??service_main_5:
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
        RJMP    ??service_main_1
// 2526 			}
// 2527     break;
// 2528 
// 2529     case STATE_PRE_TEST:
// 2530       if(get_key())
??service_main_6:
        CALL    get_key
        TST     R16
        BREQ    ??service_main_7
// 2531 			{
// 2532         state.main_state = STATE_PROGRAMMING;
        LDI     R16, 0
        LDI     R17, 32
        STS     (state + 2), R16
        STS     (state + 3), R17
// 2533 				diagnostic_frame();	
        CALL    diagnostic_frame
        RJMP    ??service_main_1
// 2534 			}
// 2535       else if(Time_delay.timer_flex.time_out == 1)
??service_main_7:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??service_main_1
// 2536       {
// 2537         state.main_state = STATE_NORMAL;
        RJMP    ??service_main_5
// 2538       }
// 2539     break;
// 2540 
// 2541     case STATE_TEST:
// 2542 			timer_flex_initial(660000);				//11 minutes time out
??service_main_8:
        LDI     R16, 32
        LDI     R17, 18
        LDI     R18, 10
        LDI     R19, 0
        RCALL   timer_flex_initial
// 2543 			led_blinking(1000,1000);
        LDI     R20, 232
        LDI     R21, 3
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 232
        LDI     R17, 3
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
// 2544 			state.main_state = STATE_TEST_DURING;
        LDI     R16, 2
        LDI     R17, 32
        RJMP    ??service_main_3
// 2545     break;
// 2546 
// 2547     case STATE_TEST_DURING:
// 2548       if( Time_delay.timer_flex.time_out == 1 )
??service_main_9:
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??service_main_1
// 2549 			{
// 2550 				led_blinking_normal();
        RCALL   led_blinking_normal
// 2551 				state.main_state = STATE_NORMAL;
        RJMP    ??service_main_5
// 2552 			}
// 2553     break;
// 2554 
// 2555 		case FACTORY_CALIBRATION:
// 2556 			case FACTORY_CALIBRATION_STEP1:
// 2557 				factory_calibration();
??service_main_10:
        CALL    factory_calibration
// 2558 		break;
// 2559 		
// 2560     default:break;
// 2561   }
// 2562 
// 2563 		if(product_information.conf_type == ADVANCED)
??service_main_1:
        LDS     R16, product_information
        CPI     R16, 2
        BRNE    ??service_main_11
// 2564 		{
// 2565 			if( state.main_state == STATE_NORMAL )
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        OR      R16, R17
        BRNE    ??service_main_12
// 2566 			{
// 2567 				if(flags.app_disable == 0)
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        MOV     R16, R17
        SBRC    R16, 5
        RJMP    ??service_main_12
// 2568 				{
// 2569 					function_service();			// add by alan 20090424
??service_main_13:
        CALL    function_service
        RJMP    ??service_main_12
// 2570 				}
// 2571 			}
// 2572 		}
// 2573 		else if(product_information.conf_type == BASIC_PHYSICAL || product_information.conf_type == BASIC_VIRTUAL)
??service_main_11:
        LDS     R16, product_information
        TST     R16
        BREQ    ??service_main_14
        LDS     R16, product_information
        CPI     R16, 1
        BRNE    ??service_main_12
// 2574 		{
// 2575 			if( state.main_state == STATE_NORMAL )
??service_main_14:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        OR      R16, R17
        BREQ    ??service_main_13
// 2576 			{
// 2577 				function_service();			// add by alan 20090424
// 2578 			}
// 2579 		}
// 2580 
// 2581 		if(product_information.conf_type == NONE_CONFED || product_information.conf_type == ADVANCED)
??service_main_12:
        LDS     R16, product_information
        CPI     R16, 3
        BREQ    ??service_main_15
        LDS     R16, product_information
        CPI     R16, 2
        BRNE    ??service_main_16
// 2582 		{
// 2583 			ir_pnl();								//0218
??service_main_15:
        CALL    ir_pnl
// 2584 	
// 2585     	if(product_information.conf_type == ADVANCED)
        LDS     R16, product_information
        CPI     R16, 2
        BRNE    ??service_main_17
// 2586 			{
// 2587 				if(flags.scs_pnl_group_sensor_starded)
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        MOV     R16, R17
        SBRS    R16, 0
        RJMP    ??service_main_18
// 2588 				{
// 2589 					scs_pnl_advance_slave();
        RCALL   scs_pnl_advance_slave
        RJMP    ??service_main_17
// 2590 				}
// 2591 				else
// 2592 				{
// 2593 					if(KO_conf.AddressType == GROUP)
??service_main_18:
        LDS     R16, (KO_conf + 1)
        CPI     R16, 2
        BRNE    ??service_main_19
// 2594 						scs_pnl_advance_master();
        CALL    scs_pnl_advance_master
        RJMP    ??service_main_17
// 2595 					else if(KO_conf.AddressType == PP)
??service_main_19:
        LDS     R16, (KO_conf + 1)
        TST     R16
        BRNE    ??service_main_17
// 2596 						scs_pnl_none_confed_master();		
        CALL    scs_pnl_none_confed_master
// 2597 				}				
// 2598 			}
// 2599 
// 2600 			if(product_information.conf_type == NONE_CONFED)
??service_main_17:
        LDS     R16, product_information
        CPI     R16, 3
        BRNE    ??service_main_16
// 2601 			{
// 2602 				if(flags.scs_pnl_group_sensor_starded)
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        MOV     R16, R17
        SBRS    R16, 0
        RJMP    ??service_main_20
// 2603 					scs_pnl_none_confed_slave();
        RCALL   scs_pnl_none_confed_slave
        RJMP    ??service_main_16
// 2604 				else
// 2605 					scs_pnl_none_confed_master();							
??service_main_20:
        CALL    scs_pnl_none_confed_master
// 2606 			}
// 2607 		}
// 2608 	
// 2609 		if(state.id_setting == 1)
??service_main_16:
        LDI     R30, LOW(state)
        LDI     R31, (state) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        SBRS    R16, 7
        RJMP    ??service_main_21
// 2610 		{
// 2611 			if( Time_delay.timer_flex.time_out == 1 )
        LDS     R16, (Time_delay + 157)
        CPI     R16, 1
        BRNE    ??service_main_21
// 2612 			{
// 2613 				led_blinking_disable(0);
        LDI     R16, 0
        RCALL   led_blinking_disable
// 2614 				state.id_setting = 0;
        LDI     R30, LOW(state)
        LDI     R31, (state) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        ANDI    R16, 0x7F
        STD     Z+1, R17
        ST      Z, R16
// 2615 				send_frame_pp_ext_broad("D000010E00000000",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "D20001348C0000FA">` + 17))
        LDI     R17, HIGH((`?<Constant "D20001348C0000FA">` + 17))
        CALL    send_frame_pp_ext_broad
// 2616 			}
// 2617 		}
// 2618 }
??service_main_21:
        RET
        CFI EndBlock cfiBlock44
// 2619 

        RSEG CODE:CODE:NOROOT(1)
// 2620 void led_status_recover(void)
led_status_recover:
        CFI Block cfiBlock45 Using cfiCommon0
        CFI Function led_status_recover
// 2621 {
// 2622   if(product_information.conf_type == 3)
        FUNCALL led_status_recover, led_blinking
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL led_status_recover, led_blinking_disable
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDS     R16, product_information
        CPI     R16, 3
        BRNE    ??led_status_recover_0
// 2623   {
// 2624     led_blinking(120,120);
        LDI     R20, 120
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
        RET
// 2625   }
// 2626   else
// 2627     led_blinking_disable(0);
??led_status_recover_0:
        LDI     R16, 0
        RCALL   led_blinking_disable
// 2628 }
        RET
        CFI EndBlock cfiBlock45
// 2629 

        RSEG CODE:CODE:NOROOT(1)
// 2630 void frame_send_disable_automatic_control(void)
frame_send_disable_automatic_control:
        CFI Block cfiBlock46 Using cfiCommon0
        CFI Function frame_send_disable_automatic_control
// 2631 {
// 2632 	send_frame_pp_broad("B0009900",TRANS_DELAY);
        FUNCALL frame_send_disable_automatic_control, send_frame_pp_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW(`?<Constant "B0009900">`)
        LDI     R17, (`?<Constant "B0009900">`) >> 8
        CALL    send_frame_pp_broad
// 2633 }
        RET
        CFI EndBlock cfiBlock46
// 2634 

        RSEG CODE:CODE:NOROOT(1)
// 2635 void frame_send_enable_automatic_control(void)
frame_send_enable_automatic_control:
        CFI Block cfiBlock47 Using cfiCommon0
        CFI Function frame_send_enable_automatic_control
// 2636 {
// 2637   send_frame_pp_broad("B000990F",TRANS_DELAY);
        FUNCALL frame_send_enable_automatic_control, send_frame_pp_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 2638 }
        RET
        CFI EndBlock cfiBlock47
// 2639 

        RSEG CODE:CODE:NOROOT(1)
// 2640 void frame_send_start_pnl_none_group_confed(void)
frame_send_start_pnl_none_group_confed:
        CFI Block cfiBlock48 Using cfiCommon0
        CFI Function frame_send_start_pnl_none_group_confed
// 2641 {
// 2642 	send_frame_pp_ext_broad("D20001428C000940",TRANS_DELAY);
        FUNCALL frame_send_start_pnl_none_group_confed, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 9))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 9))
        CALL    send_frame_pp_ext_broad
// 2643 }
        RET
        CFI EndBlock cfiBlock48
// 2644 

        RSEG CODE:CODE:NOROOT(1)
// 2645 void frame_send_start_pnl_group_confed(void)
frame_send_start_pnl_group_confed:
        CFI Block cfiBlock49 Using cfiCommon0
        CFI Function frame_send_start_pnl_group_confed
// 2646 {
        FUNCALL frame_send_start_pnl_group_confed, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL frame_send_start_pnl_group_confed, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        SBIW    R29:R28, 20
        CFI CFA_Y Y+20
// 2647   unsigned char buffer_tx[17] = "D20001428C000940";
        MOVW    R19:R18, R29:R28
        SUBI    R18, 253
        SBCI    R19, 255
        MOVW    R17:R16, R19:R18
        LDI     R30, LOW(`?<Constant "D20001428C000940">_1`)
        LDI     R31, (`?<Constant "D20001428C000940">_1`) >> 8
        LDI     R20, 17
        LDI     R21, 0
        CALL    ?ML_FLASH_SRAM_16EC_16_L07
// 2648   unsigned char buffer[3];
// 2649 
// 2650   CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 2651   buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 2652   buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 2653   send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
// 2654 }
        ADIW    R29:R28, 20
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock49
// 2655 

        RSEG CODE:CODE:NOROOT(1)
// 2656 void frame_send_end_pnl(void)
frame_send_end_pnl:
        CFI Block cfiBlock50 Using cfiCommon0
        CFI Function frame_send_end_pnl
// 2657 {
// 2658 	send_frame_pp_ext_broad("D20001428C00094F",TRANS_DELAY);
        FUNCALL frame_send_end_pnl, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 78))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 78))
        CALL    send_frame_pp_ext_broad
// 2659 }
        RET
        CFI EndBlock cfiBlock50
// 2660 

        RSEG CODE:CODE:NOROOT(1)
// 2661 void frame_send_group_request(void)
frame_send_group_request:
        CFI Block cfiBlock51 Using cfiCommon0
        CFI Function frame_send_group_request
// 2662 {
// 2663   send_frame_pp_ext_broad("D20001428C000945",TRANS_DELAY);
        FUNCALL frame_send_group_request, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 61))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 61))
        CALL    send_frame_pp_ext_broad
// 2664 }
        RET
        CFI EndBlock cfiBlock51
// 2665 

        RSEG CODE:CODE:NOROOT(1)
// 2666 void led_blinking_normal(void)
led_blinking_normal:
        CFI Block cfiBlock52 Using cfiCommon0
        CFI Function led_blinking_normal
// 2667 {
// 2668 	flags.confed = 0;
        FUNCALL led_blinking_normal, led_blinking
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL led_blinking_normal, led_blinking_disable
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LDD     R16, Z+2
        LDD     R17, Z+3
        ANDI    R16, 0xDF
        STD     Z+3, R17
        STD     Z+2, R16
// 2669   for(unsigned char i = 0;i<16;i++)
        LDI     R22, 0
        RJMP    ??led_blinking_normal_0
??led_blinking_normal_1:
        INC     R22
??led_blinking_normal_0:
        CPI     R22, 16
        BRCC    ??led_blinking_normal_2
// 2670   {
// 2671  		if(ee_scenario[i].confed)
        LDI     R18, LOW((ee_scenario + 6))
        LDI     R19, HIGH((ee_scenario + 6))
        MOV     R20, R22
        LDI     R21, 0
        LDI     R16, 7
        LDI     R17, 0
        CALL    ?S_EC_MUL_L02
        ADD     R18, R16
        ADC     R19, R17
        MOVW    R21:R20, R19:R18
        CALL    __eeget8_16
        TST     R16
        BREQ    ??led_blinking_normal_1
// 2672 		{
// 2673 			flags.confed = 1;
        LDD     R16, Z+2
        LDD     R17, Z+3
        ORI     R16, 0x20
        STD     Z+3, R17
        STD     Z+2, R16
// 2674 			break;
// 2675 		}
// 2676 	}
// 2677 		
// 2678 	if(state.main_state == STATE_NORMAL)
??led_blinking_normal_2:
        LDS     R16, (state + 2)
        LDS     R17, (state + 3)
        OR      R16, R17
        BRNE    ??led_blinking_normal_3
// 2679 	{
// 2680   	if(product_information.conf_type == NONE_CONFED && flags.confed == 0)
        LDS     R16, product_information
        CPI     R16, 3
        BRNE    ??led_blinking_normal_4
        LDD     R16, Z+2
        LDD     R17, Z+3
        SBRC    R16, 5
        RJMP    ??led_blinking_normal_4
// 2681   	{
// 2682       led_blinking(120,120);
        LDI     R20, 120
        LDI     R21, 0
        LDI     R22, 0
        LDI     R23, 0
        LDI     R16, 120
        LDI     R17, 0
        LDI     R18, 0
        LDI     R19, 0
        RCALL   led_blinking
        RET
// 2683   	}
// 2684   	else
// 2685     	led_blinking_disable(0);
??led_blinking_normal_4:
        LDI     R16, 0
        RCALL   led_blinking_disable
// 2686 	}
// 2687 }
??led_blinking_normal_3:
        RET
        CFI EndBlock cfiBlock52
// 2688 

        RSEG CODE:CODE:NOROOT(1)
// 2689 void load_default_advance_parameter(void)
load_default_advance_parameter:
        CFI Block cfiBlock53 Using cfiCommon0
        CFI Function load_default_advance_parameter
// 2690 {
// 2691 	KO[0] = '0';
        FUNCALL load_default_advance_parameter, KO_parameter_initial
        LOCFRAME CSTACK, 2, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        LDI     R30, LOW(KO)
        LDI     R31, (KO) >> 8
        LDI     R16, 48
        ST      Z, R16
// 2692 	KO[1] = '0';
        STD     Z+1, R16
// 2693 	KO[2] = 'A';
        LDI     R16, 65
        STD     Z+2, R16
// 2694 	KO[3] = '8';
        LDI     R16, 56
        STD     Z+3, R16
        LDI     R16, 48
        LDI     R20, LOW(ee_KO)
        LDI     R21, (ee_KO) >> 8
        CALL    __eeput8_16
// 2695 				
// 2696 	ee_KO[0] = '0';
// 2697   ee_KO[1] = '0';
        LDI     R20, LOW((ee_KO + 1))
        LDI     R21, HIGH((ee_KO + 1))
        CALL    __eeput8_16
// 2698   ee_KO[2] = 'A';
        LDI     R16, 65
        LDI     R20, LOW((ee_KO + 2))
        LDI     R21, HIGH((ee_KO + 2))
        CALL    __eeput8_16
// 2699   ee_KO[3] = '8';
        LDI     R16, 56
        LDI     R20, LOW((ee_KO + 3))
        LDI     R21, HIGH((ee_KO + 3))
        CALL    __eeput8_16
        LDI     R16, 48
        LDI     R20, LOW(ee_KO_last)
        LDI     R21, (ee_KO_last) >> 8
        CALL    __eeput8_16
// 2700   //to avoid power up KO confdiguration
// 2701   ee_KO_last[0] = '0';
// 2702   ee_KO_last[1] = '0';
        LDI     R20, LOW((ee_KO_last + 1))
        LDI     R21, HIGH((ee_KO_last + 1))
        CALL    __eeput8_16
// 2703   ee_KO_last[2] = 'A';
        LDI     R16, 65
        LDI     R20, LOW((ee_KO_last + 2))
        LDI     R21, HIGH((ee_KO_last + 2))
        CALL    __eeput8_16
// 2704   ee_KO_last[3] = '8';
        LDI     R16, 56
        LDI     R20, LOW((ee_KO_last + 3))
        LDI     R21, HIGH((ee_KO_last + 3))
        CALL    __eeput8_16
// 2705   //ee_KO_conf = KO_conf;
// 2706   KO_parameter_initial();
        CALL    KO_parameter_initial
// 2707   KO_conf = ee_KO_conf;
        LDI     R30, LOW(KO_conf)
        LDI     R31, (KO_conf) >> 8
        LDI     R20, LOW(ee_KO_conf)
        LDI     R21, (ee_KO_conf) >> 8
        LDI     R17, 50
        LDI     R18, 0
        CALL    ?ML_EEPROM_SRAM_16_16_L07
// 2708 }
        RET
        CFI EndBlock cfiBlock53
// 2709 

        RSEG CODE:CODE:NOROOT(1)
// 2710 void led_blinking_stage2_initial(unsigned long int ms)
led_blinking_stage2_initial:
        CFI Block cfiBlock54 Using cfiCommon0
        CFI Function led_blinking_stage2_initial
// 2711 {
// 2712 	Time_delay.pnl_stage2.stack_top = ms;
        LDI     R30, LOW((Time_delay + 197))
        LDI     R31, HIGH((Time_delay + 197))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 2713 	Time_delay.pnl_stage2.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 193))
        LDI     R31, HIGH((Time_delay + 193))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 2714 	Time_delay.pnl_stage2.time_out = 0;
        STS     (Time_delay + 201), R16
// 2715 	Time_delay.pnl_stage2.started = 1;
        LDI     R16, 1
        STS     (Time_delay + 203), R16
// 2716 	Time_delay.pnl_stage2.enabled = 1;
        STS     (Time_delay + 202), R16
// 2717 }
        RET
        CFI EndBlock cfiBlock54
// 2718 

        RSEG CODE:CODE:NOROOT(1)
// 2719 void PnL_ad_end(void)
PnL_ad_end:
        CFI Block cfiBlock55 Using cfiCommon0
        CFI Function PnL_ad_end
// 2720 {
        FUNCALL PnL_ad_end, send_group_pnl_frame
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_ad_end, strncpy
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_ad_end, CharToStr
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_ad_end, send_frame_pp_ext_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_ad_end, send_frame_pp_broad
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_ad_end, led_blinking_disable
        LOCFRAME CSTACK, 20, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        SBIW    R29:R28, 20
        CFI CFA_Y Y+20
        LDS     R16, (KO_conf + 5)
        TST     R16
        BREQ    ??PnL_ad_end_0
// 2721 	unsigned char buffer_tx[17];
// 2722 	unsigned char buffer[3];
// 2723 	
// 2724 	if(KO_conf.Reference != 0)
// 2725 				send_group_pnl_frame(SET,KO_conf.Reference,REF_TRANS);
        LDI     R18, 51
        LDS     R17, (KO_conf + 5)
        LDI     R16, 50
        CALL    send_group_pnl_frame
// 2726 			
// 2727 	strncpy(buffer_tx,"D20001428C00094F",17);
??PnL_ad_end_0:
        LDI     R20, 17
        LDI     R21, 0
        LDI     R18, LOW((`?<Constant "B0009900">` + 78))
        LDI     R19, HIGH((`?<Constant "B0009900">` + 78))
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    strncpy
// 2728 	CharToStr(KO_conf.GR,buffer);
        MOVW    R19:R18, R29:R28
        LDS     R16, (KO_conf + 6)
        CALL    CharToStr
// 2729 	buffer_tx[10] = buffer[0];
        LD      R16, Y
        STD     Y+13, R16
// 2730 	buffer_tx[11] = buffer[1];
        LDD     R16, Y+1
        STD     Y+14, R16
// 2731 	send_frame_pp_ext_broad(buffer_tx,TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        MOVW    R17:R16, R29:R28
        SUBI    R16, 253
        SBCI    R17, 255
        CALL    send_frame_pp_ext_broad
// 2732 	send_frame_pp_broad("B000990F",TRANS_DELAY);
        LDI     R18, 50
        LDI     R19, 0
        LDI     R16, LOW((`?<Constant "B0009900">` + 35))
        LDI     R17, HIGH((`?<Constant "B0009900">` + 35))
        CALL    send_frame_pp_broad
// 2733 	led_blinking_disable(0);
        LDI     R16, 0
        RCALL   led_blinking_disable
// 2734 	state.main_state = STATE_NORMAL;
        LDI     R16, 0
        STS     (state + 2), R16
        STS     (state + 3), R16
// 2735 }
        ADIW    R29:R28, 20
        CFI CFA_Y Y+0
        RET
        CFI EndBlock cfiBlock55
// 2736 

        RSEG CODE:CODE:NOROOT(1)
// 2737 void PnL_NONE_end(void)
PnL_NONE_end:
        CFI Block cfiBlock56 Using cfiCommon0
        CFI Function PnL_NONE_end
// 2738 {
// 2739 	frame_send_end_pnl();
        FUNCALL PnL_NONE_end, frame_send_end_pnl
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_NONE_end, frame_send_enable_automatic_control
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        FUNCALL PnL_NONE_end, led_blinking_normal
        LOCFRAME CSTACK, 0, STACK
        LOCFRAME RSTACK, 2, STACK
        ARGFRAME RSTACK, 0, STACK
        RCALL   frame_send_end_pnl
// 2740   frame_send_enable_automatic_control();
        RCALL   frame_send_enable_automatic_control
// 2741   led_blinking_normal();
        RCALL   led_blinking_normal
// 2742 	state.pnl_slave = NORMAL;
        LDI     R30, LOW(state)
        LDI     R31, (state) >> 8
        LDI     R16, 0
        STD     Z+4, R16
// 2743 	state.main_state = STATE_NORMAL;
        STD     Z+2, R16
        STD     Z+3, R16
// 2744 }
        RET
        CFI EndBlock cfiBlock56
// 2745 

        RSEG CODE:CODE:NOROOT(1)
// 2746 void regulation_timer_initial(void)
regulation_timer_initial:
        CFI Block cfiBlock57 Using cfiCommon0
        CFI Function regulation_timer_initial
// 2747 {
// 2748 	Time_delay.regulation.stack_top = 200;
        LDI     R16, 200
        LDI     R17, 0
        LDI     R30, LOW((Time_delay + 274))
        LDI     R31, HIGH((Time_delay + 274))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R17
        STD     Z+3, R17
// 2749 	Time_delay.regulation.count = 0;
        LDI     R30, LOW((Time_delay + 270))
        LDI     R31, HIGH((Time_delay + 270))
        ST      Z, R17
        STD     Z+1, R17
        STD     Z+2, R17
        STD     Z+3, R17
// 2750 	Time_delay.regulation.time_out = 0;
        STS     (Time_delay + 278), R17
// 2751 	Time_delay.regulation.started = 1;
        LDI     R16, 1
        STS     (Time_delay + 280), R16
// 2752 	Time_delay.regulation.enabled = 1;
        STS     (Time_delay + 279), R16
// 2753 }
        RET
        CFI EndBlock cfiBlock57
// 2754 

        RSEG CODE:CODE:NOROOT(1)
// 2755 void relay_timer_initial(unsigned long int ms)
relay_timer_initial:
        CFI Block cfiBlock58 Using cfiCommon0
        CFI Function relay_timer_initial
// 2756 {
// 2757 	Time_delay.relay.stack_top = ms;
        LDI     R30, LOW((Time_delay + 296))
        LDI     R31, HIGH((Time_delay + 296))
        ST      Z, R16
        STD     Z+1, R17
        STD     Z+2, R18
        STD     Z+3, R19
// 2758 	Time_delay.relay.count = 0;
        LDI     R16, 0
        LDI     R30, LOW((Time_delay + 292))
        LDI     R31, HIGH((Time_delay + 292))
        ST      Z, R16
        STD     Z+1, R16
        STD     Z+2, R16
        STD     Z+3, R16
// 2759 	Time_delay.relay.time_out = 0;
        STS     (Time_delay + 300), R16
// 2760 	Time_delay.relay.started = 1;
        LDI     R16, 1
        STS     (Time_delay + 302), R16
// 2761 	Time_delay.relay.enabled = 1;
        STS     (Time_delay + 301), R16
// 2762 }
        RET
        CFI EndBlock cfiBlock58
// 2763 

        RSEG CODE:CODE:NOROOT(1)
// 2764 void test_ID_assigned(void)
test_ID_assigned:
        CFI Block cfiBlock59 Using cfiCommon0
        CFI Function test_ID_assigned
// 2765 {
// 2766 	if(ee_product_information.ID_factory_assigned == 0)
        LDI     R20, ((ee_product_information + 5) & 0xff) & 0xFF
        LDI     R21, (((ee_product_information + 5) >> 8) & 0xff) & 0xFF
        CALL    __eeget16_16
        MOV     R20, R16
        ANDI    R20, 0x01
        BRNE    ??test_ID_assigned_0
// 2767 	{		
// 2768 		ee_product_information.ID_factory_assigned = 1;	
        ORI     R16, 0x01
        LDI     R20, ((ee_product_information + 5) & 0xff) & 0xFF
        LDI     R21, (((ee_product_information + 5) >> 8) & 0xff) & 0xFF
        CALL    __eeput16_16
// 2769 		ee_product_information.ID_confed = 1;
        LDI     R16, 1
        LDI     R20, LOW((ee_product_information + 1))
        LDI     R21, HIGH((ee_product_information + 1))
        CALL    __eeput8_16
// 2770 		product_information.ID_confed = 1;
        STS     (product_information + 1), R16
// 2771 		flags.id_confed = 1;
        LDI     R30, LOW(flags)
        LDI     R31, (flags) >> 8
        LD      R16, Z
        LDD     R17, Z+1
        ORI     R16, 0x01
        STD     Z+1, R17
        ST      Z, R16
// 2772 	}
// 2773 }
??test_ID_assigned_0:
        RET
        CFI EndBlock cfiBlock59

        ASEGN ABSOLUTE:DATA:NOROOT,01fH
__?EECR:

        ASEGN ABSOLUTE:DATA:NOROOT,020H
__?EEDR:

        ASEGN ABSOLUTE:DATA:NOROOT,021H
__?EEARL:

        ASEGN ABSOLUTE:DATA:NOROOT,022H
__?EEARH:

        RSEG NEAR_ID:CODE:NOROOT(0)
`?<Initializer for <Constant "D10001420D000000"`:
        DC8 "D10001420D000000"

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_I>`:
        DC16    SFE(NEAR_I) - SFB(NEAR_I)
        DC16    SFB(NEAR_I)
        DC16    SFB(NEAR_ID)
        REQUIRE ?need_segment_init

        RSEG NEAR_ID:CODE:NOROOT(0)
`?<Initializer for <Constant "B0009900">>`:
        DC8 "B0009900"
`?<Initializer for <Constant "D20001428C000940"`:
        DC8 "D20001428C000940"
`?<Initializer for <Constant "B5001500">>`:
        DC8 "B5001500"
`?<Initializer for <Constant "B000990F">>`:
        DC8 "B000990F"
`?<Initializer for <Constant "D20001428C22094F"`:
        DC8 "D20001428C22094F"
`?<Initializer for <Constant "D20001428C000945"`:
        DC8 "D20001428C000945"
`?<Initializer for <Constant "D20001428C00094F"`:
        DC8 "D20001428C00094F"

        RSEG NEAR_ID:CODE:NOROOT(0)
`?<Initializer for <Constant "$09\\r">>`:
        DC8 "$09\015"
`?<Initializer for <Constant "$270500\\r">>`:
        DC8 "$270500\015"
`?<Initializer for <Constant "$021000\\r">>`:
        DC8 "$021000\015"

        RSEG NEAR_ID:CODE:NOROOT(0)
`?<Initializer for <Constant "D20001348C0000FA"`:
        DC8 "D20001348C0000FA"
`?<Initializer for <Constant "D000010E00000000"`:
        DC8 "D000010E00000000"

        RSEG INITTAB:CODE:NOROOT(0)
`?<Segment init: NEAR_Z>`:
        DC16    SFE(NEAR_Z) - SFB(NEAR_Z)
        DC16    SFB(NEAR_Z)
        DC16    0
        REQUIRE ?need_segment_init

        RSEG SWITCH:CODE:NOROOT(1)
`?<Jumptable for configurator_to_KO>_0`:
        DB      48
        DB      0
        DW      (??configurator_to_KO_21) /2
        DW      10
        DW      (??configurator_to_KO_10) /2
        DW      (??configurator_to_KO_12) /2
        DW      (??configurator_to_KO_14) /2
        DW      (??configurator_to_KO_15) /2
        DW      (??configurator_to_KO_16) /2
        DW      (??configurator_to_KO_10) /2
        DW      (??configurator_to_KO_17) /2
        DW      (??configurator_to_KO_18) /2
        DW      (??configurator_to_KO_19) /2
        DW      (??configurator_to_KO_20) /2

        RSEG SWITCH:CODE:NOROOT(1)
`?<Jumptable for service_main>_0`:
        DW      16
        DB      1
        DW      (??service_main_1) /2
        DW      (??service_main_0) /2
        DB      254,0x10,0x0
        DW      (??service_main_2) /2
        DB      0x1
        DW      (??service_main_8) /2
        DB      0x1
        DW      (??service_main_9) /2
        DB      0x1
        DW      (??service_main_6) /2
        DB      255,0xfd
        DW      (??service_main_4) /2
        DB      254,0x6f,0x44
        DW      (??service_main_10) /2
        DB      0x1
        DW      (??service_main_10) /2
        DB      251

        RSEG NEAR_F:CODE:NOROOT(0)
`?<Constant "00001200">`:
        DC8 "00001200"
        DC8 "D10001420D000000"

        RSEG NEAR_I:DATA:NOROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
`?<Constant "D10001420D000000">`:
        DS8 17
        REQUIRE `?<Initializer for <Constant "D10001420D000000"`

        RSEG NEAR_I:DATA:NOROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
`?<Constant "B0009900">`:
        DS8 9
        REQUIRE `?<Initializer for <Constant "B0009900">>`
        DS8 17
        REQUIRE `?<Initializer for <Constant "D20001428C000940"`
        DS8 9
        REQUIRE `?<Initializer for <Constant "B5001500">>`
        DS8 9
        REQUIRE `?<Initializer for <Constant "B000990F">>`
        DS8 17
        REQUIRE `?<Initializer for <Constant "D20001428C22094F"`
        DS8 17
        REQUIRE `?<Initializer for <Constant "D20001428C000945"`
        DS8 17
        REQUIRE `?<Initializer for <Constant "D20001428C00094F"`

        RSEG NEAR_I:DATA:NOROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
`?<Constant "$09\\r">`:
        DS8 5
        REQUIRE `?<Initializer for <Constant "$09\\r">>`
        DS8 9
        REQUIRE `?<Initializer for <Constant "$270500\\r">>`
        DS8 9
        REQUIRE `?<Initializer for <Constant "$021000\\r">>`

        RSEG NEAR_I:DATA:NOROOT(0)
        REQUIRE `?<Segment init: NEAR_I>`
`?<Constant "D20001348C0000FA">`:
        DS8 17
        REQUIRE `?<Initializer for <Constant "D20001348C0000FA"`
        DS8 17
        REQUIRE `?<Initializer for <Constant "D000010E00000000"`

        RSEG NEAR_F:CODE:NOROOT(0)
`?<Constant "D20001428C220940">`:
        DC8 "D20001428C220940"

        RSEG NEAR_F:CODE:NOROOT(0)
`?<Constant "D20001348C000941">`:
        DC8 "D20001348C000941"

        RSEG NEAR_F:CODE:NOROOT(0)
`?<Constant "D20001428C000940">_1`:
        DC8 "D20001428C000940"

        END
// 
//     12 bytes in segment ABSOLUTE
// 11 642 bytes in segment CODE
//     12 bytes in segment INITTAB
//     77 bytes in segment NEAR_F
//    169 bytes in segment NEAR_I
//    169 bytes in segment NEAR_ID
//     13 bytes in segment NEAR_Z
//     60 bytes in segment SWITCH
// 
// 11 948 bytes of CODE memory (+ 12 bytes shared)
//    182 bytes of DATA memory (+ 12 bytes shared)
//
//Errors: none
//Warnings: none
